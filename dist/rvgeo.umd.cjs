(function(at,ot){typeof exports=="object"&&typeof module<"u"?ot(exports):typeof define=="function"&&define.amd?define(["exports"],ot):(at=typeof globalThis<"u"?globalThis:at||self,ot(at.RVGeo={}))})(this,function(at){"use strict";var Ji=Object.defineProperty;var Gi=(at,ot,x)=>ot in at?Ji(at,ot,{enumerable:!0,configurable:!0,writable:!0,value:x}):at[ot]=x;var Z=(at,ot,x)=>(Gi(at,typeof ot!="symbol"?ot+"":ot,x),x);const ot=11102230246251565e-32,x=134217729,rn=(3+8*ot)*ot;function ft(e,t,n,r,s){let i,o,l,h,u=t[0],a=r[0],f=0,y=0;a>u==a>-u?(i=u,u=t[++f]):(i=a,a=r[++y]);let b=0;if(f<e&&y<n)for(a>u==a>-u?(o=u+i,l=i-(o-u),u=t[++f]):(o=a+i,l=i-(o-a),a=r[++y]),i=o,l!==0&&(s[b++]=l);f<e&&y<n;)a>u==a>-u?(o=i+u,h=o-i,l=i-(o-h)+(u-h),u=t[++f]):(o=i+a,h=o-i,l=i-(o-h)+(a-h),a=r[++y]),i=o,l!==0&&(s[b++]=l);for(;f<e;)o=i+u,h=o-i,l=i-(o-h)+(u-h),u=t[++f],i=o,l!==0&&(s[b++]=l);for(;y<n;)o=i+a,h=o-i,l=i-(o-h)+(a-h),a=r[++y],i=o,l!==0&&(s[b++]=l);return(i!==0||b===0)&&(s[b++]=i),b}function At(e,t,n,r,s,i,o,l){return ft(ft(e,t,n,r,o),o,s,i,l)}function _(e,t,n,r){let s,i,o,l,h,u,a,f,y,b,m;a=x*n,b=a-(a-n),m=n-b;let w=t[0];s=w*n,a=x*w,f=a-(a-w),y=w-f,o=y*m-(s-f*b-y*b-f*m);let T=0;o!==0&&(r[T++]=o);for(let O=1;O<e;O++)w=t[O],l=w*n,a=x*w,f=a-(a-w),y=w-f,h=y*m-(l-f*b-y*b-f*m),i=s+h,u=i-s,o=s-(i-u)+(h-u),o!==0&&(r[T++]=o),s=l+i,o=i-(s-l),o!==0&&(r[T++]=o);return(s!==0||T===0)&&(r[T++]=s),T}function sn(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function G(e){return new Float64Array(e)}const fr=(3+16*ot)*ot,hr=(2+12*ot)*ot,dr=(9+64*ot)*ot*ot,zt=G(4),on=G(8),ln=G(12),an=G(16),yt=G(4);function mr(e,t,n,r,s,i,o){let l,h,u,a,f,y,b,m,w,T,O,F,k,J,tt,st,lt,it;const C=e-s,z=n-s,q=t-i,v=r-i;J=C*v,y=x*C,b=y-(y-C),m=C-b,y=x*v,w=y-(y-v),T=v-w,tt=m*T-(J-b*w-m*w-b*T),st=q*z,y=x*q,b=y-(y-q),m=q-b,y=x*z,w=y-(y-z),T=z-w,lt=m*T-(st-b*w-m*w-b*T),O=tt-lt,f=tt-O,zt[0]=tt-(O+f)+(f-lt),F=J+O,f=F-J,k=J-(F-f)+(O-f),O=k-st,f=k-O,zt[1]=k-(O+f)+(f-st),it=F+O,f=it-F,zt[2]=F-(it-f)+(O-f),zt[3]=it;let et=sn(4,zt),c=hr*o;if(et>=c||-et>=c||(f=e-C,l=e-(C+f)+(f-s),f=n-z,u=n-(z+f)+(f-s),f=t-q,h=t-(q+f)+(f-i),f=r-v,a=r-(v+f)+(f-i),l===0&&h===0&&u===0&&a===0)||(c=dr*o+rn*Math.abs(et),et+=C*a+v*l-(q*u+z*h),et>=c||-et>=c))return et;J=l*v,y=x*l,b=y-(y-l),m=l-b,y=x*v,w=y-(y-v),T=v-w,tt=m*T-(J-b*w-m*w-b*T),st=h*z,y=x*h,b=y-(y-h),m=h-b,y=x*z,w=y-(y-z),T=z-w,lt=m*T-(st-b*w-m*w-b*T),O=tt-lt,f=tt-O,yt[0]=tt-(O+f)+(f-lt),F=J+O,f=F-J,k=J-(F-f)+(O-f),O=k-st,f=k-O,yt[1]=k-(O+f)+(f-st),it=F+O,f=it-F,yt[2]=F-(it-f)+(O-f),yt[3]=it;const d=ft(4,zt,4,yt,on);J=C*a,y=x*C,b=y-(y-C),m=C-b,y=x*a,w=y-(y-a),T=a-w,tt=m*T-(J-b*w-m*w-b*T),st=q*u,y=x*q,b=y-(y-q),m=q-b,y=x*u,w=y-(y-u),T=u-w,lt=m*T-(st-b*w-m*w-b*T),O=tt-lt,f=tt-O,yt[0]=tt-(O+f)+(f-lt),F=J+O,f=F-J,k=J-(F-f)+(O-f),O=k-st,f=k-O,yt[1]=k-(O+f)+(f-st),it=F+O,f=it-F,yt[2]=F-(it-f)+(O-f),yt[3]=it;const p=ft(d,on,4,yt,ln);J=l*a,y=x*l,b=y-(y-l),m=l-b,y=x*a,w=y-(y-a),T=a-w,tt=m*T-(J-b*w-m*w-b*T),st=h*u,y=x*h,b=y-(y-h),m=h-b,y=x*u,w=y-(y-u),T=u-w,lt=m*T-(st-b*w-m*w-b*T),O=tt-lt,f=tt-O,yt[0]=tt-(O+f)+(f-lt),F=J+O,f=F-J,k=J-(F-f)+(O-f),O=k-st,f=k-O,yt[1]=k-(O+f)+(f-st),it=F+O,f=it-F,yt[2]=F-(it-f)+(O-f),yt[3]=it;const A=ft(p,ln,4,yt,an);return an[A-1]}function Yt(e,t,n,r,s,i){const o=(t-i)*(n-s),l=(e-s)*(r-i),h=o-l,u=Math.abs(o+l);return Math.abs(h)>=fr*u?h:-mr(e,t,n,r,s,i,u)}const pr=(10+96*ot)*ot,yr=(4+48*ot)*ot,gr=(44+576*ot)*ot*ot,Lt=G(4),Bt=G(4),Nt=G(4),Rt=G(4),Mt=G(4),xt=G(4),gt=G(4),wt=G(4),Ae=G(8),Se=G(8),Ee=G(8),_e=G(8),Re=G(8),Me=G(8),re=G(8),se=G(8),ie=G(8),jt=G(4),Ft=G(4),Ut=G(4),L=G(8),j=G(16),nt=G(16),rt=G(16),Y=G(32),Dt=G(32),ct=G(48),bt=G(64);let vt=G(1152),xe=G(1152);function ut(e,t,n){e=ft(e,vt,t,n,xe);const r=vt;return vt=xe,xe=r,e}function wr(e,t,n,r,s,i,o,l,h){let u,a,f,y,b,m,w,T,O,F,k,J,tt,st,lt,it,C,z,q,v,et,c,d,p,A,E,M,g,R,B,P,N,D,U,I;const H=e-o,X=n-o,W=s-o,K=t-l,$=r-l,Q=i-l;P=X*Q,d=x*X,p=d-(d-X),A=X-p,d=x*Q,E=d-(d-Q),M=Q-E,N=A*M-(P-p*E-A*E-p*M),D=W*$,d=x*W,p=d-(d-W),A=W-p,d=x*$,E=d-(d-$),M=$-E,U=A*M-(D-p*E-A*E-p*M),g=N-U,c=N-g,Lt[0]=N-(g+c)+(c-U),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B-D,c=B-g,Lt[1]=B-(g+c)+(c-D),I=R+g,c=I-R,Lt[2]=R-(I-c)+(g-c),Lt[3]=I,P=W*K,d=x*W,p=d-(d-W),A=W-p,d=x*K,E=d-(d-K),M=K-E,N=A*M-(P-p*E-A*E-p*M),D=H*Q,d=x*H,p=d-(d-H),A=H-p,d=x*Q,E=d-(d-Q),M=Q-E,U=A*M-(D-p*E-A*E-p*M),g=N-U,c=N-g,Bt[0]=N-(g+c)+(c-U),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B-D,c=B-g,Bt[1]=B-(g+c)+(c-D),I=R+g,c=I-R,Bt[2]=R-(I-c)+(g-c),Bt[3]=I,P=H*$,d=x*H,p=d-(d-H),A=H-p,d=x*$,E=d-(d-$),M=$-E,N=A*M-(P-p*E-A*E-p*M),D=X*K,d=x*X,p=d-(d-X),A=X-p,d=x*K,E=d-(d-K),M=K-E,U=A*M-(D-p*E-A*E-p*M),g=N-U,c=N-g,Nt[0]=N-(g+c)+(c-U),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B-D,c=B-g,Nt[1]=B-(g+c)+(c-D),I=R+g,c=I-R,Nt[2]=R-(I-c)+(g-c),Nt[3]=I,u=ft(ft(ft(_(_(4,Lt,H,L),L,H,j),j,_(_(4,Lt,K,L),L,K,nt),nt,Y),Y,ft(_(_(4,Bt,X,L),L,X,j),j,_(_(4,Bt,$,L),L,$,nt),nt,Dt),Dt,bt),bt,ft(_(_(4,Nt,W,L),L,W,j),j,_(_(4,Nt,Q,L),L,Q,nt),nt,Y),Y,vt);let Ct=sn(u,vt),ne=yr*h;if(Ct>=ne||-Ct>=ne||(c=e-H,a=e-(H+c)+(c-o),c=t-K,b=t-(K+c)+(c-l),c=n-X,f=n-(X+c)+(c-o),c=r-$,m=r-($+c)+(c-l),c=s-W,y=s-(W+c)+(c-o),c=i-Q,w=i-(Q+c)+(c-l),a===0&&f===0&&y===0&&b===0&&m===0&&w===0)||(ne=gr*h+rn*Math.abs(Ct),Ct+=(H*H+K*K)*(X*w+Q*f-($*y+W*m))+2*(H*a+K*b)*(X*Q-$*W)+((X*X+$*$)*(W*b+K*y-(Q*a+H*w))+2*(X*f+$*m)*(W*K-Q*H))+((W*W+Q*Q)*(H*m+$*a-(K*f+X*b))+2*(W*y+Q*w)*(H*$-K*X)),Ct>=ne||-Ct>=ne))return Ct;if((f!==0||m!==0||y!==0||w!==0)&&(P=H*H,d=x*H,p=d-(d-H),A=H-p,N=A*A-(P-p*p-(p+p)*A),D=K*K,d=x*K,p=d-(d-K),A=K-p,U=A*A-(D-p*p-(p+p)*A),g=N+U,c=g-N,Rt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,Rt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,Rt[2]=R-(I-c)+(g-c),Rt[3]=I),(y!==0||w!==0||a!==0||b!==0)&&(P=X*X,d=x*X,p=d-(d-X),A=X-p,N=A*A-(P-p*p-(p+p)*A),D=$*$,d=x*$,p=d-(d-$),A=$-p,U=A*A-(D-p*p-(p+p)*A),g=N+U,c=g-N,Mt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,Mt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,Mt[2]=R-(I-c)+(g-c),Mt[3]=I),(a!==0||b!==0||f!==0||m!==0)&&(P=W*W,d=x*W,p=d-(d-W),A=W-p,N=A*A-(P-p*p-(p+p)*A),D=Q*Q,d=x*Q,p=d-(d-Q),A=Q-p,U=A*A-(D-p*p-(p+p)*A),g=N+U,c=g-N,xt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,xt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,xt[2]=R-(I-c)+(g-c),xt[3]=I),a!==0&&(T=_(4,Lt,a,Ae),u=ut(u,At(_(T,Ae,2*H,j),j,_(_(4,xt,a,L),L,$,nt),nt,_(_(4,Mt,a,L),L,-Q,rt),rt,Y,ct),ct)),b!==0&&(O=_(4,Lt,b,Se),u=ut(u,At(_(O,Se,2*K,j),j,_(_(4,Mt,b,L),L,W,nt),nt,_(_(4,xt,b,L),L,-X,rt),rt,Y,ct),ct)),f!==0&&(F=_(4,Bt,f,Ee),u=ut(u,At(_(F,Ee,2*X,j),j,_(_(4,Rt,f,L),L,Q,nt),nt,_(_(4,xt,f,L),L,-K,rt),rt,Y,ct),ct)),m!==0&&(k=_(4,Bt,m,_e),u=ut(u,At(_(k,_e,2*$,j),j,_(_(4,xt,m,L),L,H,nt),nt,_(_(4,Rt,m,L),L,-W,rt),rt,Y,ct),ct)),y!==0&&(J=_(4,Nt,y,Re),u=ut(u,At(_(J,Re,2*W,j),j,_(_(4,Mt,y,L),L,K,nt),nt,_(_(4,Rt,y,L),L,-$,rt),rt,Y,ct),ct)),w!==0&&(tt=_(4,Nt,w,Me),u=ut(u,At(_(tt,Me,2*Q,j),j,_(_(4,Rt,w,L),L,X,nt),nt,_(_(4,Mt,w,L),L,-H,rt),rt,Y,ct),ct)),a!==0||b!==0){if(f!==0||m!==0||y!==0||w!==0?(P=f*Q,d=x*f,p=d-(d-f),A=f-p,d=x*Q,E=d-(d-Q),M=Q-E,N=A*M-(P-p*E-A*E-p*M),D=X*w,d=x*X,p=d-(d-X),A=X-p,d=x*w,E=d-(d-w),M=w-E,U=A*M-(D-p*E-A*E-p*M),g=N+U,c=g-N,gt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,gt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,gt[2]=R-(I-c)+(g-c),gt[3]=I,P=y*-$,d=x*y,p=d-(d-y),A=y-p,d=x*-$,E=d-(d- -$),M=-$-E,N=A*M-(P-p*E-A*E-p*M),D=W*-m,d=x*W,p=d-(d-W),A=W-p,d=x*-m,E=d-(d- -m),M=-m-E,U=A*M-(D-p*E-A*E-p*M),g=N+U,c=g-N,wt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,wt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,wt[2]=R-(I-c)+(g-c),wt[3]=I,lt=ft(4,gt,4,wt,se),P=f*w,d=x*f,p=d-(d-f),A=f-p,d=x*w,E=d-(d-w),M=w-E,N=A*M-(P-p*E-A*E-p*M),D=y*m,d=x*y,p=d-(d-y),A=y-p,d=x*m,E=d-(d-m),M=m-E,U=A*M-(D-p*E-A*E-p*M),g=N-U,c=N-g,Ft[0]=N-(g+c)+(c-U),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B-D,c=B-g,Ft[1]=B-(g+c)+(c-D),I=R+g,c=I-R,Ft[2]=R-(I-c)+(g-c),Ft[3]=I,z=4):(se[0]=0,lt=1,Ft[0]=0,z=1),a!==0){const mt=_(lt,se,a,rt);u=ut(u,ft(_(T,Ae,a,j),j,_(mt,rt,2*H,Y),Y,ct),ct);const pt=_(z,Ft,a,L);u=ut(u,At(_(pt,L,2*H,j),j,_(pt,L,a,nt),nt,_(mt,rt,a,Y),Y,Dt,bt),bt),m!==0&&(u=ut(u,_(_(4,xt,a,L),L,m,j),j)),w!==0&&(u=ut(u,_(_(4,Mt,-a,L),L,w,j),j))}if(b!==0){const mt=_(lt,se,b,rt);u=ut(u,ft(_(O,Se,b,j),j,_(mt,rt,2*K,Y),Y,ct),ct);const pt=_(z,Ft,b,L);u=ut(u,At(_(pt,L,2*K,j),j,_(pt,L,b,nt),nt,_(mt,rt,b,Y),Y,Dt,bt),bt)}}if(f!==0||m!==0){if(y!==0||w!==0||a!==0||b!==0?(P=y*K,d=x*y,p=d-(d-y),A=y-p,d=x*K,E=d-(d-K),M=K-E,N=A*M-(P-p*E-A*E-p*M),D=W*b,d=x*W,p=d-(d-W),A=W-p,d=x*b,E=d-(d-b),M=b-E,U=A*M-(D-p*E-A*E-p*M),g=N+U,c=g-N,gt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,gt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,gt[2]=R-(I-c)+(g-c),gt[3]=I,v=-Q,et=-w,P=a*v,d=x*a,p=d-(d-a),A=a-p,d=x*v,E=d-(d-v),M=v-E,N=A*M-(P-p*E-A*E-p*M),D=H*et,d=x*H,p=d-(d-H),A=H-p,d=x*et,E=d-(d-et),M=et-E,U=A*M-(D-p*E-A*E-p*M),g=N+U,c=g-N,wt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,wt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,wt[2]=R-(I-c)+(g-c),wt[3]=I,it=ft(4,gt,4,wt,ie),P=y*b,d=x*y,p=d-(d-y),A=y-p,d=x*b,E=d-(d-b),M=b-E,N=A*M-(P-p*E-A*E-p*M),D=a*w,d=x*a,p=d-(d-a),A=a-p,d=x*w,E=d-(d-w),M=w-E,U=A*M-(D-p*E-A*E-p*M),g=N-U,c=N-g,Ut[0]=N-(g+c)+(c-U),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B-D,c=B-g,Ut[1]=B-(g+c)+(c-D),I=R+g,c=I-R,Ut[2]=R-(I-c)+(g-c),Ut[3]=I,q=4):(ie[0]=0,it=1,Ut[0]=0,q=1),f!==0){const mt=_(it,ie,f,rt);u=ut(u,ft(_(F,Ee,f,j),j,_(mt,rt,2*X,Y),Y,ct),ct);const pt=_(q,Ut,f,L);u=ut(u,At(_(pt,L,2*X,j),j,_(pt,L,f,nt),nt,_(mt,rt,f,Y),Y,Dt,bt),bt),w!==0&&(u=ut(u,_(_(4,Rt,f,L),L,w,j),j)),b!==0&&(u=ut(u,_(_(4,xt,-f,L),L,b,j),j))}if(m!==0){const mt=_(it,ie,m,rt);u=ut(u,ft(_(k,_e,m,j),j,_(mt,rt,2*$,Y),Y,ct),ct);const pt=_(q,Ut,m,L);u=ut(u,At(_(pt,L,2*$,j),j,_(pt,L,m,nt),nt,_(mt,rt,m,Y),Y,Dt,bt),bt)}}if(y!==0||w!==0){if(a!==0||b!==0||f!==0||m!==0?(P=a*$,d=x*a,p=d-(d-a),A=a-p,d=x*$,E=d-(d-$),M=$-E,N=A*M-(P-p*E-A*E-p*M),D=H*m,d=x*H,p=d-(d-H),A=H-p,d=x*m,E=d-(d-m),M=m-E,U=A*M-(D-p*E-A*E-p*M),g=N+U,c=g-N,gt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,gt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,gt[2]=R-(I-c)+(g-c),gt[3]=I,v=-K,et=-b,P=f*v,d=x*f,p=d-(d-f),A=f-p,d=x*v,E=d-(d-v),M=v-E,N=A*M-(P-p*E-A*E-p*M),D=X*et,d=x*X,p=d-(d-X),A=X-p,d=x*et,E=d-(d-et),M=et-E,U=A*M-(D-p*E-A*E-p*M),g=N+U,c=g-N,wt[0]=N-(g-c)+(U-c),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B+D,c=g-B,wt[1]=B-(g-c)+(D-c),I=R+g,c=I-R,wt[2]=R-(I-c)+(g-c),wt[3]=I,st=ft(4,gt,4,wt,re),P=a*m,d=x*a,p=d-(d-a),A=a-p,d=x*m,E=d-(d-m),M=m-E,N=A*M-(P-p*E-A*E-p*M),D=f*b,d=x*f,p=d-(d-f),A=f-p,d=x*b,E=d-(d-b),M=b-E,U=A*M-(D-p*E-A*E-p*M),g=N-U,c=N-g,jt[0]=N-(g+c)+(c-U),R=P+g,c=R-P,B=P-(R-c)+(g-c),g=B-D,c=B-g,jt[1]=B-(g+c)+(c-D),I=R+g,c=I-R,jt[2]=R-(I-c)+(g-c),jt[3]=I,C=4):(re[0]=0,st=1,jt[0]=0,C=1),y!==0){const mt=_(st,re,y,rt);u=ut(u,ft(_(J,Re,y,j),j,_(mt,rt,2*W,Y),Y,ct),ct);const pt=_(C,jt,y,L);u=ut(u,At(_(pt,L,2*W,j),j,_(pt,L,y,nt),nt,_(mt,rt,y,Y),Y,Dt,bt),bt),b!==0&&(u=ut(u,_(_(4,Mt,y,L),L,b,j),j)),m!==0&&(u=ut(u,_(_(4,Rt,-y,L),L,m,j),j))}if(w!==0){const mt=_(st,re,w,rt);u=ut(u,ft(_(tt,Me,w,j),j,_(mt,rt,2*Q,Y),Y,ct),ct);const pt=_(C,jt,w,L);u=ut(u,At(_(pt,L,2*Q,j),j,_(pt,L,w,nt),nt,_(mt,rt,w,Y),Y,Dt,bt),bt)}}return vt[u-1]}function br(e,t,n,r,s,i,o,l){const h=e-o,u=n-o,a=s-o,f=t-l,y=r-l,b=i-l,m=u*b,w=a*y,T=h*h+f*f,O=a*f,F=h*b,k=u*u+y*y,J=h*y,tt=u*f,st=a*a+b*b,lt=T*(m-w)+k*(O-F)+st*(J-tt),it=(Math.abs(m)+Math.abs(w))*T+(Math.abs(O)+Math.abs(F))*k+(Math.abs(J)+Math.abs(tt))*st,C=pr*it;return lt>C||-lt>C?lt:wr(e,t,n,r,s,i,o,l,it)}function Oe(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}function cn(e){return Math.abs(e)<=180?e:e-Ht(e)*360}function Ht(e){return e<0?-1:e>0?1:0}function Pe(e,t,n){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let r=e[0],s=e[1],i=t[0],o=t[1],l=n[0],h=n[1],u=(i-r)*(h-s)-(o-s)*(l-r);return u=Ht(u),u}function Vt(e,t){let n=Array.isArray(e)?e:e.toXY(),r=Array.isArray(t)?t:t.toXY(),s=Math.atan2(r[1]-n[1],r[0]-n[0]);return s=s*180/Math.PI,s<0&&(s+=360),s}function Ar(e,t,n,r=!0){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let s=e[0],i=e[1],o=t[0],l=t[1],h=n[0],u=n[1],a=Yt(s,i,o,l,h,u);return r&&(a=-a),a=Ht(a),a}function Sr(e,t,n,r){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),r=Array.isArray(r)?r:r.toXY();let s=e[0],i=e[1],o=t[0],l=t[1],h=n[0],u=n[1],a=r[0],f=r[1],y=br(s,i,o,l,h,u,a,f);return y=Ht(y),y}function Er(e,t,n,r){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),r=Array.isArray(r)?r:r.toXY();let s=e[0],i=e[1],o=t[0],l=t[1],h=n[0],u=n[1],a=r[0],f=r[1];const y=s-a,b=i-f,m=o-a,w=l-f,T=h-a,O=u-f,F=y*y+b*b,k=m*m+w*w,J=T*T+O*O;let tt=y*(w*J-k*O)-b*(m*J-k*T)+F*(m*O-w*T);return Ht(tt)}function _r(e){let t=[],n=e;for(;Array.isArray(n);)t.push(n.length),n=n[0];return t}function un(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?t.push(...un(r)):t.push(r)}return t}function fn(e,t){let n=[];for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?n.push(fn(s,t)):n.push(t[s])}return n}function Rr(e,t){return e.forEach((n,r)=>{e[r]=n.concat(t[r])}),e}function Mr(e,t){Array.isArray(t)||(t=[t]),t.forEach(r=>{if(r<0||r>=e[0].length)throw new Error("indexArray is illegal!")});let n=[];return e.forEach(r=>{let s=[];Array.isArray(t)?t.forEach(i=>{s.push(r[i])}):s.push(r[t]),n.push(s)}),n}function xr(e,t){if(t>e)throw new Error("num must be less than length!");const n=[];for(;n.length<t;){const r=Math.floor(Math.random()*e);n.includes(r)||n.push(r)}return n}const Or=Object.freeze(Object.defineProperty({__proto__:null,adjust_lon:cn,calculateArrayShape:_r,ccw:Pe,ccwRobust:Ar,concatEL2DArray:Rr,fillIndexArray:fn,flattenArray:un,getAngle:Vt,inCircle:Er,inCircleRobust:Sr,randomIndexArray:xr,round:Oe,sign:Ht,subColumnInEL2DArray:Mr},Symbol.toStringTag,{value:"Module"})),hn={a:6378137,b:63710088e-1,Name:"Normal Sphere ( r= 6371008.8 )"},dt=hn.a,Te={centimeters:dt*100,centimetres:dt*100,degrees:360/(2*Math.PI),feet:dt*3.28084,inches:dt*39.37,kilometers:dt/1e3,kilometres:dt/1e3,meters:dt,metres:dt,miles:dt/1609.344,millimeters:dt*1e3,millimetres:dt*1e3,nauticalmiles:dt/1852,radians:1,yards:dt*1.0936},Ce={centimeters:1*100,centimetres:1*100,degrees:360/(2*Math.PI)*1/dt,feet:1*3.28084,inches:1*39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1*1e3,millimetres:1*1e3,nauticalmiles:1/1852,radians:1/dt,yards:1*1.0936},Le={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Be(e,t="kilometers"){const n=Te[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Pr(e,t="kilometers"){const n=Te[t];if(!n)throw new Error(t+" units is invalid");return e/n}function Xt(e){return e%360*Math.PI/180}function Tr(e){return e%(2*Math.PI)*180/Math.PI}function dn(e,t){const n=Ce[t];if(!n)throw new Error(t+" units is invalid");return e/n}function oe(e,t){const n=Ce[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Cr(e,t,n){return oe(dn(e,t),n)}const Lr=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Le,degreesToRadians:Xt,earthRadius:dt,factors:Te,factors2:Ce,lengthToRadians:Pr,metersTo:oe,radiansToDegrees:Tr,radiansToLength:Be,toMeters:dn,unitTounit:Cr},Symbol.toStringTag,{value:"Module"}));function St(e,t="meters",n=6){const r=20037508342789244e-9,s=dt,i=Array.isArray(e)?e:e.to2DArray(),o=cn(i[0]);let l=Xt(o),h=Xt(i[1]);return l=Be(l,"meters"),h=s*Math.log(Math.tan(Math.PI*.25+.5*h)),l>r&&(l=r),l<-r&&(l=-r),h>r&&(h=r),h<-r&&(h=-r),l=Oe(oe(l,t),n),h=Oe(oe(h,t),n),[l,h]}function kt(e){var t=180/Math.PI,n=6378137;return[e[0]*t/n,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/n)))*t]}function Br(e,t="meters",n=6){if(e[0]instanceof Et){let r=[];for(let s=0;s<e.length;s++)r.push(St(e[s],t,n));return r}else{let r=[];for(let s=0;s<e.length;s++)r.push(St(e[s],t,n));return r}}function Nr(e,t="meters",n=6){let r=[],s=St([e[0],e[1]],t,n),i=St([e[2],e[3]],t,n);return r=[s[0],s[1],i[0],i[1]],r}function Dr(e,t="meters",n=6){let r=[],s=kt([e[0],e[1]]),i=kt([e[2],e[3]]);return r=[s[0],s[1],i[0],i[1]],r}const Ir=Object.freeze(Object.defineProperty({__proto__:null,MBR2Plane:Nr,convertToMercator:St,convertToMercators:Br,convertToWgs84:kt,plane2MBR:Dr},Symbol.toStringTag,{value:"Module"}));function mn(e){return{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2,w:e[2]-e[0],h:e[3]-e[1]}}function jr(e){return[e.x-e.w/2,e.y-e.h/2,e.x+e.w/2,e.y+e.h/2]}function pn(e){let t=e[0],n=e[1],r=e[2],s=e[3];return[[t,n],[t,s],[r,s],[r,n],[t,n]]}function Fr(e){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let i=0;i<e.length;i++){let o=e[i][0],l=e[i][1];t=Math.min(t,o),n=Math.min(n,l),r=Math.max(r,o),s=Math.max(s,l)}return[t,n,r,s]}function yn(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],o=e[0],l=e[1];return o>=n&&o<=s&&l>=r&&l<=i}class gn{constructor(t,n,...r){Z(this,"type");Z(this,"properties");Z(this,"MBR");Z(this,"coordinates");this.type=t,this.properties=r,this.coordinates=n,this.MBR=this.calculateMBR()}getPropertyArray(){return this.properties}getMBR(){return this.MBR}}class Et{constructor(t,n,r=0,...s){Z(this,"lon");Z(this,"lat");Z(this,"asl");Z(this,"type","Point");Z(this,"properties");this.lon=t,this.lat=n,this.asl=r,this.properties=s}toXY(t="meters"){return St(this,t)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat],properties:{...this.properties}}}to2DArray(){return[this.lon,this.lat]}to3DArray(){return[this.lon,this.lat,this.asl]}toString(){return`Point(${this.lon}, ${this.lat}, ${this.asl})`}getPropertyArray(){return this.properties}static isPoint(t){return t.type==="Point"}}class Ne extends gn{constructor(t,...n){if(t[0]instanceof Array){t=t;let r=[];for(let s=0;s<t.length;s++)r.push(new Et(t[s][0],t[s][1]));t=r}super("MultiPoint",t,...n)}getCorrinatesPropertyArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].getPropertyArray();t.push(r)}return t}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].to2DArray();t.push(r)}return t}toXYArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toXY();t.push(r)}return t}toGeoJSON(){return{type:"MultiPoint",coordinates:this.toArray(),properties:{...this.properties}}}calculateMBR(){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let i=0;i<this.coordinates.length;i++){let o=this.coordinates[i].to2DArray();t=Math.min(t,o[0]),n=Math.min(n,o[1]),r=Math.max(r,o[0]),s=Math.max(s,o[1])}return[t,n,r,s]}calculateCentroid(t){if(t){let n=0;for(let l=0;l<t.length;l++)n+=t[l];for(let l=0;l<t.length;l++)t[l]/=n;let r=0,s=0;for(let l=0;l<this.coordinates.length;l++){let h=this.coordinates[l].to2DArray();r+=h[0]*t[l],s+=h[1]*t[l]}let i=r,o=s;return new Et(i,o)}else{let n=0,r=0;for(let o=0;o<this.coordinates.length;o++){let l=this.coordinates[o].to2DArray();n+=l[0],r+=l[1]}let s=n/this.coordinates.length,i=r/this.coordinates.length;return new Et(s,i)}}deletePoint(t){this.coordinates.splice(t,1),this.MBR=this.calculateMBR()}addPoint(t){let n=Et.isPoint(t)?t:new Et(t[0],t[1]);this.coordinates.push(n),this.MBR=this.calculateMBR()}static isMultiPoint(t){return t.type==="MultiPoint"}}class De extends Ne{constructor(t,...n){super(t,...n),this.type="LineString"}static isLineString(t){return t.type==="LineString"}sortPoints(){let n=this.calculateCentroid().toXY();this.coordinates.sort((r,s)=>{let i=Vt(n,r.toXY()),o=Vt(n,s.toXY());return i<o?-1:i>o?1:0})}}class wn extends gn{constructor(t,...n){super("MultiLineString",t,...n)}calculateMBR(){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let i=0;i<this.coordinates.length;i++){let o=this.coordinates[i].getMBR();t=Math.min(t,o[0]),n=Math.min(n,o[1]),r=Math.max(r,o[2]),s=Math.max(s,o[3])}return[t,n,r,s]}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toArray();t.push(r)}return t}toGeoJSON(){return{type:"MultiLineString",coordinates:this.toArray(),properties:{...this.properties}}}static isMultiLineString(t){return t.type==="MultiLineString"}}class Ur extends wn{constructor(t,...n){super(t,...n),this.type="Polygon"}static isPolygon(t){return t.type==="Polygon"}}class kr{constructor(t,n,r){Z(this,"x");Z(this,"y");Z(this,"r");Z(this,"rSquared");this.x=t,this.y=n,this.r=r,this.rSquared=this.r*this.r}contains(t,n=0){let r=t[0],s=t[1];return Math.pow(r-this.x,2)+Math.pow(s-this.y,2)-this.rSquared<=n}intersects(t){let n=mn(t),r=Math.abs(n.x-this.x),s=Math.abs(n.y-this.y),i=this.r,o=n.w/2,l=n.h/2,h=Math.pow(r-o,2)+Math.pow(s-l,2);return r>i+o||s>i+l?!1:r<=o||s<=l?!0:h<=this.rSquared}}const qr=Object.freeze(Object.defineProperty({__proto__:null,Circle:kr,LineString:De,MultiLineString:wn,MultiPoint:Ne,Point:Et,Polygon:Ur,getPointsMBR:Fr,mbrToPolygon:pn,mbrToRectangle:mn,pointInMBR:yn,rectangleToMBR:jr},Symbol.toStringTag,{value:"Module"})),bn=hn.a;function zr(e,t,n="kilometers"){Array.isArray(e)&&(e=[...e]),Array.isArray(t)&&(t=[...t]);const r=Array.isArray(e)?e:e.to2DArray(),s=Array.isArray(t)?t:t.to2DArray();r.map((a,f)=>{r[f]=Xt(a)}),s.map((a,f)=>{s[f]=Xt(a)});const i=s[1]-r[1],o=s[0]-r[0],l=r[1],h=s[1],u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(l)*Math.cos(h)));return Be(u,n)}function vr(e,t="kilometers"){let n=De.isLineString(e)?e.toXYArray():e;if(n.length<3)return 0;Et.isPoint(n[0])&&(n=n,n.map((i,o)=>{n[o]=i.toXY()})),n=n;let r=0,s=n.length-1;for(let i=0;i<n.length;i++)r+=(n[s][0]+n[i][0])*(n[s][1]-n[i][1]),s=i;return r=r*Le[t]/2,Math.abs(r)}function Hr(e,t="kilometers"){let n=De.isLineString(e)?e.toArray():e;if(n.length<3)return 0;Et.isPoint(n[0])&&(n=n,n.map((o,l)=>{n[l]=o.to2DArray()})),n=n;let r=0,s=n.length,i=[];for(let o=0;o<s;o++){i.push([]);for(let l=0;l<2;l++){let h=Xt(n[o][l]);i[o].push(h)}}for(let o=0;o<s;o++){let l=(o+1)%s,h=(o+2)%s;r+=(i[o][0]-i[h][0])*Math.sin(i[l][1])}return r=r*bn*bn/2,r=r*Le[t],Math.abs(r)}const Xr=Object.freeze(Object.defineProperty({__proto__:null,PlanePolygonArea:vr,SpherePolygonArea:Hr,haversine:zr},Symbol.toStringTag,{value:"Module"}));function le(e,t){return e[0]*t[1]-t[0]*e[1]}function Wr(e,t){return e[0]*t[0]+e[1]*t[1]}function Ie(e,t,n,r,s=St,i=kt,o=!1){s&&(e=s(e),t=s(t),n=s(n),r=s(r));let l=[t[0]-e[0],t[1]-e[1]],h=[r[0]-n[0],r[1]-n[1]],u=le(l,h);if(u===0)return console.log("两条线段平行或共线"),null;let a=le([n[0]-e[0],n[1]-e[1]],h)/u,f=le([n[0]-e[0],n[1]-e[1]],l)/u;return!o&&(a<0||a>1||f<0||f>1)?(console.log("交点不在两条线段上"),null):i?i([e[0]+l[0]*a,e[1]+l[1]*a]):[e[0]+l[0]*a,e[1]+l[1]*a]}function je(e,t,n=!1){if(n){let r=St(e),s=t[0],i=t[1],o=t[2],l=t[3];return[s,i]=St([s,i]),[o,l]=St([o,l]),r[0]<s||r[0]>o||r[1]<i||r[1]>l}else{let r=t[0],s=t[1],i=t[2],o=t[3];return e[0]<r||e[0]>i||e[1]<s||e[1]>o}}function An(e,t){return!(e[0]>t[2]||e[2]<t[0]||e[1]>t[3]||e[3]<t[1])}function Sn(e,t){return En(e,pn(t))}function En(e,t){let n=e[e.length-1],r,s,i,o=t;for(let l in e){r=e[l];let h=o;o=[],s=h[h.length-1];for(let u in h){if(i=h[u],ae(i,n,r)){if(!ae(s,n,r)){let a=Ie(s,i,n,r,St,kt,!0);o.push(a)}o.push(i)}else if(ae(s,n,r)){let a=Ie(s,i,n,r,St,kt,!0);o.push(a)}s=i}n=r}return o}function $r(e,t){let n=!1;for(let r=0,s=t.length-1;r<t.length;s=r++)t[r][1]>e[1]!=t[s][1]>e[1]&&e[0]<(t[s][0]-t[r][0])*(e[1]-t[r][1])/(t[s][1]-t[r][1])+t[r][0]&&(n=!n);return n}function Jr(e){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let i=0;i<e.length;i++){let o=e[i];o[0]<t&&(t=o[0]),o[0]>r&&(r=o[0]),o[1]<n&&(n=o[1]),o[1]>s&&(s=o[1])}return[t,n,r,s]}function Gr(e,t){for(let n=0,r=e.length-1;n<e.length;r=n++)t(e[n],e[r])}function Yr(e,t){return(e-1+t)%t}function ae(e,t,n){return Pe(t,n,e)>0}const Vr=Object.freeze(Object.defineProperty({__proto__:null,MBRIntersectMBR:An,PointInsidePolygon:$r,PointOutsideMBR:je,calculateMBR:Jr,cross:le,cutPolygonByMBR:Sn,dot:Wr,intersection:Ie,intersectionPolygon:En,iterPolygonEdge:Gr,pointInEdge:ae,prePointInPolygon:Yr},Symbol.toStringTag,{value:"Module"})),_n=Math.pow(2,-52),ce=new Uint32Array(512);class qt{static from(t,n=Rn,r=Mn){const s=t.length,i=new Float64Array(s*2);for(let o=0;o<s;o++){const l=t[o];i[2*o]=n(l),i[2*o+1]=r(l)}return new qt(i)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:s,_hullHash:i}=this,o=t.length>>1;let l=1/0,h=1/0,u=-1/0,a=-1/0;for(let C=0;C<o;C++){const z=t[2*C],q=t[2*C+1];z<l&&(l=z),q<h&&(h=q),z>u&&(u=z),q>a&&(a=q),this._ids[C]=C}const f=(l+u)/2,y=(h+a)/2;let b,m,w;for(let C=0,z=1/0;C<o;C++){const q=Fe(f,y,t[2*C],t[2*C+1]);q<z&&(b=C,z=q)}const T=t[2*b],O=t[2*b+1];for(let C=0,z=1/0;C<o;C++){if(C===b)continue;const q=Fe(T,O,t[2*C],t[2*C+1]);q<z&&q>0&&(m=C,z=q)}let F=t[2*m],k=t[2*m+1],J=1/0;for(let C=0;C<o;C++){if(C===b||C===m)continue;const z=Zr(T,O,F,k,t[2*C],t[2*C+1]);z<J&&(w=C,J=z)}let tt=t[2*w],st=t[2*w+1];if(J===1/0){for(let q=0;q<o;q++)this._dists[q]=t[2*q]-t[0]||t[2*q+1]-t[1];Wt(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let z=0;for(let q=0,v=-1/0;q<o;q++){const et=this._ids[q],c=this._dists[et];c>v&&(C[z++]=et,v=c)}this.hull=C.subarray(0,z),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Yt(T,O,F,k,tt,st)<0){const C=m,z=F,q=k;m=w,F=tt,k=st,w=C,tt=z,st=q}const lt=this.circumcenter(T,O,F,k,tt,st);this._cx=lt.x,this._cy=lt.y;for(let C=0;C<o;C++)this._dists[C]=Fe(t[2*C],t[2*C+1],lt.x,lt.y);Wt(this._ids,this._dists,0,o-1),this._hullStart=b;let it=3;r[b]=n[w]=m,r[m]=n[b]=w,r[w]=n[m]=b,s[b]=0,s[m]=1,s[w]=2,i.fill(-1),i[this._hashKey(T,O)]=b,i[this._hashKey(F,k)]=m,i[this._hashKey(tt,st)]=w,this.trianglesLen=0,this._addTriangle(b,m,w,-1,-1,-1);for(let C=0,z,q;C<this._ids.length;C++){const v=this._ids[C],et=t[2*v],c=t[2*v+1];if(C>0&&Math.abs(et-z)<=_n&&Math.abs(c-q)<=_n||(z=et,q=c,v===b||v===m||v===w))continue;let d=0;for(let g=0,R=this._hashKey(et,c);g<this._hashSize&&(d=i[(R+g)%this._hashSize],!(d!==-1&&d!==r[d]));g++);d=n[d];let p=d,A;for(;A=r[p],Yt(et,c,t[2*p],t[2*p+1],t[2*A],t[2*A+1])>=0;)if(p=A,p===d){p=-1;break}if(p===-1)continue;let E=this._addTriangle(p,v,r[p],-1,-1,s[p]);s[v]=this._legalize(E+2),s[p]=E,it++;let M=r[p];for(;A=r[M],Yt(et,c,t[2*M],t[2*M+1],t[2*A],t[2*A+1])<0;)E=this._addTriangle(M,v,A,s[v],-1,s[M]),s[v]=this._legalize(E+2),r[M]=M,it--,M=A;if(p===d)for(;A=n[p],Yt(et,c,t[2*A],t[2*A+1],t[2*p],t[2*p+1])<0;)E=this._addTriangle(A,v,p,-1,s[p],s[A]),this._legalize(E+2),s[A]=E,r[p]=p,it--,p=A;this._hullStart=n[v]=p,r[p]=n[M]=v,r[v]=M,i[this._hashKey(et,c)]=v,i[this._hashKey(t[2*p],t[2*p+1])]=p}this.hull=new Uint32Array(it);for(let C=0,z=this._hullStart;C<it;C++)this.hull[C]=z,z=r[z];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Kr(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:s}=this;let i=0,o=0;for(;;){const l=r[t],h=t-t%3;if(o=h+(t+2)%3,l===-1){if(i===0)break;t=ce[--i];continue}const u=l-l%3,a=h+(t+1)%3,f=u+(l+2)%3,y=n[o],b=n[t],m=n[a],w=n[f];if(Qr(s[2*y],s[2*y+1],s[2*b],s[2*b+1],s[2*m],s[2*m+1],s[2*w],s[2*w+1])){n[t]=w,n[l]=y;const O=r[f];if(O===-1){let k=this._hullStart;do{if(this._hullTri[k]===f){this._hullTri[k]=t;break}k=this._hullPrev[k]}while(k!==this._hullStart)}this._link(t,O),this._link(l,r[o]),this._link(o,f);const F=u+(l+1)%3;i<ce.length&&(ce[i++]=F)}else{if(i===0)break;t=ce[--i]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,s,i,o){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=r,this._link(l,s),this._link(l+1,i),this._link(l+2,o),this.trianglesLen+=3,l}getTriangles(){return this.triangles}getHalfedges(){return this.halfedges}getHull(){return this.hull}getPoints(){let t=[];for(let n=0;n<this.coords.length;n+=2)t.push([this.coords[n],this.coords[n+1]]);return t}getTriangleIndices(){let t=[];for(let n=0;n<this.triangles.length;n+=3)t.push([this.triangles[n],this.triangles[n+1],this.triangles[n+2]]);return t}static circumRadius(t,n,r){const s=n[0]-t[0],i=n[1]-t[1],o=r[0]-t[0],l=r[1]-t[1],h=s*s+i*i,u=o*o+l*l,a=.5/(s*l-i*o),f=(l*h-i*u)*a,y=(s*u-o*h)*a;return f*f+y*y}circumcenter(t,n,r,s,i,o){const l=r-t,h=s-n,u=i-t,a=o-n,f=l*l+h*h,y=u*u+a*a,b=.5/(l*a-h*u),m=t+(a*f-h*y)*b,w=n+(l*y-u*f)*b;return{x:m,y:w}}}function Kr(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Fe(e,t,n,r){const s=e-n,i=t-r;return s*s+i*i}function Qr(e,t,n,r,s,i,o,l){const h=e-o,u=t-l,a=n-o,f=r-l,y=s-o,b=i-l,m=h*h+u*u,w=a*a+f*f,T=y*y+b*b;return h*(f*T-w*b)-u*(a*T-w*y)+m*(a*b-f*y)<0}function Zr(e,t,n,r,s,i){const o=n-e,l=r-t,h=s-e,u=i-t,a=o*o+l*l,f=h*h+u*u,y=.5/(o*u-l*h),b=(u*a-l*f)*y,m=(o*f-h*a)*y;return b*b+m*m}function Wt(e,t,n,r){if(r-n<=20)for(let s=n+1;s<=r;s++){const i=e[s],o=t[i];let l=s-1;for(;l>=n&&t[e[l]]>o;)e[l+1]=e[l--];e[l+1]=i}else{const s=n+r>>1;let i=n+1,o=r;Kt(e,s,i),t[e[n]]>t[e[r]]&&Kt(e,n,r),t[e[i]]>t[e[r]]&&Kt(e,i,r),t[e[n]]>t[e[i]]&&Kt(e,n,i);const l=e[i],h=t[l];for(;;){do i++;while(t[e[i]]<h);do o--;while(t[e[o]]>h);if(o<i)break;Kt(e,i,o)}e[n+1]=e[o],e[o]=l,r-i+1>=o-n?(Wt(e,t,i,r),Wt(e,t,n,o-1)):(Wt(e,t,n,o-1),Wt(e,t,i,r))}}function Kt(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Rn(e){return e[0]}function Mn(e){return e[1]}function ts(e){return[3*e,3*e+1,3*e+2]}function es(e,t){return ts(t).map(n=>e.triangles[n])}function ns(e){return Math.floor(e/3)}function rs(e,t,n){const r=e[0]*e[0]+e[1]*e[1],s=t[0]*t[0]+t[1]*t[1],i=n[0]*n[0]+n[1]*n[1],o=2*(e[0]*(t[1]-n[1])+t[0]*(n[1]-e[1])+n[0]*(e[1]-t[1]));return[1/o*(r*(t[1]-n[1])+s*(n[1]-e[1])+i*(e[1]-t[1])),1/o*(r*(n[0]-t[0])+s*(e[0]-n[0])+i*(t[0]-e[0]))]}function xn(e,t,n,r=kt){const s=es(t,n).map(o=>e[o]);let i=rs(s[0],s[1],s[2]);return r&&(i=r(i)),i}function On(e){return e%3===2?e-2:e+1}function ss(e,t){const n=[];let r=t;do{n.push(r);const s=On(r);r=e.halfedges[s]}while(r!==-1&&r!==t);return n}function Ue(e,t,n){const r=new Set;for(let s=0;s<t.triangles.length;s++){const i=t.triangles[On(s)];if(!r.has(i)){r.add(i);const h=ss(t,s).map(ns).map(u=>xn(e,t,u));n(i,h)}}}class is{constructor(t,n=Rn,r=Mn){Z(this,"delaunay");Z(this,"points");t instanceof qt?(this.delaunay=t,this.points=t.getPoints()):(this.points=t,this.delaunay=qt.from(t,n,r))}getVoronoi(){const{points:t,delaunay:n}=this,r=new Map;return Ue(t,n,(s,i)=>r.set(s,i)),r}cutVoronoiByMBR(t){const{points:n,delaunay:r}=this,s=new Map;return Ue(n,r,(i,o)=>{this.isInsideMBR(o,t)||(o=Sn(o,t)),s.set(i,o)}),s}robustVoronoi(t){const{points:n,delaunay:r}=this,s=new Map;return Ue(n,r,(i,o)=>{this.isInsideMBR(o,t)&&s.set(i,o)}),s}isInsideMBR(t,n){const[r,s,i,o]=n;for(let l=0;l<t.length;l++){const[h,u]=t[l];if(h<r||h>i||u<s||u>o)return!1}return!0}}function os(e,t){const n=new Map;for(let[r,s]of e)t.has(r)?n.set(r,t.get(r)):n.set(r,s);return n}const ls=Object.freeze(Object.defineProperty({__proto__:null,Delaunator:qt,Voronoi:is,complateMap:os,triangleCenter:xn},Symbol.toStringTag,{value:"Module"}));function as(e){const t=e.map((i,o)=>[...i.toXY(),o]);let n=t[0];for(let i=1;i<t.length;i++)t[i][1]<n[1]&&(n=t[i]);t.sort((i,o)=>{let l=Vt([n[0],n[1]],[i[0],i[1]]),h=Vt([n[0],n[1]],[o[0],o[1]]);if(l<h)return-1;if(l>h)return 1;{let u=Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2),a=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2);return u<a?-1:1}});let r=[];r.push(t[0]),r.push(t[1]);for(let i=2;i<t.length;i++){for(;r.length>1&&Pe([r[r.length-2][0],r[r.length-2][1]],[r[r.length-1][0],r[r.length-1][1]],[t[i][0],t[i][1]])<=0;)r.pop();r.push(t[i])}let s=[];for(let i=0;i<r.length;i++){let o=r[i][2];s.push(e[o])}return s}function cs(e,t){let n=e.map(o=>o.toXY());return qt.from(n).getTriangleIndices().filter(o=>{let l=[n[o[0]],n[o[1]],n[o[2]]];return qt.circumRadius(l[0],l[1],l[2])*t<1})}const us=Object.freeze(Object.defineProperty({__proto__:null,alphaComplex:cs,convexHull:as},Symbol.toStringTag,{value:"Module"}));function Pn(e,t){return function(){return e.apply(t,arguments)}}const{toString:fs}=Object.prototype,{getPrototypeOf:ke}=Object,ue=(e=>t=>{const n=fs.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ot=e=>(e=e.toLowerCase(),t=>ue(t)===e),fe=e=>t=>typeof t===e,{isArray:$t}=Array,Qt=fe("undefined");function hs(e){return e!==null&&!Qt(e)&&e.constructor!==null&&!Qt(e.constructor)&&_t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Tn=Ot("ArrayBuffer");function ds(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Tn(e.buffer),t}const ms=fe("string"),_t=fe("function"),Cn=fe("number"),he=e=>e!==null&&typeof e=="object",ps=e=>e===!0||e===!1,de=e=>{if(ue(e)!=="object")return!1;const t=ke(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ys=Ot("Date"),gs=Ot("File"),ws=Ot("Blob"),bs=Ot("FileList"),As=e=>he(e)&&_t(e.pipe),Ss=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_t(e.append)&&((t=ue(e))==="formdata"||t==="object"&&_t(e.toString)&&e.toString()==="[object FormData]"))},Es=Ot("URLSearchParams"),_s=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zt(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),$t(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(r=0;r<o;r++)l=i[r],t.call(null,e[l],l,e)}}function Ln(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Bn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Nn=e=>!Qt(e)&&e!==Bn;function qe(){const{caseless:e}=Nn(this)&&this||{},t={},n=(r,s)=>{const i=e&&Ln(t,s)||s;de(t[i])&&de(r)?t[i]=qe(t[i],r):de(r)?t[i]=qe({},r):$t(r)?t[i]=r.slice():t[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Zt(arguments[r],n);return t}const Rs=(e,t,n,{allOwnKeys:r}={})=>(Zt(t,(s,i)=>{n&&_t(s)?e[i]=Pn(s,n):e[i]=s},{allOwnKeys:r}),e),Ms=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xs=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Os=(e,t,n,r)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!r||r(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&ke(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Ps=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Ts=e=>{if(!e)return null;if($t(e))return e;let t=e.length;if(!Cn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Cs=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ke(Uint8Array)),Ls=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Bs=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Ns=Ot("HTMLFormElement"),Ds=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Dn=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Is=Ot("RegExp"),In=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Zt(n,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(r[i]=o||s)}),Object.defineProperties(e,r)},js=e=>{In(e,(t,n)=>{if(_t(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(_t(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Fs=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return $t(e)?r(e):r(String(e).split(t)),n},Us=()=>{},ks=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ze="abcdefghijklmnopqrstuvwxyz",jn="0123456789",Fn={DIGIT:jn,ALPHA:ze,ALPHA_DIGIT:ze+ze.toUpperCase()+jn},qs=(e=16,t=Fn.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function zs(e){return!!(e&&_t(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const vs=e=>{const t=new Array(10),n=(r,s)=>{if(he(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const i=$t(r)?[]:{};return Zt(r,(o,l)=>{const h=n(o,s+1);!Qt(h)&&(i[l]=h)}),t[s]=void 0,i}}return r};return n(e,0)},Hs=Ot("AsyncFunction"),S={isArray:$t,isArrayBuffer:Tn,isBuffer:hs,isFormData:Ss,isArrayBufferView:ds,isString:ms,isNumber:Cn,isBoolean:ps,isObject:he,isPlainObject:de,isUndefined:Qt,isDate:ys,isFile:gs,isBlob:ws,isRegExp:Is,isFunction:_t,isStream:As,isURLSearchParams:Es,isTypedArray:Cs,isFileList:bs,forEach:Zt,merge:qe,extend:Rs,trim:_s,stripBOM:Ms,inherits:xs,toFlatObject:Os,kindOf:ue,kindOfTest:Ot,endsWith:Ps,toArray:Ts,forEachEntry:Ls,matchAll:Bs,isHTMLForm:Ns,hasOwnProperty:Dn,hasOwnProp:Dn,reduceDescriptors:In,freezeMethods:js,toObjectSet:Fs,toCamelCase:Ds,noop:Us,toFiniteNumber:ks,findKey:Ln,global:Bn,isContextDefined:Nn,ALPHABET:Fn,generateString:qs,isSpecCompliantForm:zs,toJSONObject:vs,isAsyncFn:Hs,isThenable:e=>e&&(he(e)||_t(e))&&_t(e.then)&&_t(e.catch)};function V(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}S.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Un=V.prototype,kn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{kn[e]={value:e}}),Object.defineProperties(V,kn),Object.defineProperty(Un,"isAxiosError",{value:!0}),V.from=(e,t,n,r,s,i)=>{const o=Object.create(Un);return S.toFlatObject(e,o,function(h){return h!==Error.prototype},l=>l!=="isAxiosError"),V.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const Xs=null;function ve(e){return S.isPlainObject(e)||S.isArray(e)}function qn(e){return S.endsWith(e,"[]")?e.slice(0,-2):e}function zn(e,t,n){return e?e.concat(t).map(function(s,i){return s=qn(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function Ws(e){return S.isArray(e)&&!e.some(ve)}const $s=S.toFlatObject(S,{},null,function(t){return/^is[A-Z]/.test(t)});function me(e,t,n){if(!S.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=S.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,T){return!S.isUndefined(T[w])});const r=n.metaTokens,s=n.visitor||a,i=n.dots,o=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(t);if(!S.isFunction(s))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(S.isDate(m))return m.toISOString();if(!h&&S.isBlob(m))throw new V("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(m)||S.isTypedArray(m)?h&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function a(m,w,T){let O=m;if(m&&!T&&typeof m=="object"){if(S.endsWith(w,"{}"))w=r?w:w.slice(0,-2),m=JSON.stringify(m);else if(S.isArray(m)&&Ws(m)||(S.isFileList(m)||S.endsWith(w,"[]"))&&(O=S.toArray(m)))return w=qn(w),O.forEach(function(k,J){!(S.isUndefined(k)||k===null)&&t.append(o===!0?zn([w],J,i):o===null?w:w+"[]",u(k))}),!1}return ve(m)?!0:(t.append(zn(T,w,i),u(m)),!1)}const f=[],y=Object.assign($s,{defaultVisitor:a,convertValue:u,isVisitable:ve});function b(m,w){if(!S.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(m),S.forEach(m,function(O,F){(!(S.isUndefined(O)||O===null)&&s.call(t,O,S.isString(F)?F.trim():F,w,y))===!0&&b(O,w?w.concat(F):[F])}),f.pop()}}if(!S.isObject(e))throw new TypeError("data must be an object");return b(e),t}function vn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function He(e,t){this._pairs=[],e&&me(e,this,t)}const Hn=He.prototype;Hn.append=function(t,n){this._pairs.push([t,n])},Hn.toString=function(t){const n=t?function(r){return t.call(this,r,vn)}:vn;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Js(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xn(e,t,n){if(!t)return e;const r=n&&n.encode||Js,s=n&&n.serialize;let i;if(s?i=s(t,n):i=S.isURLSearchParams(t)?t.toString():new He(t,n).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Gs{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){S.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Wn=Gs,$n={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ys=typeof URLSearchParams<"u"?URLSearchParams:He,Vs=typeof FormData<"u"?FormData:null,Ks=typeof Blob<"u"?Blob:null,Qs=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Zs=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Pt={isBrowser:!0,classes:{URLSearchParams:Ys,FormData:Vs,Blob:Ks},isStandardBrowserEnv:Qs,isStandardBrowserWebWorkerEnv:Zs,protocols:["http","https","file","blob","url","data"]};function ti(e,t){return me(e,new Pt.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Pt.isNode&&S.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function ei(e){return S.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ni(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function Jn(e){function t(n,r,s,i){let o=n[i++];const l=Number.isFinite(+o),h=i>=n.length;return o=!o&&S.isArray(s)?s.length:o,h?(S.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!l):((!s[o]||!S.isObject(s[o]))&&(s[o]=[]),t(n,r,s[o],i)&&S.isArray(s[o])&&(s[o]=ni(s[o])),!l)}if(S.isFormData(e)&&S.isFunction(e.entries)){const n={};return S.forEachEntry(e,(r,s)=>{t(ei(r),s,n,0)}),n}return null}function ri(e,t,n){if(S.isString(e))try{return(t||JSON.parse)(e),S.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Xe={transitional:$n,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=S.isObject(t);if(i&&S.isHTMLForm(t)&&(t=new FormData(t)),S.isFormData(t))return s&&s?JSON.stringify(Jn(t)):t;if(S.isArrayBuffer(t)||S.isBuffer(t)||S.isStream(t)||S.isFile(t)||S.isBlob(t))return t;if(S.isArrayBufferView(t))return t.buffer;if(S.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ti(t,this.formSerializer).toString();if((l=S.isFileList(t))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return me(l?{"files[]":t}:t,h&&new h,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),ri(t)):t}],transformResponse:[function(t){const n=this.transitional||Xe.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&S.isString(t)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?V.from(l,V.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pt.classes.FormData,Blob:Pt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],e=>{Xe.headers[e]={}});const We=Xe,si=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ii=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||t[n]&&si[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Gn=Symbol("internals");function te(e){return e&&String(e).trim().toLowerCase()}function pe(e){return e===!1||e==null?e:S.isArray(e)?e.map(pe):String(e)}function oi(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const li=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function $e(e,t,n,r,s){if(S.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!S.isString(t)){if(S.isString(r))return t.indexOf(r)!==-1;if(S.isRegExp(r))return r.test(t)}}function ai(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function ci(e,t){const n=S.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,o){return this[r].call(this,t,s,i,o)},configurable:!0})})}class ye{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(l,h,u){const a=te(h);if(!a)throw new Error("header name must be a non-empty string");const f=S.findKey(s,a);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||h]=pe(l))}const o=(l,h)=>S.forEach(l,(u,a)=>i(u,a,h));return S.isPlainObject(t)||t instanceof this.constructor?o(t,n):S.isString(t)&&(t=t.trim())&&!li(t)?o(ii(t),n):t!=null&&i(n,t,r),this}get(t,n){if(t=te(t),t){const r=S.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return oi(s);if(S.isFunction(n))return n.call(this,s,r);if(S.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=te(t),t){const r=S.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||$e(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(o){if(o=te(o),o){const l=S.findKey(r,o);l&&(!n||$e(r,r[l],l,n))&&(delete r[l],s=!0)}}return S.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||$e(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return S.forEach(this,(s,i)=>{const o=S.findKey(r,i);if(o){n[o]=pe(s),delete n[i];return}const l=t?ai(i):String(i).trim();l!==i&&delete n[i],n[l]=pe(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return S.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&S.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Gn]=this[Gn]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=te(o);r[l]||(ci(s,o),r[l]=!0)}return S.isArray(t)?t.forEach(i):i(t),this}}ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),S.reduceDescriptors(ye.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}}),S.freezeMethods(ye);const Tt=ye;function Je(e,t){const n=this||We,r=t||n,s=Tt.from(r.headers);let i=r.data;return S.forEach(e,function(l){i=l.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Yn(e){return!!(e&&e.__CANCEL__)}function ee(e,t,n){V.call(this,e??"canceled",V.ERR_CANCELED,t,n),this.name="CanceledError"}S.inherits(ee,V,{__CANCEL__:!0});function ui(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new V("Request failed with status code "+n.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const fi=Pt.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,l){const h=[];h.push(n+"="+encodeURIComponent(r)),S.isNumber(s)&&h.push("expires="+new Date(s).toGMTString()),S.isString(i)&&h.push("path="+i),S.isString(o)&&h.push("domain="+o),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function hi(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function di(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Vn(e,t){return e&&!hi(t)?di(e,t):t}const mi=Pt.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const l=S.isString(o)?s(o):o;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function pi(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function yi(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(h){const u=Date.now(),a=r[i];o||(o=u),n[s]=h,r[s]=u;let f=i,y=0;for(;f!==s;)y+=n[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-o<t)return;const b=a&&u-a;return b?Math.round(y*1e3/b):void 0}}function Kn(e,t){let n=0;const r=yi(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,l=i-n,h=r(l),u=i<=o;n=i;const a={loaded:i,total:o,progress:o?i/o:void 0,bytes:l,rate:h||void 0,estimated:h&&o&&u?(o-i)/h:void 0,event:s};a[t?"download":"upload"]=!0,e(a)}}const Ge={http:Xs,xhr:typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,r){let s=e.data;const i=Tt.from(e.headers).normalize(),o=e.responseType;let l;function h(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}let u;S.isFormData(s)&&(Pt.isStandardBrowserEnv||Pt.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?S.isString(u=i.getContentType())&&i.setContentType(u.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let a=new XMLHttpRequest;if(e.auth){const m=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+w))}const f=Vn(e.baseURL,e.url);a.open(e.method.toUpperCase(),Xn(f,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function y(){if(!a)return;const m=Tt.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:m,config:e,request:a};ui(function(F){n(F),h()},function(F){r(F),h()},T),a=null}if("onloadend"in a?a.onloadend=y:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(y)},a.onabort=function(){a&&(r(new V("Request aborted",V.ECONNABORTED,e,a)),a=null)},a.onerror=function(){r(new V("Network Error",V.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let w=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const T=e.transitional||$n;e.timeoutErrorMessage&&(w=e.timeoutErrorMessage),r(new V(w,T.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,a)),a=null},Pt.isStandardBrowserEnv){const m=mi(f)&&e.xsrfCookieName&&fi.read(e.xsrfCookieName);m&&i.set(e.xsrfHeaderName,m)}s===void 0&&i.setContentType(null),"setRequestHeader"in a&&S.forEach(i.toJSON(),function(w,T){a.setRequestHeader(T,w)}),S.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),o&&o!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",Kn(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",Kn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=m=>{a&&(r(!m||m.type?new ee(null,e,a):m),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const b=pi(f);if(b&&Pt.protocols.indexOf(b)===-1){r(new V("Unsupported protocol "+b+":",V.ERR_BAD_REQUEST,e));return}a.send(s||null)})}};S.forEach(Ge,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qn=e=>`- ${e}`,gi=e=>S.isFunction(e)||e===null||e===!1,Zn={getAdapter:e=>{e=S.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){n=e[i];let o;if(r=n,!gi(n)&&(r=Ge[(o=String(n)).toLowerCase()],r===void 0))throw new V(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([l,h])=>`adapter ${l} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(Qn).join(`
`):" "+Qn(i[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Ge};function Ye(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ee(null,e)}function tr(e){return Ye(e),e.headers=Tt.from(e.headers),e.data=Je.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Zn.getAdapter(e.adapter||We.adapter)(e).then(function(r){return Ye(e),r.data=Je.call(e,e.transformResponse,r),r.headers=Tt.from(r.headers),r},function(r){return Yn(r)||(Ye(e),r&&r.response&&(r.response.data=Je.call(e,e.transformResponse,r.response),r.response.headers=Tt.from(r.response.headers))),Promise.reject(r)})}const er=e=>e instanceof Tt?e.toJSON():e;function Jt(e,t){t=t||{};const n={};function r(u,a,f){return S.isPlainObject(u)&&S.isPlainObject(a)?S.merge.call({caseless:f},u,a):S.isPlainObject(a)?S.merge({},a):S.isArray(a)?a.slice():a}function s(u,a,f){if(S.isUndefined(a)){if(!S.isUndefined(u))return r(void 0,u,f)}else return r(u,a,f)}function i(u,a){if(!S.isUndefined(a))return r(void 0,a)}function o(u,a){if(S.isUndefined(a)){if(!S.isUndefined(u))return r(void 0,u)}else return r(void 0,a)}function l(u,a,f){if(f in t)return r(u,a);if(f in e)return r(void 0,u)}const h={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,a)=>s(er(u),er(a),!0)};return S.forEach(Object.keys(Object.assign({},e,t)),function(a){const f=h[a]||s,y=f(e[a],t[a],a);S.isUndefined(y)&&f!==l||(n[a]=y)}),n}const nr="1.6.0",Ve={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ve[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const rr={};Ve.transitional=function(t,n,r){function s(i,o){return"[Axios v"+nr+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(t===!1)throw new V(s(o," has been removed"+(n?" in "+n:"")),V.ERR_DEPRECATED);return n&&!rr[o]&&(rr[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};function wi(e,t,n){if(typeof e!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const l=e[i],h=l===void 0||o(l,i,e);if(h!==!0)throw new V("option "+i+" must be "+h,V.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new V("Unknown option "+i,V.ERR_BAD_OPTION)}}const Ke={assertOptions:wi,validators:Ve},It=Ke.validators;class ge{constructor(t){this.defaults=t,this.interceptors={request:new Wn,response:new Wn}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Jt(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Ke.assertOptions(r,{silentJSONParsing:It.transitional(It.boolean),forcedJSONParsing:It.transitional(It.boolean),clarifyTimeoutError:It.transitional(It.boolean)},!1),s!=null&&(S.isFunction(s)?n.paramsSerializer={serialize:s}:Ke.assertOptions(s,{encode:It.function,serialize:It.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&S.merge(i.common,i[n.method]);i&&S.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=Tt.concat(o,i);const l=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(h=h&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let a,f=0,y;if(!h){const m=[tr.bind(this),void 0];for(m.unshift.apply(m,l),m.push.apply(m,u),y=m.length,a=Promise.resolve(n);f<y;)a=a.then(m[f++],m[f++]);return a}y=l.length;let b=n;for(f=0;f<y;){const m=l[f++],w=l[f++];try{b=m(b)}catch(T){w.call(this,T);break}}try{a=tr.call(this,b)}catch(m){return Promise.reject(m)}for(f=0,y=u.length;f<y;)a=a.then(u[f++],u[f++]);return a}getUri(t){t=Jt(this.defaults,t);const n=Vn(t.baseURL,t.url);return Xn(n,t.params,t.paramsSerializer)}}S.forEach(["delete","get","head","options"],function(t){ge.prototype[t]=function(n,r){return this.request(Jt(r||{},{method:t,url:n,data:(r||{}).data}))}}),S.forEach(["post","put","patch"],function(t){function n(r){return function(i,o,l){return this.request(Jt(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ge.prototype[t]=n(),ge.prototype[t+"Form"]=n(!0)});const we=ge;class Qe{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,l){r.reason||(r.reason=new ee(i,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Qe(function(s){t=s}),cancel:t}}}const bi=Qe;function Ai(e){return function(n){return e.apply(null,n)}}function Si(e){return S.isObject(e)&&e.isAxiosError===!0}const Ze={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ze).forEach(([e,t])=>{Ze[t]=e});const Ei=Ze;function sr(e){const t=new we(e),n=Pn(we.prototype.request,t);return S.extend(n,we.prototype,t,{allOwnKeys:!0}),S.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return sr(Jt(e,s))},n}const ht=sr(We);ht.Axios=we,ht.CanceledError=ee,ht.CancelToken=bi,ht.isCancel=Yn,ht.VERSION=nr,ht.toFormData=me,ht.AxiosError=V,ht.Cancel=ht.CanceledError,ht.all=function(t){return Promise.all(t)},ht.spread=Ai,ht.isAxiosError=Si,ht.mergeConfig=Jt,ht.AxiosHeaders=Tt,ht.formToJSON=e=>Jn(S.isHTMLForm(e)?new FormData(e):e),ht.getAdapter=Zn.getAdapter,ht.HttpStatusCode=Ei,ht.default=ht;const _i=ht;function ir(e){if(e.length===2)return new Et(e[0],e[1]);if(e.length===3)return new Et(e[0],e[1],e[2]);if(e.length>4)return new Et(e[0],e[1],e[2],...e.slice(3));throw new Error("Error: the length of array is not correct")}function or(e){let t=[];for(let n=0;n<e.length;n++){if(e[n]==null)continue;let r=ir(e[n]);t.push(r)}return t}function Ri(e){let t=or(e);return new Ne(t)}function Mi(e){return _i.get(e)}function xi(e){let t=[];return e.forEach(n=>{t.push(n.geometry.coordinates)}),t}function Oi(e){let t=e,n=[];for(let r=0;r<t.length;r++){let s;for(let i=0;i<t[r].length;i++)s=t[r][i];n.push(s)}return n}const Pi=Object.freeze(Object.defineProperty({__proto__:null,GeoFeatures2Arr:xi,GeoPolygons2SimpleArr:Oi,createMultiPointFromArr:Ri,createPointListFromArr:or,cretePointFromArr:ir,readDataFromGeoJSON:Mi},Symbol.toStringTag,{value:"Module"}));class Ti{constructor(t,n){Z(this,"MBR");Z(this,"data");Z(this,"shape");Z(this,"rows");Z(this,"cols");Z(this,"bands");this.MBR=t,this.data=n,this.shape=[n.length,n[0].length,n[0][0].length],[this.bands,this.rows,this.cols]=this.shape}getShape(){return[this.data.length,this.data[0].length,this.data[0][0].length]}getSubGrid(t,n=[0]){let r=t[0],s=t[1],i=t[2],o=t[3],l=[];for(let h of n){let u=[];for(let a=r;a<=i;a++){let f=[];for(let y=s;y<=o;y++)f.push(this.data[h][a][y]);u.push(f)}l.push(u)}return l}ConvertToGridMBR(t){let n=t[0],r=t[1],s=t[2],i=t[3],o=this.getGridCoord([n,r]),l=this.getGridCoord([s,i]);if(o===null||l===null)return null;{let h=o[0],u=o[1],a=l[0],f=l[1];return[h,u,a,f]}}getGridCoord(t){if(je(t,this.MBR))return null;{let n=t[0],r=t[1],s=this.MBR[0],i=this.MBR[1],o=this.MBR[2],l=this.MBR[3],h=Math.floor((r-i)/(l-i)*this.rows),u=Math.floor((n-s)/(o-s)*this.cols);return[h,u]}}getCoordByGridCoord(t){let n=t[0],r=t[1],s=this.MBR[0],i=this.MBR[1],o=this.MBR[2],l=this.MBR[3],h=(r+.5)/this.cols*(o-s)+s,u=(n+.5)/this.rows*(l-i)+i;return[h,u]}getBandStatistics(t){let n=this.data[t],r=n[0][0],s=n[0][0],i=0;for(let l=0;l<this.rows;l++)for(let h=0;h<this.cols;h++){let u=n[l][h];u>r&&(r=u),u<s&&(s=u),i+=u}let o=i/(this.rows*this.cols);return{max:r,min:s,mean:o}}}const Ci=Object.freeze(Object.defineProperty({__proto__:null,Grid:Ti},Symbol.toStringTag,{value:"Module"}));class Gt{constructor(t,n,r=10){Z(this,"capacity");Z(this,"boundary");Z(this,"points");Z(this,"northWest");Z(this,"northEast");Z(this,"southWest");Z(this,"southEast");Z(this,"isDivided");Z(this,"depth");Z(this,"maxDepth",10);this.capacity=n,this.boundary=t,this.points=[],this.isDivided=!1,this.northWest=null,this.northEast=null,this.southWest=null,this.southEast=null,this.depth=0,this.maxDepth=r}insert(t){return je(t,this.boundary)?!1:this.points.length<this.capacity&&this.depth<this.maxDepth?(this.points.push(t),!0):(this.isDivided||this.subdivide(),this.northEast.insert(t),this.northWest.insert(t),this.southEast.insert(t),this.southWest.insert(t),!0)}get pointsList(){return this.points.length===0?null:this.points}subdivide(){let t=this.boundary[0],n=this.boundary[1],r=this.boundary[2]-t,s=this.boundary[3]-n,i=new Gt([t,n+s/2,t+r/2,n+s],this.capacity),o=new Gt([t+r/2,n+s/2,t+r,n+s],this.capacity),l=new Gt([t,n,t+r/2,n+s/2],this.capacity),h=new Gt([t+r/2,n,t+r,n+s/2],this.capacity);this.northWest=i,this.northEast=o,this.southWest=l,this.southEast=h,this.isDivided=!0,this.depth++}queryRange(t){let n=[];if(!An(this.boundary,t))return n;for(let r=0;r<this.points.length;r++)yn(this.points[r],t)&&n.push(this.points[r]);return this.northWest===null||(n.push(...this.northWest.queryRange(t)),n.push(...this.northEast.queryRange(t)),n.push(...this.southWest.queryRange(t)),n.push(...this.southEast.queryRange(t))),n}queryCircle(t,n=[]){let r=[];if(t.intersects(this.boundary))n.push(this.boundary);else return r;for(let s=0;s<this.points.length;s++)t.contains(this.points[s],45e8)&&r.push(this.points[s]);return this.northWest===null||(r.push(...this.northWest.queryCircle(t,n)),r.push(...this.northEast.queryCircle(t,n)),r.push(...this.southWest.queryCircle(t,n)),r.push(...this.southEast.queryCircle(t,n))),r}}const Li=Object.freeze(Object.defineProperty({__proto__:null,QuadTree:Gt},Symbol.toStringTag,{value:"Module"})),Bi=Math.E;function tn(e,t,n){return(t-e)*(3-n*2)*n*n+e}function Ni(e,t){let s=e,i=t;s*=3284157443,i^=s<<128|s>>256-128,i*=1911520717,s^=i<<128|i>>256-128,s*=2048419325;const o=s*(3.14159265/~(-1>>>1));return{x:Math.cos(o),y:Math.sin(o)}}function be(e,t,n,r){const s=Ni(e,t),i=n-e,o=r-t;return i*s.x+o*s.y}function Di(e,t){const n=Math.floor(e),r=n+1,s=Math.floor(t),i=s+1,o=e-n,l=t-s,h=be(n,s,e,t),u=be(r,s,e,t),a=tn(h,u,o),f=be(n,i,e,t),y=be(r,i,e,t),b=tn(f,y,o);return tn(a,b,l)}function Ii(e,t){return Math.pow(Bi,-Math.pow(Math.sqrt(e*e+t*t),1/2))*Math.sin(Math.sqrt(e*e+t*t))}function ji(e,t){return Math.sin(Math.sqrt(e*e+t*t))}const Fi=Object.freeze(Object.defineProperty({__proto__:null,Perlin:Di,Sin3D:ji,dampedSin3D:Ii},Symbol.toStringTag,{value:"Module"}));var lr=(e=>(e[e.linear=0]="linear",e[e.square=1]="square",e[e.log=2]="log",e[e.power=3]="power",e))(lr||{}),ar=(e=>(e[e.default=0]="default",e))(ar||{});function en(e,t){return(e-t.min)/(t.max-t.min)}function Ui(e,t){return Math.sqrt((e-t.min)/(t.max-t.min))}function ki(e,t){return Math.log((e-t.min)/(t.max-t.min)+1)}function qi(e,t){return Math.pow((e-t.min)/(t.max-t.min),2)}function cr(e){switch(e){case 0:return en;case 1:return Ui;case 2:return ki;case 3:return qi;default:throw new Error("未知的拉伸类型")}}function nn(e,t,n=en){let r=n(t,e),s=Math.floor(r*255);return`rgb(${s},${s},${s})`}function zi(e){return(t,n)=>nn(t,n,cr(e))}const ur=["#163544","#495a45","#767d58","#76a477","#d7bd7f","#d7221f"];function vi(e,t,n,r=ur,s=en){let i=s(t,e),o=0;if(n===void 0)o=Math.floor(i*r.length);else for(let l=0;l<n.length;l++)if(i<n[l]){o=l;break}return r[o]}function Hi(e,t,n=ur){return(r,s)=>vi(r,s,t,n,cr(e))}const Xi=Object.freeze(Object.defineProperty({__proto__:null,colorListType:ar,pseudoColorBandFactory:Hi,simpleColorBand:nn,simpleColorBandFactory:zi,stretchType:lr},Symbol.toStringTag,{value:"Module"}));function Wi(e,t,n,r,s=nn){let i=n.w/t[0].length,o=n.h/t.length,l=e.getContext("2d");if(l===null)throw new Error("无法获取canvas绘图上下文");for(let h=0;h<t.length;h++)for(let u=0;u<t[0].length;u++){let a=t[h][u],f=s(r,a);l.fillStyle=f,l.fillRect(n.x+u*i,n.y+h*o,i,o)}l.fillStyle="red",l.fillRect(n.x+n.w/2-2,n.y+n.h/2-2,4,4)}const $i=Object.freeze(Object.defineProperty({__proto__:null,drawGrid2d:Wi},Symbol.toStringTag,{value:"Module"}));at.CGUtils=Vr,at.Colors=Xi,at.Coverage=Ci,at.Delaunay=ls,at.Geometry=qr,at.Measuration=Xr,at.Meta=Pi,at.Noise=Fi,at.QuadTree=Li,at.Reference=Ir,at.Renderer=$i,at.Shell=us,at.Unit=Lr,at.Utils=Or,Object.defineProperty(at,Symbol.toStringTag,{value:"Module"})});
