(function(lt,st){typeof exports=="object"&&typeof module<"u"?st(exports):typeof define=="function"&&define.amd?define(["exports"],st):(lt=typeof globalThis<"u"?globalThis:lt||self,st(lt.RVGeo={}))})(this,function(lt){"use strict";var Vs=Object.defineProperty;var Js=(lt,st,_)=>st in lt?Vs(lt,st,{enumerable:!0,configurable:!0,writable:!0,value:_}):lt[st]=_;var Z=(lt,st,_)=>(Js(lt,typeof st!="symbol"?st+"":st,_),_);const st=11102230246251565e-32,_=134217729,cn=(3+8*st)*st;function ft(e,t,n,r,o){let s,i,l,a,h=t[0],u=r[0],f=0,d=0;u>h==u>-h?(s=h,h=t[++f]):(s=u,u=r[++d]);let b=0;if(f<e&&d<n)for(u>h==u>-h?(i=h+s,l=s-(i-h),h=t[++f]):(i=u+s,l=s-(i-u),u=r[++d]),s=i,l!==0&&(o[b++]=l);f<e&&d<n;)u>h==u>-h?(i=s+h,a=i-s,l=s-(i-a)+(h-a),h=t[++f]):(i=s+u,a=i-s,l=s-(i-a)+(u-a),u=r[++d]),s=i,l!==0&&(o[b++]=l);for(;f<e;)i=s+h,a=i-s,l=s-(i-a)+(h-a),h=t[++f],s=i,l!==0&&(o[b++]=l);for(;d<n;)i=s+u,a=i-s,l=s-(i-a)+(u-a),u=r[++d],s=i,l!==0&&(o[b++]=l);return(s!==0||b===0)&&(o[b++]=s),b}function xt(e,t,n,r,o,s,i,l){return ft(ft(e,t,n,r,i),i,o,s,l)}function M(e,t,n,r){let o,s,i,l,a,h,u,f,d,b,y;u=_*n,b=u-(u-n),y=n-b;let g=t[0];o=g*n,u=_*g,f=u-(u-g),d=g-f,i=d*y-(o-f*b-d*b-f*y);let O=0;i!==0&&(r[O++]=i);for(let P=1;P<e;P++)g=t[P],l=g*n,u=_*g,f=u-(u-g),d=g-f,a=d*y-(l-f*b-d*b-f*y),s=o+a,h=s-o,i=o-(s-h)+(a-h),i!==0&&(r[O++]=i),o=l+s,i=s-(o-l),i!==0&&(r[O++]=i);return(o!==0||O===0)&&(r[O++]=o),O}function dn(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function J(e){return new Float64Array(e)}const qr=(3+16*st)*st,zr=(2+12*st)*st,Hr=(9+64*st)*st*st,qt=J(4),mn=J(8),yn=J(12),pn=J(16),pt=J(4);function Yr(e,t,n,r,o,s,i){let l,a,h,u,f,d,b,y,g,O,P,I,v,V,tt,ot,at,it;const C=e-o,q=n-o,U=t-s,z=r-s;V=C*z,d=_*C,b=d-(d-C),y=C-b,d=_*z,g=d-(d-z),O=z-g,tt=y*O-(V-b*g-y*g-b*O),ot=U*q,d=_*U,b=d-(d-U),y=U-b,d=_*q,g=d-(d-q),O=q-g,at=y*O-(ot-b*g-y*g-b*O),P=tt-at,f=tt-P,qt[0]=tt-(P+f)+(f-at),I=V+P,f=I-V,v=V-(I-f)+(P-f),P=v-ot,f=v-P,qt[1]=v-(P+f)+(f-ot),it=I+P,f=it-I,qt[2]=I-(it-f)+(P-f),qt[3]=it;let et=dn(4,qt),c=zr*i;if(et>=c||-et>=c||(f=e-C,l=e-(C+f)+(f-o),f=n-q,h=n-(q+f)+(f-o),f=t-U,a=t-(U+f)+(f-s),f=r-z,u=r-(z+f)+(f-s),l===0&&a===0&&h===0&&u===0)||(c=Hr*i+cn*Math.abs(et),et+=C*u+z*l-(U*h+q*a),et>=c||-et>=c))return et;V=l*z,d=_*l,b=d-(d-l),y=l-b,d=_*z,g=d-(d-z),O=z-g,tt=y*O-(V-b*g-y*g-b*O),ot=a*q,d=_*a,b=d-(d-a),y=a-b,d=_*q,g=d-(d-q),O=q-g,at=y*O-(ot-b*g-y*g-b*O),P=tt-at,f=tt-P,pt[0]=tt-(P+f)+(f-at),I=V+P,f=I-V,v=V-(I-f)+(P-f),P=v-ot,f=v-P,pt[1]=v-(P+f)+(f-ot),it=I+P,f=it-I,pt[2]=I-(it-f)+(P-f),pt[3]=it;const m=ft(4,qt,4,pt,mn);V=C*u,d=_*C,b=d-(d-C),y=C-b,d=_*u,g=d-(d-u),O=u-g,tt=y*O-(V-b*g-y*g-b*O),ot=U*h,d=_*U,b=d-(d-U),y=U-b,d=_*h,g=d-(d-h),O=h-g,at=y*O-(ot-b*g-y*g-b*O),P=tt-at,f=tt-P,pt[0]=tt-(P+f)+(f-at),I=V+P,f=I-V,v=V-(I-f)+(P-f),P=v-ot,f=v-P,pt[1]=v-(P+f)+(f-ot),it=I+P,f=it-I,pt[2]=I-(it-f)+(P-f),pt[3]=it;const p=ft(m,mn,4,pt,yn);V=l*u,d=_*l,b=d-(d-l),y=l-b,d=_*u,g=d-(d-u),O=u-g,tt=y*O-(V-b*g-y*g-b*O),ot=a*h,d=_*a,b=d-(d-a),y=a-b,d=_*h,g=d-(d-h),O=h-g,at=y*O-(ot-b*g-y*g-b*O),P=tt-at,f=tt-P,pt[0]=tt-(P+f)+(f-at),I=V+P,f=I-V,v=V-(I-f)+(P-f),P=v-ot,f=v-P,pt[1]=v-(P+f)+(f-ot),it=I+P,f=it-I,pt[2]=I-(it-f)+(P-f),pt[3]=it;const x=ft(p,yn,4,pt,pn);return pn[x-1]}function Gt(e,t,n,r,o,s){const i=(t-s)*(n-o),l=(e-o)*(r-s),a=i-l,h=Math.abs(i+l);return Math.abs(a)>=qr*h?a:-Yr(e,t,n,r,o,s,h)}const Wr=(10+96*st)*st,$r=(4+48*st)*st,Vr=(44+576*st)*st*st,kt=J(4),Lt=J(4),Ft=J(4),Tt=J(4),Et=J(4),_t=J(4),wt=J(4),gt=J(4),Re=J(8),Oe=J(8),Ce=J(8),ke=J(8),Le=J(8),Fe=J(8),le=J(8),ae=J(8),ue=J(8),Dt=J(4),It=J(4),jt=J(4),k=J(8),D=J(16),nt=J(16),rt=J(16),X=J(32),Nt=J(32),ut=J(48),bt=J(64);let zt=J(1152),Ne=J(1152);function ht(e,t,n){e=ft(e,zt,t,n,Ne);const r=zt;return zt=Ne,Ne=r,e}function Jr(e,t,n,r,o,s,i,l,a){let h,u,f,d,b,y,g,O,P,I,v,V,tt,ot,at,it,C,q,U,z,et,c,m,p,x,S,E,w,T,L,R,F,N,j,B;const H=e-i,Y=n-i,W=o-i,K=t-l,$=r-l,Q=s-l;R=Y*Q,m=_*Y,p=m-(m-Y),x=Y-p,m=_*Q,S=m-(m-Q),E=Q-S,F=x*E-(R-p*S-x*S-p*E),N=W*$,m=_*W,p=m-(m-W),x=W-p,m=_*$,S=m-(m-$),E=$-S,j=x*E-(N-p*S-x*S-p*E),w=F-j,c=F-w,kt[0]=F-(w+c)+(c-j),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L-N,c=L-w,kt[1]=L-(w+c)+(c-N),B=T+w,c=B-T,kt[2]=T-(B-c)+(w-c),kt[3]=B,R=W*K,m=_*W,p=m-(m-W),x=W-p,m=_*K,S=m-(m-K),E=K-S,F=x*E-(R-p*S-x*S-p*E),N=H*Q,m=_*H,p=m-(m-H),x=H-p,m=_*Q,S=m-(m-Q),E=Q-S,j=x*E-(N-p*S-x*S-p*E),w=F-j,c=F-w,Lt[0]=F-(w+c)+(c-j),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L-N,c=L-w,Lt[1]=L-(w+c)+(c-N),B=T+w,c=B-T,Lt[2]=T-(B-c)+(w-c),Lt[3]=B,R=H*$,m=_*H,p=m-(m-H),x=H-p,m=_*$,S=m-(m-$),E=$-S,F=x*E-(R-p*S-x*S-p*E),N=Y*K,m=_*Y,p=m-(m-Y),x=Y-p,m=_*K,S=m-(m-K),E=K-S,j=x*E-(N-p*S-x*S-p*E),w=F-j,c=F-w,Ft[0]=F-(w+c)+(c-j),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L-N,c=L-w,Ft[1]=L-(w+c)+(c-N),B=T+w,c=B-T,Ft[2]=T-(B-c)+(w-c),Ft[3]=B,h=ft(ft(ft(M(M(4,kt,H,k),k,H,D),D,M(M(4,kt,K,k),k,K,nt),nt,X),X,ft(M(M(4,Lt,Y,k),k,Y,D),D,M(M(4,Lt,$,k),k,$,nt),nt,Nt),Nt,bt),bt,ft(M(M(4,Ft,W,k),k,W,D),D,M(M(4,Ft,Q,k),k,Q,nt),nt,X),X,zt);let Ct=dn(h,zt),se=$r*a;if(Ct>=se||-Ct>=se||(c=e-H,u=e-(H+c)+(c-i),c=t-K,b=t-(K+c)+(c-l),c=n-Y,f=n-(Y+c)+(c-i),c=r-$,y=r-($+c)+(c-l),c=o-W,d=o-(W+c)+(c-i),c=s-Q,g=s-(Q+c)+(c-l),u===0&&f===0&&d===0&&b===0&&y===0&&g===0)||(se=Vr*a+cn*Math.abs(Ct),Ct+=(H*H+K*K)*(Y*g+Q*f-($*d+W*y))+2*(H*u+K*b)*(Y*Q-$*W)+((Y*Y+$*$)*(W*b+K*d-(Q*u+H*g))+2*(Y*f+$*y)*(W*K-Q*H))+((W*W+Q*Q)*(H*y+$*u-(K*f+Y*b))+2*(W*d+Q*g)*(H*$-K*Y)),Ct>=se||-Ct>=se))return Ct;if((f!==0||y!==0||d!==0||g!==0)&&(R=H*H,m=_*H,p=m-(m-H),x=H-p,F=x*x-(R-p*p-(p+p)*x),N=K*K,m=_*K,p=m-(m-K),x=K-p,j=x*x-(N-p*p-(p+p)*x),w=F+j,c=w-F,Tt[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,Tt[1]=L-(w-c)+(N-c),B=T+w,c=B-T,Tt[2]=T-(B-c)+(w-c),Tt[3]=B),(d!==0||g!==0||u!==0||b!==0)&&(R=Y*Y,m=_*Y,p=m-(m-Y),x=Y-p,F=x*x-(R-p*p-(p+p)*x),N=$*$,m=_*$,p=m-(m-$),x=$-p,j=x*x-(N-p*p-(p+p)*x),w=F+j,c=w-F,Et[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,Et[1]=L-(w-c)+(N-c),B=T+w,c=B-T,Et[2]=T-(B-c)+(w-c),Et[3]=B),(u!==0||b!==0||f!==0||y!==0)&&(R=W*W,m=_*W,p=m-(m-W),x=W-p,F=x*x-(R-p*p-(p+p)*x),N=Q*Q,m=_*Q,p=m-(m-Q),x=Q-p,j=x*x-(N-p*p-(p+p)*x),w=F+j,c=w-F,_t[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,_t[1]=L-(w-c)+(N-c),B=T+w,c=B-T,_t[2]=T-(B-c)+(w-c),_t[3]=B),u!==0&&(O=M(4,kt,u,Re),h=ht(h,xt(M(O,Re,2*H,D),D,M(M(4,_t,u,k),k,$,nt),nt,M(M(4,Et,u,k),k,-Q,rt),rt,X,ut),ut)),b!==0&&(P=M(4,kt,b,Oe),h=ht(h,xt(M(P,Oe,2*K,D),D,M(M(4,Et,b,k),k,W,nt),nt,M(M(4,_t,b,k),k,-Y,rt),rt,X,ut),ut)),f!==0&&(I=M(4,Lt,f,Ce),h=ht(h,xt(M(I,Ce,2*Y,D),D,M(M(4,Tt,f,k),k,Q,nt),nt,M(M(4,_t,f,k),k,-K,rt),rt,X,ut),ut)),y!==0&&(v=M(4,Lt,y,ke),h=ht(h,xt(M(v,ke,2*$,D),D,M(M(4,_t,y,k),k,H,nt),nt,M(M(4,Tt,y,k),k,-W,rt),rt,X,ut),ut)),d!==0&&(V=M(4,Ft,d,Le),h=ht(h,xt(M(V,Le,2*W,D),D,M(M(4,Et,d,k),k,K,nt),nt,M(M(4,Tt,d,k),k,-$,rt),rt,X,ut),ut)),g!==0&&(tt=M(4,Ft,g,Fe),h=ht(h,xt(M(tt,Fe,2*Q,D),D,M(M(4,Tt,g,k),k,Y,nt),nt,M(M(4,Et,g,k),k,-H,rt),rt,X,ut),ut)),u!==0||b!==0){if(f!==0||y!==0||d!==0||g!==0?(R=f*Q,m=_*f,p=m-(m-f),x=f-p,m=_*Q,S=m-(m-Q),E=Q-S,F=x*E-(R-p*S-x*S-p*E),N=Y*g,m=_*Y,p=m-(m-Y),x=Y-p,m=_*g,S=m-(m-g),E=g-S,j=x*E-(N-p*S-x*S-p*E),w=F+j,c=w-F,wt[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,wt[1]=L-(w-c)+(N-c),B=T+w,c=B-T,wt[2]=T-(B-c)+(w-c),wt[3]=B,R=d*-$,m=_*d,p=m-(m-d),x=d-p,m=_*-$,S=m-(m- -$),E=-$-S,F=x*E-(R-p*S-x*S-p*E),N=W*-y,m=_*W,p=m-(m-W),x=W-p,m=_*-y,S=m-(m- -y),E=-y-S,j=x*E-(N-p*S-x*S-p*E),w=F+j,c=w-F,gt[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,gt[1]=L-(w-c)+(N-c),B=T+w,c=B-T,gt[2]=T-(B-c)+(w-c),gt[3]=B,at=ft(4,wt,4,gt,ae),R=f*g,m=_*f,p=m-(m-f),x=f-p,m=_*g,S=m-(m-g),E=g-S,F=x*E-(R-p*S-x*S-p*E),N=d*y,m=_*d,p=m-(m-d),x=d-p,m=_*y,S=m-(m-y),E=y-S,j=x*E-(N-p*S-x*S-p*E),w=F-j,c=F-w,It[0]=F-(w+c)+(c-j),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L-N,c=L-w,It[1]=L-(w+c)+(c-N),B=T+w,c=B-T,It[2]=T-(B-c)+(w-c),It[3]=B,q=4):(ae[0]=0,at=1,It[0]=0,q=1),u!==0){const mt=M(at,ae,u,rt);h=ht(h,ft(M(O,Re,u,D),D,M(mt,rt,2*H,X),X,ut),ut);const yt=M(q,It,u,k);h=ht(h,xt(M(yt,k,2*H,D),D,M(yt,k,u,nt),nt,M(mt,rt,u,X),X,Nt,bt),bt),y!==0&&(h=ht(h,M(M(4,_t,u,k),k,y,D),D)),g!==0&&(h=ht(h,M(M(4,Et,-u,k),k,g,D),D))}if(b!==0){const mt=M(at,ae,b,rt);h=ht(h,ft(M(P,Oe,b,D),D,M(mt,rt,2*K,X),X,ut),ut);const yt=M(q,It,b,k);h=ht(h,xt(M(yt,k,2*K,D),D,M(yt,k,b,nt),nt,M(mt,rt,b,X),X,Nt,bt),bt)}}if(f!==0||y!==0){if(d!==0||g!==0||u!==0||b!==0?(R=d*K,m=_*d,p=m-(m-d),x=d-p,m=_*K,S=m-(m-K),E=K-S,F=x*E-(R-p*S-x*S-p*E),N=W*b,m=_*W,p=m-(m-W),x=W-p,m=_*b,S=m-(m-b),E=b-S,j=x*E-(N-p*S-x*S-p*E),w=F+j,c=w-F,wt[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,wt[1]=L-(w-c)+(N-c),B=T+w,c=B-T,wt[2]=T-(B-c)+(w-c),wt[3]=B,z=-Q,et=-g,R=u*z,m=_*u,p=m-(m-u),x=u-p,m=_*z,S=m-(m-z),E=z-S,F=x*E-(R-p*S-x*S-p*E),N=H*et,m=_*H,p=m-(m-H),x=H-p,m=_*et,S=m-(m-et),E=et-S,j=x*E-(N-p*S-x*S-p*E),w=F+j,c=w-F,gt[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,gt[1]=L-(w-c)+(N-c),B=T+w,c=B-T,gt[2]=T-(B-c)+(w-c),gt[3]=B,it=ft(4,wt,4,gt,ue),R=d*b,m=_*d,p=m-(m-d),x=d-p,m=_*b,S=m-(m-b),E=b-S,F=x*E-(R-p*S-x*S-p*E),N=u*g,m=_*u,p=m-(m-u),x=u-p,m=_*g,S=m-(m-g),E=g-S,j=x*E-(N-p*S-x*S-p*E),w=F-j,c=F-w,jt[0]=F-(w+c)+(c-j),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L-N,c=L-w,jt[1]=L-(w+c)+(c-N),B=T+w,c=B-T,jt[2]=T-(B-c)+(w-c),jt[3]=B,U=4):(ue[0]=0,it=1,jt[0]=0,U=1),f!==0){const mt=M(it,ue,f,rt);h=ht(h,ft(M(I,Ce,f,D),D,M(mt,rt,2*Y,X),X,ut),ut);const yt=M(U,jt,f,k);h=ht(h,xt(M(yt,k,2*Y,D),D,M(yt,k,f,nt),nt,M(mt,rt,f,X),X,Nt,bt),bt),g!==0&&(h=ht(h,M(M(4,Tt,f,k),k,g,D),D)),b!==0&&(h=ht(h,M(M(4,_t,-f,k),k,b,D),D))}if(y!==0){const mt=M(it,ue,y,rt);h=ht(h,ft(M(v,ke,y,D),D,M(mt,rt,2*$,X),X,ut),ut);const yt=M(U,jt,y,k);h=ht(h,xt(M(yt,k,2*$,D),D,M(yt,k,y,nt),nt,M(mt,rt,y,X),X,Nt,bt),bt)}}if(d!==0||g!==0){if(u!==0||b!==0||f!==0||y!==0?(R=u*$,m=_*u,p=m-(m-u),x=u-p,m=_*$,S=m-(m-$),E=$-S,F=x*E-(R-p*S-x*S-p*E),N=H*y,m=_*H,p=m-(m-H),x=H-p,m=_*y,S=m-(m-y),E=y-S,j=x*E-(N-p*S-x*S-p*E),w=F+j,c=w-F,wt[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,wt[1]=L-(w-c)+(N-c),B=T+w,c=B-T,wt[2]=T-(B-c)+(w-c),wt[3]=B,z=-K,et=-b,R=f*z,m=_*f,p=m-(m-f),x=f-p,m=_*z,S=m-(m-z),E=z-S,F=x*E-(R-p*S-x*S-p*E),N=Y*et,m=_*Y,p=m-(m-Y),x=Y-p,m=_*et,S=m-(m-et),E=et-S,j=x*E-(N-p*S-x*S-p*E),w=F+j,c=w-F,gt[0]=F-(w-c)+(j-c),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L+N,c=w-L,gt[1]=L-(w-c)+(N-c),B=T+w,c=B-T,gt[2]=T-(B-c)+(w-c),gt[3]=B,ot=ft(4,wt,4,gt,le),R=u*y,m=_*u,p=m-(m-u),x=u-p,m=_*y,S=m-(m-y),E=y-S,F=x*E-(R-p*S-x*S-p*E),N=f*b,m=_*f,p=m-(m-f),x=f-p,m=_*b,S=m-(m-b),E=b-S,j=x*E-(N-p*S-x*S-p*E),w=F-j,c=F-w,Dt[0]=F-(w+c)+(c-j),T=R+w,c=T-R,L=R-(T-c)+(w-c),w=L-N,c=L-w,Dt[1]=L-(w+c)+(c-N),B=T+w,c=B-T,Dt[2]=T-(B-c)+(w-c),Dt[3]=B,C=4):(le[0]=0,ot=1,Dt[0]=0,C=1),d!==0){const mt=M(ot,le,d,rt);h=ht(h,ft(M(V,Le,d,D),D,M(mt,rt,2*W,X),X,ut),ut);const yt=M(C,Dt,d,k);h=ht(h,xt(M(yt,k,2*W,D),D,M(yt,k,d,nt),nt,M(mt,rt,d,X),X,Nt,bt),bt),b!==0&&(h=ht(h,M(M(4,Et,d,k),k,b,D),D)),y!==0&&(h=ht(h,M(M(4,Tt,-d,k),k,y,D),D))}if(g!==0){const mt=M(ot,le,g,rt);h=ht(h,ft(M(tt,Fe,g,D),D,M(mt,rt,2*Q,X),X,ut),ut);const yt=M(C,Dt,g,k);h=ht(h,xt(M(yt,k,2*Q,D),D,M(yt,k,g,nt),nt,M(mt,rt,g,X),X,Nt,bt),bt)}}return zt[h-1]}function Xr(e,t,n,r,o,s,i,l){const a=e-i,h=n-i,u=o-i,f=t-l,d=r-l,b=s-l,y=h*b,g=u*d,O=a*a+f*f,P=u*f,I=a*b,v=h*h+d*d,V=a*d,tt=h*f,ot=u*u+b*b,at=O*(y-g)+v*(P-I)+ot*(V-tt),it=(Math.abs(y)+Math.abs(g))*O+(Math.abs(P)+Math.abs(I))*v+(Math.abs(V)+Math.abs(tt))*ot,C=Wr*it;return at>C||-at>C?at:Jr(e,t,n,r,o,s,i,l,it)}function Be(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}function wn(e){return Math.abs(e)<=180?e:e-Ht(e)*360}function Ht(e){return e<0?-1:e>0?1:0}function De(e,t,n){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let r=e[0],o=e[1],s=t[0],i=t[1],l=n[0],a=n[1],h=(s-r)*(a-o)-(i-o)*(l-r);return h=Ht(h),h}function Kt(e,t){let n=Array.isArray(e)?e:e.toXY(),r=Array.isArray(t)?t:t.toXY(),o=Math.atan2(r[1]-n[1],r[0]-n[0]);return o=o*180/Math.PI,o<0&&(o+=360),o}function Gr(e,t,n,r=!0){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let o=e[0],s=e[1],i=t[0],l=t[1],a=n[0],h=n[1],u=Gt(o,s,i,l,a,h);return r&&(u=-u),u=Ht(u),u}function Kr(e,t,n,r){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),r=Array.isArray(r)?r:r.toXY();let o=e[0],s=e[1],i=t[0],l=t[1],a=n[0],h=n[1],u=r[0],f=r[1],d=Xr(o,s,i,l,a,h,u,f);return d=Ht(d),d}function Qr(e,t,n,r){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),r=Array.isArray(r)?r:r.toXY();let o=e[0],s=e[1],i=t[0],l=t[1],a=n[0],h=n[1],u=r[0],f=r[1];const d=o-u,b=s-f,y=i-u,g=l-f,O=a-u,P=h-f,I=d*d+b*b,v=y*y+g*g,V=O*O+P*P;let tt=d*(g*V-v*P)-b*(y*V-v*O)+I*(y*P-g*O);return Ht(tt)}function Zr(e){let t=[],n=e;for(;Array.isArray(n);)t.push(n.length),n=n[0];return t}function gn(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?t.push(...gn(r)):t.push(r)}return t}function bn(e,t){let n=[];for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?n.push(bn(o,t)):n.push(t[o])}return n}function to(e,t){return e.forEach((n,r)=>{e[r]=n.concat(t[r])}),e}function eo(e,t){Array.isArray(t)||(t=[t]),t.forEach(r=>{if(r<0||r>=e[0].length)throw new Error("indexArray is illegal!")});let n=[];return e.forEach(r=>{let o=[];Array.isArray(t)?t.forEach(s=>{o.push(r[s])}):o.push(r[t]),n.push(o)}),n}function no(e,t){if(t>e)throw new Error("num must be less than length!");const n=[];for(;n.length<t;){const r=Math.floor(Math.random()*e);n.includes(r)||n.push(r)}return n}const ro=Object.freeze(Object.defineProperty({__proto__:null,adjust_lon:wn,calculateArrayShape:Zr,ccw:De,ccwRobust:Gr,concatEL2DArray:to,fillIndexArray:bn,flattenArray:gn,getAngle:Kt,inCircle:Qr,inCircleRobust:Kr,randomIndexArray:no,round:Be,sign:Ht,subColumnInEL2DArray:eo},Symbol.toStringTag,{value:"Module"})),xn={a:6378137,b:63710088e-1,Name:"Normal Sphere ( r= 6371008.8 )"},dt=xn.a,Ie={centimeters:dt*100,centimetres:dt*100,degrees:360/(2*Math.PI),feet:dt*3.28084,inches:dt*39.37,kilometers:dt/1e3,kilometres:dt/1e3,meters:dt,metres:dt,miles:dt/1609.344,millimeters:dt*1e3,millimetres:dt*1e3,nauticalmiles:dt/1852,radians:1,yards:dt*1.0936},je={centimeters:1*100,centimetres:1*100,degrees:360/(2*Math.PI)*1/dt,feet:1*3.28084,inches:1*39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1*1e3,millimetres:1*1e3,nauticalmiles:1/1852,radians:1/dt,yards:1*1.0936},ve={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ue(e,t="kilometers"){const n=Ie[t];if(!n)throw new Error(t+" units is invalid");return e*n}function oo(e,t="kilometers"){const n=Ie[t];if(!n)throw new Error(t+" units is invalid");return e/n}function Yt(e){return e%360*Math.PI/180}function io(e){return e%(2*Math.PI)*180/Math.PI}function An(e,t){const n=je[t];if(!n)throw new Error(t+" units is invalid");return e/n}function he(e,t){const n=je[t];if(!n)throw new Error(t+" units is invalid");return e*n}function so(e,t,n){return he(An(e,t),n)}const lo=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:ve,degreesToRadians:Yt,earthRadius:dt,factors:Ie,factors2:je,lengthToRadians:oo,metersTo:he,radiansToDegrees:io,radiansToLength:Ue,toMeters:An,unitTounit:so},Symbol.toStringTag,{value:"Module"}));function At(e,t="meters",n=6){const r=20037508342789244e-9,o=dt,s=Array.isArray(e)?e:e.to2DArray(),i=wn(s[0]);let l=Yt(i),a=Yt(s[1]);return l=Ue(l,"meters"),a=o*Math.log(Math.tan(Math.PI*.25+.5*a)),l>r&&(l=r),l<-r&&(l=-r),a>r&&(a=r),a<-r&&(a=-r),l=Be(he(l,t),n),a=Be(he(a,t),n),[l,a]}function vt(e){var t=180/Math.PI,n=6378137;return[e[0]*t/n,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/n)))*t]}function ao(e,t="meters",n=6){if(e[0]instanceof St){let r=[];for(let o=0;o<e.length;o++)r.push(At(e[o],t,n));return r}else{let r=[];for(let o=0;o<e.length;o++)r.push(At(e[o],t,n));return r}}function uo(e,t="meters",n=6){let r=[],o=At([e[0],e[1]],t,n),s=At([e[2],e[3]],t,n);return r=[o[0],o[1],s[0],s[1]],r}function ho(e,t="meters",n=6){let r=[],o=vt([e[0],e[1]]),s=vt([e[2],e[3]]);return r=[o[0],o[1],s[0],s[1]],r}const fo=Object.freeze(Object.defineProperty({__proto__:null,MBR2Plane:uo,convertToMercator:At,convertToMercators:ao,convertToWgs84:vt,plane2MBR:ho},Symbol.toStringTag,{value:"Module"}));function Sn(e){return{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2,w:e[2]-e[0],h:e[3]-e[1]}}function co(e){return[e.x-e.w/2,e.y-e.h/2,e.x+e.w/2,e.y+e.h/2]}function Mn(e){let t=e[0],n=e[1],r=e[2],o=e[3];return[[t,n],[t,o],[r,o],[r,n],[t,n]]}function mo(e){let t=1/0,n=1/0,r=-1/0,o=-1/0;for(let s=0;s<e.length;s++){let i=e[s][0],l=e[s][1];t=Math.min(t,i),n=Math.min(n,l),r=Math.max(r,i),o=Math.max(o,l)}return[t,n,r,o]}function Tn(e,t){let n=t[0],r=t[1],o=t[2],s=t[3],i=e[0],l=e[1];return i>=n&&i<=o&&l>=r&&l<=s}class En{constructor(t,n,...r){Z(this,"type");Z(this,"properties");Z(this,"MBR");Z(this,"coordinates");this.type=t,this.properties=r,this.coordinates=n,this.MBR=this.calculateMBR()}getPropertyArray(){return this.properties}getMBR(){return this.MBR}}class St{constructor(t,n,r=0,...o){Z(this,"lon");Z(this,"lat");Z(this,"asl");Z(this,"type","Point");Z(this,"properties");this.lon=t,this.lat=n,this.asl=r,this.properties=o}toXY(t="meters"){return At(this,t)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat],properties:{...this.properties}}}to2DArray(){return[this.lon,this.lat]}to3DArray(){return[this.lon,this.lat,this.asl]}toString(){return`Point(${this.lon}, ${this.lat}, ${this.asl})`}getPropertyArray(){return this.properties}static isPoint(t){return t.type==="Point"}}class qe extends En{constructor(t,...n){if(t[0]instanceof Array){t=t;let r=[];for(let o=0;o<t.length;o++)r.push(new St(t[o][0],t[o][1]));t=r}super("MultiPoint",t,...n)}getCorrinatesPropertyArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].getPropertyArray();t.push(r)}return t}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].to2DArray();t.push(r)}return t}toXYArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toXY();t.push(r)}return t}toGeoJSON(){return{type:"MultiPoint",coordinates:this.toArray(),properties:{...this.properties}}}calculateMBR(){let t=1/0,n=1/0,r=-1/0,o=-1/0;for(let s=0;s<this.coordinates.length;s++){let i=this.coordinates[s].to2DArray();t=Math.min(t,i[0]),n=Math.min(n,i[1]),r=Math.max(r,i[0]),o=Math.max(o,i[1])}return[t,n,r,o]}calculateCentroid(t){if(t){let n=0;for(let l=0;l<t.length;l++)n+=t[l];for(let l=0;l<t.length;l++)t[l]/=n;let r=0,o=0;for(let l=0;l<this.coordinates.length;l++){let a=this.coordinates[l].to2DArray();r+=a[0]*t[l],o+=a[1]*t[l]}let s=r,i=o;return new St(s,i)}else{let n=0,r=0;for(let i=0;i<this.coordinates.length;i++){let l=this.coordinates[i].to2DArray();n+=l[0],r+=l[1]}let o=n/this.coordinates.length,s=r/this.coordinates.length;return new St(o,s)}}deletePoint(t){this.coordinates.splice(t,1),this.MBR=this.calculateMBR()}addPoint(t){let n=St.isPoint(t)?t:new St(t[0],t[1]);this.coordinates.push(n),this.MBR=this.calculateMBR()}popPoint(){this.coordinates.pop(),this.MBR=this.calculateMBR()}static isMultiPoint(t){return t.type==="MultiPoint"}}class ze extends qe{constructor(t,...n){super(t,...n),this.type="LineString"}static isLineString(t){return t.type==="LineString"}sortPoints(){let n=this.calculateCentroid().toXY();this.coordinates.sort((r,o)=>{let s=Kt(n,r.toXY()),i=Kt(n,o.toXY());return s<i?-1:s>i?1:0})}}class _n extends En{constructor(t,...n){super("MultiLineString",t,...n)}calculateMBR(){let t=1/0,n=1/0,r=-1/0,o=-1/0;for(let s=0;s<this.coordinates.length;s++){let i=this.coordinates[s].getMBR();t=Math.min(t,i[0]),n=Math.min(n,i[1]),r=Math.max(r,i[2]),o=Math.max(o,i[3])}return[t,n,r,o]}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toArray();t.push(r)}return t}toGeoJSON(){return{type:"MultiLineString",coordinates:this.toArray(),properties:{...this.properties}}}static isMultiLineString(t){return t.type==="MultiLineString"}}class yo extends _n{constructor(t,...n){super(t,...n),this.type="Polygon"}static isPolygon(t){return t.type==="Polygon"}}class po{constructor(t,n,r){Z(this,"x");Z(this,"y");Z(this,"r");Z(this,"rSquared");this.x=t,this.y=n,this.r=r,this.rSquared=this.r*this.r}contains(t,n=0){let r=t[0],o=t[1];return Math.pow(r-this.x,2)+Math.pow(o-this.y,2)-this.rSquared<=n}intersects(t){let n=Sn(t),r=Math.abs(n.x-this.x),o=Math.abs(n.y-this.y),s=this.r,i=n.w/2,l=n.h/2,a=Math.pow(r-i,2)+Math.pow(o-l,2);return r>s+i||o>s+l?!1:r<=i||o<=l?!0:a<=this.rSquared}}const wo=Object.freeze(Object.defineProperty({__proto__:null,Circle:po,LineString:ze,MultiLineString:_n,MultiPoint:qe,Point:St,Polygon:yo,getPointsMBR:mo,mbrToPolygon:Mn,mbrToRectangle:Sn,pointInMBR:Tn,rectangleToMBR:co},Symbol.toStringTag,{value:"Module"})),Pn=xn.a;function go(e,t,n="kilometers"){Array.isArray(e)&&(e=[...e]),Array.isArray(t)&&(t=[...t]);const r=Array.isArray(e)?e:e.to2DArray(),o=Array.isArray(t)?t:t.to2DArray();r.map((u,f)=>{r[f]=Yt(u)}),o.map((u,f)=>{o[f]=Yt(u)});const s=o[1]-r[1],i=o[0]-r[0],l=r[1],a=o[1],h=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(l)*Math.cos(a)));return Ue(h,n)}function bo(e,t="kilometers"){let n=ze.isLineString(e)?e.toXYArray():e;if(n.length<3)return 0;St.isPoint(n[0])&&(n=n,n.map((s,i)=>{n[i]=s.toXY()})),n=n;let r=0,o=n.length-1;for(let s=0;s<n.length;s++)r+=(n[o][0]+n[s][0])*(n[o][1]-n[s][1]),o=s;return r=r*ve[t]/2,Math.abs(r)}function xo(e,t="kilometers"){let n=ze.isLineString(e)?e.toArray():e;if(n.length<3)return 0;St.isPoint(n[0])&&(n=n,n.map((i,l)=>{n[l]=i.to2DArray()})),n=n;let r=0,o=n.length,s=[];for(let i=0;i<o;i++){s.push([]);for(let l=0;l<2;l++){let a=Yt(n[i][l]);s[i].push(a)}}for(let i=0;i<o;i++){let l=(i+1)%o,a=(i+2)%o;r+=(s[i][0]-s[a][0])*Math.sin(s[l][1])}return r=r*Pn*Pn/2,r=r*ve[t],Math.abs(r)}const Ao=Object.freeze(Object.defineProperty({__proto__:null,PlanePolygonArea:bo,SpherePolygonArea:xo,haversine:go},Symbol.toStringTag,{value:"Module"}));function fe(e,t){return e[0]*t[1]-t[0]*e[1]}function So(e,t){return e[0]*t[0]+e[1]*t[1]}function He(e,t,n,r,o=At,s=vt,i=!1){o&&(e=o(e),t=o(t),n=o(n),r=o(r));let l=[t[0]-e[0],t[1]-e[1]],a=[r[0]-n[0],r[1]-n[1]],h=fe(l,a);if(h===0)return console.log("两条线段平行或共线"),null;let u=fe([n[0]-e[0],n[1]-e[1]],a)/h,f=fe([n[0]-e[0],n[1]-e[1]],l)/h;return!i&&(u<0||u>1||f<0||f>1)?(console.log("交点不在两条线段上"),null):s?s([e[0]+l[0]*u,e[1]+l[1]*u]):[e[0]+l[0]*u,e[1]+l[1]*u]}function Ye(e,t,n=!1){if(n){let r=At(e),o=t[0],s=t[1],i=t[2],l=t[3];return[o,s]=At([o,s]),[i,l]=At([i,l]),r[0]<o||r[0]>i||r[1]<s||r[1]>l}else{let r=t[0],o=t[1],s=t[2],i=t[3];return e[0]<r||e[0]>s||e[1]<o||e[1]>i}}function Rn(e,t){return!(e[0]>t[2]||e[2]<t[0]||e[1]>t[3]||e[3]<t[1])}function On(e,t){return Cn(e,Mn(t))}function Cn(e,t){let n=e[e.length-1],r,o,s,i=t;for(let l in e){r=e[l];let a=i;i=[],o=a[a.length-1];for(let h in a){if(s=a[h],ce(s,n,r)){if(!ce(o,n,r)){let u=He(o,s,n,r,At,vt,!0);i.push(u)}i.push(s)}else if(ce(o,n,r)){let u=He(o,s,n,r,At,vt,!0);i.push(u)}o=s}n=r}return i}function Mo(e,t){let n=!1;for(let r=0,o=t.length-1;r<t.length;o=r++)t[r][1]>e[1]!=t[o][1]>e[1]&&e[0]<(t[o][0]-t[r][0])*(e[1]-t[r][1])/(t[o][1]-t[r][1])+t[r][0]&&(n=!n);return n}function To(e){let t=1/0,n=1/0,r=-1/0,o=-1/0;for(let s=0;s<e.length;s++){let i=e[s];i[0]<t&&(t=i[0]),i[0]>r&&(r=i[0]),i[1]<n&&(n=i[1]),i[1]>o&&(o=i[1])}return[t,n,r,o]}function Eo(e,t){for(let n=0,r=e.length-1;n<e.length;r=n++)t(e[n],e[r])}function _o(e,t){return(e-1+t)%t}function ce(e,t,n){return De(t,n,e)>0}const Po=Object.freeze(Object.defineProperty({__proto__:null,MBRIntersectMBR:Rn,PointInsidePolygon:Mo,PointOutsideMBR:Ye,calculateMBR:To,cross:fe,cutPolygonByMBR:On,dot:So,intersection:He,intersectionPolygon:Cn,iterPolygonEdge:Eo,pointInEdge:ce,prePointInPolygon:_o},Symbol.toStringTag,{value:"Module"})),kn=Math.pow(2,-52),de=new Uint32Array(512);class Ut{static from(t,n=Ln,r=Fn){const o=t.length,s=new Float64Array(o*2);for(let i=0;i<o;i++){const l=t[i];s[2*i]=n(l),s[2*i+1]=r(l)}return new Ut(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:o,_hullHash:s}=this,i=t.length>>1;let l=1/0,a=1/0,h=-1/0,u=-1/0;for(let C=0;C<i;C++){const q=t[2*C],U=t[2*C+1];q<l&&(l=q),U<a&&(a=U),q>h&&(h=q),U>u&&(u=U),this._ids[C]=C}const f=(l+h)/2,d=(a+u)/2;let b,y,g;for(let C=0,q=1/0;C<i;C++){const U=We(f,d,t[2*C],t[2*C+1]);U<q&&(b=C,q=U)}const O=t[2*b],P=t[2*b+1];for(let C=0,q=1/0;C<i;C++){if(C===b)continue;const U=We(O,P,t[2*C],t[2*C+1]);U<q&&U>0&&(y=C,q=U)}let I=t[2*y],v=t[2*y+1],V=1/0;for(let C=0;C<i;C++){if(C===b||C===y)continue;const q=Co(O,P,I,v,t[2*C],t[2*C+1]);q<V&&(g=C,V=q)}let tt=t[2*g],ot=t[2*g+1];if(V===1/0){for(let U=0;U<i;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];Wt(this._ids,this._dists,0,i-1);const C=new Uint32Array(i);let q=0;for(let U=0,z=-1/0;U<i;U++){const et=this._ids[U],c=this._dists[et];c>z&&(C[q++]=et,z=c)}this.hull=C.subarray(0,q),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Gt(O,P,I,v,tt,ot)<0){const C=y,q=I,U=v;y=g,I=tt,v=ot,g=C,tt=q,ot=U}const at=this.circumcenter(O,P,I,v,tt,ot);this._cx=at.x,this._cy=at.y;for(let C=0;C<i;C++)this._dists[C]=We(t[2*C],t[2*C+1],at.x,at.y);Wt(this._ids,this._dists,0,i-1),this._hullStart=b;let it=3;r[b]=n[g]=y,r[y]=n[b]=g,r[g]=n[y]=b,o[b]=0,o[y]=1,o[g]=2,s.fill(-1),s[this._hashKey(O,P)]=b,s[this._hashKey(I,v)]=y,s[this._hashKey(tt,ot)]=g,this.trianglesLen=0,this._addTriangle(b,y,g,-1,-1,-1);for(let C=0,q,U;C<this._ids.length;C++){const z=this._ids[C],et=t[2*z],c=t[2*z+1];if(C>0&&Math.abs(et-q)<=kn&&Math.abs(c-U)<=kn||(q=et,U=c,z===b||z===y||z===g))continue;let m=0;for(let w=0,T=this._hashKey(et,c);w<this._hashSize&&(m=s[(T+w)%this._hashSize],!(m!==-1&&m!==r[m]));w++);m=n[m];let p=m,x;for(;x=r[p],Gt(et,c,t[2*p],t[2*p+1],t[2*x],t[2*x+1])>=0;)if(p=x,p===m){p=-1;break}if(p===-1)continue;let S=this._addTriangle(p,z,r[p],-1,-1,o[p]);o[z]=this._legalize(S+2),o[p]=S,it++;let E=r[p];for(;x=r[E],Gt(et,c,t[2*E],t[2*E+1],t[2*x],t[2*x+1])<0;)S=this._addTriangle(E,z,x,o[z],-1,o[E]),o[z]=this._legalize(S+2),r[E]=E,it--,E=x;if(p===m)for(;x=n[p],Gt(et,c,t[2*x],t[2*x+1],t[2*p],t[2*p+1])<0;)S=this._addTriangle(x,z,p,-1,o[p],o[x]),this._legalize(S+2),o[x]=S,r[p]=p,it--,p=x;this._hullStart=n[z]=p,r[p]=n[E]=z,r[z]=E,s[this._hashKey(et,c)]=z,s[this._hashKey(t[2*p],t[2*p+1])]=p}this.hull=new Uint32Array(it);for(let C=0,q=this._hullStart;C<it;C++)this.hull[C]=q,q=r[q];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Ro(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:o}=this;let s=0,i=0;for(;;){const l=r[t],a=t-t%3;if(i=a+(t+2)%3,l===-1){if(s===0)break;t=de[--s];continue}const h=l-l%3,u=a+(t+1)%3,f=h+(l+2)%3,d=n[i],b=n[t],y=n[u],g=n[f];if(Oo(o[2*d],o[2*d+1],o[2*b],o[2*b+1],o[2*y],o[2*y+1],o[2*g],o[2*g+1])){n[t]=g,n[l]=d;const P=r[f];if(P===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,P),this._link(l,r[i]),this._link(i,f);const I=h+(l+1)%3;s<de.length&&(de[s++]=I)}else{if(s===0)break;t=de[--s]}}return i}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,o,s,i){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=r,this._link(l,o),this._link(l+1,s),this._link(l+2,i),this.trianglesLen+=3,l}getTriangles(){return this.triangles}getHalfedges(){return this.halfedges}getHull(){return this.hull}getPoints(){let t=[];for(let n=0;n<this.coords.length;n+=2)t.push([this.coords[n],this.coords[n+1]]);return t}getTriangleIndices(){let t=[];for(let n=0;n<this.triangles.length;n+=3)t.push([this.triangles[n],this.triangles[n+1],this.triangles[n+2]]);return t}static circumRadius(t,n,r){const o=n[0]-t[0],s=n[1]-t[1],i=r[0]-t[0],l=r[1]-t[1],a=o*o+s*s,h=i*i+l*l,u=.5/(o*l-s*i),f=(l*a-s*h)*u,d=(o*h-i*a)*u;return f*f+d*d}circumcenter(t,n,r,o,s,i){const l=r-t,a=o-n,h=s-t,u=i-n,f=l*l+a*a,d=h*h+u*u,b=.5/(l*u-a*h),y=t+(u*f-a*d)*b,g=n+(l*d-h*f)*b;return{x:y,y:g}}}function Ro(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function We(e,t,n,r){const o=e-n,s=t-r;return o*o+s*s}function Oo(e,t,n,r,o,s,i,l){const a=e-i,h=t-l,u=n-i,f=r-l,d=o-i,b=s-l,y=a*a+h*h,g=u*u+f*f,O=d*d+b*b;return a*(f*O-g*b)-h*(u*O-g*d)+y*(u*b-f*d)<0}function Co(e,t,n,r,o,s){const i=n-e,l=r-t,a=o-e,h=s-t,u=i*i+l*l,f=a*a+h*h,d=.5/(i*h-l*a),b=(h*u-l*f)*d,y=(i*f-a*u)*d;return b*b+y*y}function Wt(e,t,n,r){if(r-n<=20)for(let o=n+1;o<=r;o++){const s=e[o],i=t[s];let l=o-1;for(;l>=n&&t[e[l]]>i;)e[l+1]=e[l--];e[l+1]=s}else{const o=n+r>>1;let s=n+1,i=r;Qt(e,o,s),t[e[n]]>t[e[r]]&&Qt(e,n,r),t[e[s]]>t[e[r]]&&Qt(e,s,r),t[e[n]]>t[e[s]]&&Qt(e,n,s);const l=e[s],a=t[l];for(;;){do s++;while(t[e[s]]<a);do i--;while(t[e[i]]>a);if(i<s)break;Qt(e,s,i)}e[n+1]=e[i],e[i]=l,r-s+1>=i-n?(Wt(e,t,s,r),Wt(e,t,n,i-1)):(Wt(e,t,n,i-1),Wt(e,t,s,r))}}function Qt(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ln(e){return e[0]}function Fn(e){return e[1]}function ko(e){return[3*e,3*e+1,3*e+2]}function Lo(e,t){return ko(t).map(n=>e.triangles[n])}function Fo(e){return Math.floor(e/3)}function No(e,t,n){const r=e[0]*e[0]+e[1]*e[1],o=t[0]*t[0]+t[1]*t[1],s=n[0]*n[0]+n[1]*n[1],i=2*(e[0]*(t[1]-n[1])+t[0]*(n[1]-e[1])+n[0]*(e[1]-t[1]));return[1/i*(r*(t[1]-n[1])+o*(n[1]-e[1])+s*(e[1]-t[1])),1/i*(r*(n[0]-t[0])+o*(e[0]-n[0])+s*(t[0]-e[0]))]}function Nn(e,t,n,r=vt){const o=Lo(t,n).map(i=>e[i]);let s=No(o[0],o[1],o[2]);return r&&(s=r(s)),s}function Bn(e){return e%3===2?e-2:e+1}function Bo(e,t){const n=[];let r=t;do{n.push(r);const o=Bn(r);r=e.halfedges[o]}while(r!==-1&&r!==t);return n}function $e(e,t,n){const r=new Set;for(let o=0;o<t.triangles.length;o++){const s=t.triangles[Bn(o)];if(!r.has(s)){r.add(s);const a=Bo(t,o).map(Fo).map(h=>Nn(e,t,h));n(s,a)}}}class Do{constructor(t,n=Ln,r=Fn){Z(this,"delaunay");Z(this,"points");t instanceof Ut?(this.delaunay=t,this.points=t.getPoints()):(this.points=t,this.delaunay=Ut.from(t,n,r))}getVoronoi(){const{points:t,delaunay:n}=this,r=new Map;return $e(t,n,(o,s)=>r.set(o,s)),r}cutVoronoiByMBR(t){const{points:n,delaunay:r}=this,o=new Map;return $e(n,r,(s,i)=>{this.isInsideMBR(i,t)||(i=On(i,t)),o.set(s,i)}),o}robustVoronoi(t){const{points:n,delaunay:r}=this,o=new Map;return $e(n,r,(s,i)=>{this.isInsideMBR(i,t)&&o.set(s,i)}),o}isInsideMBR(t,n){const[r,o,s,i]=n;for(let l=0;l<t.length;l++){const[a,h]=t[l];if(a<r||a>s||h<o||h>i)return!1}return!0}}function Io(e,t){const n=new Map;for(let[r,o]of e)t.has(r)?n.set(r,t.get(r)):n.set(r,o);return n}const jo=Object.freeze(Object.defineProperty({__proto__:null,Delaunator:Ut,Voronoi:Do,complateMap:Io,triangleCenter:Nn},Symbol.toStringTag,{value:"Module"}));function vo(e){const t=e.map((s,i)=>[...s.toXY(),i]);let n=t[0];for(let s=1;s<t.length;s++)t[s][1]<n[1]&&(n=t[s]);t.sort((s,i)=>{let l=Kt([n[0],n[1]],[s[0],s[1]]),a=Kt([n[0],n[1]],[i[0],i[1]]);if(l<a)return-1;if(l>a)return 1;{let h=Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2),u=Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2);return h<u?-1:1}});let r=[];r.push(t[0]),r.push(t[1]);for(let s=2;s<t.length;s++){for(;r.length>1&&De([r[r.length-2][0],r[r.length-2][1]],[r[r.length-1][0],r[r.length-1][1]],[t[s][0],t[s][1]])<=0;)r.pop();r.push(t[s])}let o=[];for(let s=0;s<r.length;s++){let i=r[s][2];o.push(e[i])}return o}function Uo(e,t){let n=e.map(i=>i.toXY());return Ut.from(n).getTriangleIndices().filter(i=>{let l=[n[i[0]],n[i[1]],n[i[2]]];return Ut.circumRadius(l[0],l[1],l[2])*t<1})}const qo=Object.freeze(Object.defineProperty({__proto__:null,alphaComplex:Uo,convexHull:vo},Symbol.toStringTag,{value:"Module"}));function Dn(e,t){return function(){return e.apply(t,arguments)}}const{toString:zo}=Object.prototype,{getPrototypeOf:Ve}=Object,me=(e=>t=>{const n=zo.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pt=e=>(e=e.toLowerCase(),t=>me(t)===e),ye=e=>t=>typeof t===e,{isArray:$t}=Array,Zt=ye("undefined");function Ho(e){return e!==null&&!Zt(e)&&e.constructor!==null&&!Zt(e.constructor)&&Mt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const In=Pt("ArrayBuffer");function Yo(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&In(e.buffer),t}const Wo=ye("string"),Mt=ye("function"),jn=ye("number"),pe=e=>e!==null&&typeof e=="object",$o=e=>e===!0||e===!1,we=e=>{if(me(e)!=="object")return!1;const t=Ve(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Vo=Pt("Date"),Jo=Pt("File"),Xo=Pt("Blob"),Go=Pt("FileList"),Ko=e=>pe(e)&&Mt(e.pipe),Qo=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Mt(e.append)&&((t=me(e))==="formdata"||t==="object"&&Mt(e.toString)&&e.toString()==="[object FormData]"))},Zo=Pt("URLSearchParams"),ti=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function te(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),$t(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let l;for(r=0;r<i;r++)l=s[r],t.call(null,e[l],l,e)}}function vn(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const Un=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),qn=e=>!Zt(e)&&e!==Un;function Je(){const{caseless:e}=qn(this)&&this||{},t={},n=(r,o)=>{const s=e&&vn(t,o)||o;we(t[s])&&we(r)?t[s]=Je(t[s],r):we(r)?t[s]=Je({},r):$t(r)?t[s]=r.slice():t[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&te(arguments[r],n);return t}const ei=(e,t,n,{allOwnKeys:r}={})=>(te(t,(o,s)=>{n&&Mt(o)?e[s]=Dn(o,n):e[s]=o},{allOwnKeys:r}),e),ni=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ri=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},oi=(e,t,n,r)=>{let o,s,i;const l={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)i=o[s],(!r||r(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=n!==!1&&Ve(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},ii=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},si=e=>{if(!e)return null;if($t(e))return e;let t=e.length;if(!jn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},li=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ve(Uint8Array)),ai=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},ui=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},hi=Pt("HTMLFormElement"),fi=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),zn=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ci=Pt("RegExp"),Hn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};te(n,(o,s)=>{let i;(i=t(o,s,e))!==!1&&(r[s]=i||o)}),Object.defineProperties(e,r)},di=e=>{Hn(e,(t,n)=>{if(Mt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Mt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},mi=(e,t)=>{const n={},r=o=>{o.forEach(s=>{n[s]=!0})};return $t(e)?r(e):r(String(e).split(t)),n},yi=()=>{},pi=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Xe="abcdefghijklmnopqrstuvwxyz",Yn="0123456789",Wn={DIGIT:Yn,ALPHA:Xe,ALPHA_DIGIT:Xe+Xe.toUpperCase()+Yn},wi=(e=16,t=Wn.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function gi(e){return!!(e&&Mt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const bi=e=>{const t=new Array(10),n=(r,o)=>{if(pe(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const s=$t(r)?[]:{};return te(r,(i,l)=>{const a=n(i,o+1);!Zt(a)&&(s[l]=a)}),t[o]=void 0,s}}return r};return n(e,0)},xi=Pt("AsyncFunction"),A={isArray:$t,isArrayBuffer:In,isBuffer:Ho,isFormData:Qo,isArrayBufferView:Yo,isString:Wo,isNumber:jn,isBoolean:$o,isObject:pe,isPlainObject:we,isUndefined:Zt,isDate:Vo,isFile:Jo,isBlob:Xo,isRegExp:ci,isFunction:Mt,isStream:Ko,isURLSearchParams:Zo,isTypedArray:li,isFileList:Go,forEach:te,merge:Je,extend:ei,trim:ti,stripBOM:ni,inherits:ri,toFlatObject:oi,kindOf:me,kindOfTest:Pt,endsWith:ii,toArray:si,forEachEntry:ai,matchAll:ui,isHTMLForm:hi,hasOwnProperty:zn,hasOwnProp:zn,reduceDescriptors:Hn,freezeMethods:di,toObjectSet:mi,toCamelCase:fi,noop:yi,toFiniteNumber:pi,findKey:vn,global:Un,isContextDefined:qn,ALPHABET:Wn,generateString:wi,isSpecCompliantForm:gi,toJSONObject:bi,isAsyncFn:xi,isThenable:e=>e&&(pe(e)||Mt(e))&&Mt(e.then)&&Mt(e.catch)};function G(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}A.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const $n=G.prototype,Vn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Vn[e]={value:e}}),Object.defineProperties(G,Vn),Object.defineProperty($n,"isAxiosError",{value:!0}),G.from=(e,t,n,r,o,s)=>{const i=Object.create($n);return A.toFlatObject(e,i,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),G.call(i,e.message,t,n,r,o),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const Ai=null;function Ge(e){return A.isPlainObject(e)||A.isArray(e)}function Jn(e){return A.endsWith(e,"[]")?e.slice(0,-2):e}function Xn(e,t,n){return e?e.concat(t).map(function(o,s){return o=Jn(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function Si(e){return A.isArray(e)&&!e.some(Ge)}const Mi=A.toFlatObject(A,{},null,function(t){return/^is[A-Z]/.test(t)});function ge(e,t,n){if(!A.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,O){return!A.isUndefined(O[g])});const r=n.metaTokens,o=n.visitor||u,s=n.dots,i=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(t);if(!A.isFunction(o))throw new TypeError("visitor must be a function");function h(y){if(y===null)return"";if(A.isDate(y))return y.toISOString();if(!a&&A.isBlob(y))throw new G("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(y)||A.isTypedArray(y)?a&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,g,O){let P=y;if(y&&!O&&typeof y=="object"){if(A.endsWith(g,"{}"))g=r?g:g.slice(0,-2),y=JSON.stringify(y);else if(A.isArray(y)&&Si(y)||(A.isFileList(y)||A.endsWith(g,"[]"))&&(P=A.toArray(y)))return g=Jn(g),P.forEach(function(v,V){!(A.isUndefined(v)||v===null)&&t.append(i===!0?Xn([g],V,s):i===null?g:g+"[]",h(v))}),!1}return Ge(y)?!0:(t.append(Xn(O,g,s),h(y)),!1)}const f=[],d=Object.assign(Mi,{defaultVisitor:u,convertValue:h,isVisitable:Ge});function b(y,g){if(!A.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(y),A.forEach(y,function(P,I){(!(A.isUndefined(P)||P===null)&&o.call(t,P,A.isString(I)?I.trim():I,g,d))===!0&&b(P,g?g.concat(I):[I])}),f.pop()}}if(!A.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Gn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ke(e,t){this._pairs=[],e&&ge(e,this,t)}const Kn=Ke.prototype;Kn.append=function(t,n){this._pairs.push([t,n])},Kn.toString=function(t){const n=t?function(r){return t.call(this,r,Gn)}:Gn;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Ti(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qn(e,t,n){if(!t)return e;const r=n&&n.encode||Ti,o=n&&n.serialize;let s;if(o?s=o(t,n):s=A.isURLSearchParams(t)?t.toString():new Ke(t,n).toString(r),s){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Ei{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){A.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Zn=Ei,tr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_i=typeof URLSearchParams<"u"?URLSearchParams:Ke,Pi=typeof FormData<"u"?FormData:null,Ri=typeof Blob<"u"?Blob:null,Oi=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Ci=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Rt={isBrowser:!0,classes:{URLSearchParams:_i,FormData:Pi,Blob:Ri},isStandardBrowserEnv:Oi,isStandardBrowserWebWorkerEnv:Ci,protocols:["http","https","file","blob","url","data"]};function ki(e,t){return ge(e,new Rt.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,s){return Rt.isNode&&A.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Li(e){return A.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Fi(e){const t={},n=Object.keys(e);let r;const o=n.length;let s;for(r=0;r<o;r++)s=n[r],t[s]=e[s];return t}function er(e){function t(n,r,o,s){let i=n[s++];const l=Number.isFinite(+i),a=s>=n.length;return i=!i&&A.isArray(o)?o.length:i,a?(A.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!l):((!o[i]||!A.isObject(o[i]))&&(o[i]=[]),t(n,r,o[i],s)&&A.isArray(o[i])&&(o[i]=Fi(o[i])),!l)}if(A.isFormData(e)&&A.isFunction(e.entries)){const n={};return A.forEachEntry(e,(r,o)=>{t(Li(r),o,n,0)}),n}return null}function Ni(e,t,n){if(A.isString(e))try{return(t||JSON.parse)(e),A.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Qe={transitional:tr,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=A.isObject(t);if(s&&A.isHTMLForm(t)&&(t=new FormData(t)),A.isFormData(t))return o&&o?JSON.stringify(er(t)):t;if(A.isArrayBuffer(t)||A.isBuffer(t)||A.isStream(t)||A.isFile(t)||A.isBlob(t))return t;if(A.isArrayBufferView(t))return t.buffer;if(A.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ki(t,this.formSerializer).toString();if((l=A.isFileList(t))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return ge(l?{"files[]":t}:t,a&&new a,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),Ni(t)):t}],transformResponse:[function(t){const n=this.transitional||Qe.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&A.isString(t)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(l){if(i)throw l.name==="SyntaxError"?G.from(l,G.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rt.classes.FormData,Blob:Rt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],e=>{Qe.headers[e]={}});const Ze=Qe,Bi=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Di=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||t[n]&&Bi[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},nr=Symbol("internals");function ee(e){return e&&String(e).trim().toLowerCase()}function be(e){return e===!1||e==null?e:A.isArray(e)?e.map(be):String(e)}function Ii(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const ji=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function tn(e,t,n,r,o){if(A.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!A.isString(t)){if(A.isString(r))return t.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(t)}}function vi(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Ui(e,t){const n=A.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,s,i){return this[r].call(this,t,o,s,i)},configurable:!0})})}class xe{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function s(l,a,h){const u=ee(a);if(!u)throw new Error("header name must be a non-empty string");const f=A.findKey(o,u);(!f||o[f]===void 0||h===!0||h===void 0&&o[f]!==!1)&&(o[f||a]=be(l))}const i=(l,a)=>A.forEach(l,(h,u)=>s(h,u,a));return A.isPlainObject(t)||t instanceof this.constructor?i(t,n):A.isString(t)&&(t=t.trim())&&!ji(t)?i(Di(t),n):t!=null&&s(n,t,r),this}get(t,n){if(t=ee(t),t){const r=A.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return Ii(o);if(A.isFunction(n))return n.call(this,o,r);if(A.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ee(t),t){const r=A.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||tn(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function s(i){if(i=ee(i),i){const l=A.findKey(r,i);l&&(!n||tn(r,r[l],l,n))&&(delete r[l],o=!0)}}return A.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const s=n[r];(!t||tn(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,r={};return A.forEach(this,(o,s)=>{const i=A.findKey(r,s);if(i){n[i]=be(o),delete n[s];return}const l=t?vi(s):String(s).trim();l!==s&&delete n[s],n[l]=be(o),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return A.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&A.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[nr]=this[nr]={accessors:{}}).accessors,o=this.prototype;function s(i){const l=ee(i);r[l]||(Ui(o,i),r[l]=!0)}return A.isArray(t)?t.forEach(s):s(t),this}}xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),A.reduceDescriptors(xe.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}}),A.freezeMethods(xe);const Ot=xe;function en(e,t){const n=this||Ze,r=t||n,o=Ot.from(r.headers);let s=r.data;return A.forEach(e,function(l){s=l.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function rr(e){return!!(e&&e.__CANCEL__)}function ne(e,t,n){G.call(this,e??"canceled",G.ERR_CANCELED,t,n),this.name="CanceledError"}A.inherits(ne,G,{__CANCEL__:!0});function qi(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new G("Request failed with status code "+n.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const zi=Rt.isStandardBrowserEnv?function(){return{write:function(n,r,o,s,i,l){const a=[];a.push(n+"="+encodeURIComponent(r)),A.isNumber(o)&&a.push("expires="+new Date(o).toGMTString()),A.isString(s)&&a.push("path="+s),A.isString(i)&&a.push("domain="+i),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Hi(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Yi(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function or(e,t){return e&&!Hi(t)?Yi(e,t):t}const Wi=Rt.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function o(s){let i=s;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(i){const l=A.isString(i)?o(i):i;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function $i(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Vi(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,s=0,i;return t=t!==void 0?t:1e3,function(a){const h=Date.now(),u=r[s];i||(i=h),n[o]=a,r[o]=h;let f=s,d=0;for(;f!==o;)d+=n[f++],f=f%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),h-i<t)return;const b=u&&h-u;return b?Math.round(d*1e3/b):void 0}}function ir(e,t){let n=0;const r=Vi(50,250);return o=>{const s=o.loaded,i=o.lengthComputable?o.total:void 0,l=s-n,a=r(l),h=s<=i;n=s;const u={loaded:s,total:i,progress:i?s/i:void 0,bytes:l,rate:a||void 0,estimated:a&&i&&h?(i-s)/a:void 0,event:o};u[t?"download":"upload"]=!0,e(u)}}const nn={http:Ai,xhr:typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,r){let o=e.data;const s=Ot.from(e.headers).normalize(),i=e.responseType;let l;function a(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}let h;A.isFormData(o)&&(Rt.isStandardBrowserEnv||Rt.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?A.isString(h=s.getContentType())&&s.setContentType(h.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let u=new XMLHttpRequest;if(e.auth){const y=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+g))}const f=or(e.baseURL,e.url);u.open(e.method.toUpperCase(),Qn(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function d(){if(!u)return;const y=Ot.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),O={data:!i||i==="text"||i==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:y,config:e,request:u};qi(function(I){n(I),a()},function(I){r(I),a()},O),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(r(new G("Request aborted",G.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new G("Network Error",G.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const O=e.transitional||tr;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),r(new G(g,O.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,e,u)),u=null},Rt.isStandardBrowserEnv){const y=Wi(f)&&e.xsrfCookieName&&zi.read(e.xsrfCookieName);y&&s.set(e.xsrfHeaderName,y)}o===void 0&&s.setContentType(null),"setRequestHeader"in u&&A.forEach(s.toJSON(),function(g,O){u.setRequestHeader(O,g)}),A.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),i&&i!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",ir(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",ir(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=y=>{u&&(r(!y||y.type?new ne(null,e,u):y),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const b=$i(f);if(b&&Rt.protocols.indexOf(b)===-1){r(new G("Unsupported protocol "+b+":",G.ERR_BAD_REQUEST,e));return}u.send(o||null)})}};A.forEach(nn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const sr=e=>`- ${e}`,Ji=e=>A.isFunction(e)||e===null||e===!1,lr={getAdapter:e=>{e=A.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let s=0;s<t;s++){n=e[s];let i;if(r=n,!Ji(n)&&(r=nn[(i=String(n)).toLowerCase()],r===void 0))throw new G(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([l,a])=>`adapter ${l} `+(a===!1?"is not supported by the environment":"is not available in the build"));let i=t?s.length>1?`since :
`+s.map(sr).join(`
`):" "+sr(s[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:nn};function rn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ne(null,e)}function ar(e){return rn(e),e.headers=Ot.from(e.headers),e.data=en.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),lr.getAdapter(e.adapter||Ze.adapter)(e).then(function(r){return rn(e),r.data=en.call(e,e.transformResponse,r),r.headers=Ot.from(r.headers),r},function(r){return rr(r)||(rn(e),r&&r.response&&(r.response.data=en.call(e,e.transformResponse,r.response),r.response.headers=Ot.from(r.response.headers))),Promise.reject(r)})}const ur=e=>e instanceof Ot?e.toJSON():e;function Vt(e,t){t=t||{};const n={};function r(h,u,f){return A.isPlainObject(h)&&A.isPlainObject(u)?A.merge.call({caseless:f},h,u):A.isPlainObject(u)?A.merge({},u):A.isArray(u)?u.slice():u}function o(h,u,f){if(A.isUndefined(u)){if(!A.isUndefined(h))return r(void 0,h,f)}else return r(h,u,f)}function s(h,u){if(!A.isUndefined(u))return r(void 0,u)}function i(h,u){if(A.isUndefined(u)){if(!A.isUndefined(h))return r(void 0,h)}else return r(void 0,u)}function l(h,u,f){if(f in t)return r(h,u);if(f in e)return r(void 0,h)}const a={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(h,u)=>o(ur(h),ur(u),!0)};return A.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=a[u]||o,d=f(e[u],t[u],u);A.isUndefined(d)&&f!==l||(n[u]=d)}),n}const hr="1.6.0",on={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{on[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const fr={};on.transitional=function(t,n,r){function o(s,i){return"[Axios v"+hr+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,l)=>{if(t===!1)throw new G(o(i," has been removed"+(n?" in "+n:"")),G.ERR_DEPRECATED);return n&&!fr[i]&&(fr[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,i,l):!0}};function Xi(e,t,n){if(typeof e!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const s=r[o],i=t[s];if(i){const l=e[s],a=l===void 0||i(l,s,e);if(a!==!0)throw new G("option "+s+" must be "+a,G.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new G("Unknown option "+s,G.ERR_BAD_OPTION)}}const sn={assertOptions:Xi,validators:on},Bt=sn.validators;class Ae{constructor(t){this.defaults=t,this.interceptors={request:new Zn,response:new Zn}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Vt(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&sn.assertOptions(r,{silentJSONParsing:Bt.transitional(Bt.boolean),forcedJSONParsing:Bt.transitional(Bt.boolean),clarifyTimeoutError:Bt.transitional(Bt.boolean)},!1),o!=null&&(A.isFunction(o)?n.paramsSerializer={serialize:o}:sn.assertOptions(o,{encode:Bt.function,serialize:Bt.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&A.merge(s.common,s[n.method]);s&&A.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=Ot.concat(i,s);const l=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(a=a&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const h=[];this.interceptors.response.forEach(function(g){h.push(g.fulfilled,g.rejected)});let u,f=0,d;if(!a){const y=[ar.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,h),d=y.length,u=Promise.resolve(n);f<d;)u=u.then(y[f++],y[f++]);return u}d=l.length;let b=n;for(f=0;f<d;){const y=l[f++],g=l[f++];try{b=y(b)}catch(O){g.call(this,O);break}}try{u=ar.call(this,b)}catch(y){return Promise.reject(y)}for(f=0,d=h.length;f<d;)u=u.then(h[f++],h[f++]);return u}getUri(t){t=Vt(this.defaults,t);const n=or(t.baseURL,t.url);return Qn(n,t.params,t.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(t){Ae.prototype[t]=function(n,r){return this.request(Vt(r||{},{method:t,url:n,data:(r||{}).data}))}}),A.forEach(["post","put","patch"],function(t){function n(r){return function(s,i,l){return this.request(Vt(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}Ae.prototype[t]=n(),Ae.prototype[t+"Form"]=n(!0)});const Se=Ae;class ln{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(l=>{r.subscribe(l),s=l}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},t(function(s,i,l){r.reason||(r.reason=new ne(s,i,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new ln(function(o){t=o}),cancel:t}}}const Gi=ln;function Ki(e){return function(n){return e.apply(null,n)}}function Qi(e){return A.isObject(e)&&e.isAxiosError===!0}const an={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(an).forEach(([e,t])=>{an[t]=e});const Zi=an;function cr(e){const t=new Se(e),n=Dn(Se.prototype.request,t);return A.extend(n,Se.prototype,t,{allOwnKeys:!0}),A.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return cr(Vt(e,o))},n}const ct=cr(Ze);ct.Axios=Se,ct.CanceledError=ne,ct.CancelToken=Gi,ct.isCancel=rr,ct.VERSION=hr,ct.toFormData=ge,ct.AxiosError=G,ct.Cancel=ct.CanceledError,ct.all=function(t){return Promise.all(t)},ct.spread=Ki,ct.isAxiosError=Qi,ct.mergeConfig=Vt,ct.AxiosHeaders=Ot,ct.formToJSON=e=>er(A.isHTMLForm(e)?new FormData(e):e),ct.getAdapter=lr.getAdapter,ct.HttpStatusCode=Zi,ct.default=ct;const ts=ct;function dr(e){if(e.length===2)return new St(e[0],e[1]);if(e.length===3)return new St(e[0],e[1],e[2]);if(e.length>4)return new St(e[0],e[1],e[2],...e.slice(3));throw new Error("Error: the length of array is not correct")}function mr(e){let t=[];for(let n=0;n<e.length;n++){if(e[n]==null)continue;let r=dr(e[n]);t.push(r)}return t}function es(e){let t=mr(e);return new qe(t)}function ns(e){return ts.get(e)}function rs(e){let t=[];return e.forEach(n=>{t.push(n.geometry.coordinates)}),t}function os(e){let t=e,n=[];for(let r=0;r<t.length;r++){let o;for(let s=0;s<t[r].length;s++)o=t[r][s];n.push(o)}return n}const is=Object.freeze(Object.defineProperty({__proto__:null,GeoFeatures2Arr:rs,GeoPolygons2SimpleArr:os,createMultiPointFromArr:es,createPointListFromArr:mr,cretePointFromArr:dr,readDataFromGeoJSON:ns},Symbol.toStringTag,{value:"Module"}));class un{constructor(t,n){Z(this,"MBR");Z(this,"data");Z(this,"shape");Z(this,"rows");Z(this,"cols");Z(this,"bands");this.MBR=t,this.data=n,this.shape=[n.length,n[0].length,n[0][0].length],[this.bands,this.rows,this.cols]=this.shape}getShape(){return[this.data.length,this.data[0].length,this.data[0][0].length]}getBand(t){return this.data[t]}get width(){return this.cols}get height(){return this.rows}get bandCount(){return this.bands}getSubGrid(t,n=[0]){let r=t[0],o=t[1],s=t[2],i=t[3],l=[];for(let a of n){let h=[];for(let u=r;u<=s;u++){let f=[];for(let d=o;d<=i;d++)f.push(this.data[a][u][d]);h.push(f)}l.push(h)}return l}fillInvalidValue(t){let n=this.data[t],r=0,o=0;for(let i=0;i<this.rows;i++)for(let l=0;l<this.cols;l++){let a=n[i][l];a!==0&&(r+=a,o++)}let s=r/o;for(let i=0;i<this.rows;i++)for(let l=0;l<this.cols;l++){let a=n[i][l];(a===0||a===-9999||a===999999)&&(n[i][l]=s)}}getSubGridObj(t,n=[0]){let r=t[0],o=t[1],s=t[2],i=t[3],l=[];for(let h of n){let u=[];for(let f=r;f<=s;f++){let d=[];for(let b=o;b<=i;b++)d.push(this.data[h][f][b]);u.push(d)}l.push(u)}return new un(t,l)}ConvertToGridMBR(t){let n=t[0],r=t[1],o=t[2],s=t[3],i=this.getGridCoord([n,r]),l=this.getGridCoord([o,s]);if(i===null||l===null)return null;{let a=i[0],h=i[1],u=l[0],f=l[1];return[a,h,u,f]}}getGridCoord(t){if(Ye(t,this.MBR))return null;{let n=t[0],r=t[1],o=this.MBR[0],s=this.MBR[1],i=this.MBR[2],l=this.MBR[3],a=Math.floor((r-s)/(l-s)*this.rows),h=Math.floor((n-o)/(i-o)*this.cols);return[a,h]}}getCoordByGridCoord(t){let n=t[0],r=t[1],o=this.MBR[0],s=this.MBR[1],i=this.MBR[2],l=this.MBR[3],a=(r+.5)/this.cols*(i-o)+o,h=(n+.5)/this.rows*(l-s)+s;return[a,h]}getBandStatistics(t){let n=this.data[t],r=n[0][0],o=n[0][0],s=0;for(let l=0;l<this.rows;l++)for(let a=0;a<this.cols;a++){let h=n[l][a];h>r&&(r=h),h<o&&(o=h),s+=h}let i=s/(this.rows*this.cols);return{max:r,min:o,mean:i}}binarization(t,n){let r=this.data[t],o=[];for(let s=0;s<this.rows;s++){let i=[];for(let l=0;l<this.cols;l++)r[s][l]<n?i.push(0):i.push(1);o.push(i)}return o}getCoutourCode(t,n,r){let o=this.binarization(t,n),s=[];for(let i=0;i<this.rows-1;i++){let l=[];for(let a=0;a<this.cols-1;a++){let h=0;h+=o[i][a]*8,h+=o[i][a+1]*4,h+=o[i+1][a+1]*2,h+=o[i+1][a]*1,l.push(h)}s.push(l)}if(r){for(let a=0;a<s.length;a++){let h=s[a];h.unshift(h[0]),h.push(h[h.length-1])}let i=s[0],l=s[s.length-1];s.unshift(i),s.push(l)}return s}getMean(t){let n=this.data[t],r=0;for(let o=0;o<this.rows;o++)for(let s=0;s<this.cols;s++)r+=n[o][s];return r/(this.rows*this.cols)}getSorted1DArray(t){let n=this.data[t],r=[];for(let o=0;o<this.rows;o++)for(let s=0;s<this.cols;s++)r.push(n[o][s]);return r.sort((o,s)=>o-s),r}}function ss(e,t,n){let r=e.data[t],o=[];for(let s=0;s<e.rows;s++){let i=[];for(let l=0;l<e.cols;l++)r[s][l]<n?i.push(0):i.push(1);o.push(i)}return o}function ls(e,t){let n=e.rows*e.cols,r=as(n)+3;(t>r||t<0)&&(t=r);let o=[0,0,e.rows-1,e.cols-1];return re(o,0,t)}function re(e,t,n){let r={boundary:e,children:[],depth:t,maxDepth:n,isLeaf:!1,isDivided:!1};if(t===n-1)return r.isLeaf=!0,r;{r.isDivided=!0;let o=e[0],s=e[1],i=e[2],l=e[3],a=(o+i)/2;a=Math.floor(a);let h=(s+l)/2;h=Math.floor(h);let u=[o,h,a,l],f=[a,h,i,l],d=[o,s,a,h],b=[a,s,i,h],y=re(u,t+1,n),g=re(f,t+1,n),O=re(d,t+1,n),P=re(b,t+1,n);return r.children.push(y),r.children.push(g),r.children.push(O),r.children.push(P),r}}function as(e){let t=0,n=1;for(;n<e;)n*=4,t++;return t}function us(e){let t=-1/0,n=1/0;for(let r=0;r<e.length;r++)for(let o=0;o<e[0].length;o++)e[r][o]>t&&(t=e[r][o]),e[r][o]<n&&(n=e[r][o]);for(let r=0;r<e.length;r++)for(let o=0;o<e[0].length;o++)(e[r][o]===t||e[r][o]===n)&&(e[r][o]=0)}const hs=Object.freeze(Object.defineProperty({__proto__:null,Grid:un,binarization:ss,deMaxMin:us,subdivide2QTree:ls},Symbol.toStringTag,{value:"Module"}));class Jt{constructor(t,n,r=10){Z(this,"capacity");Z(this,"boundary");Z(this,"points");Z(this,"northWest");Z(this,"northEast");Z(this,"southWest");Z(this,"southEast");Z(this,"isDivided");Z(this,"depth");Z(this,"maxDepth",10);this.capacity=n,this.boundary=t,this.points=[],this.isDivided=!1,this.northWest=null,this.northEast=null,this.southWest=null,this.southEast=null,this.depth=0,this.maxDepth=r}insert(t){return Ye(t,this.boundary)?!1:this.points.length<this.capacity&&this.depth<this.maxDepth?(this.points.push(t),!0):(this.isDivided||this.subdivide(),this.northEast.insert(t),this.northWest.insert(t),this.southEast.insert(t),this.southWest.insert(t),!0)}get pointsList(){return this.points.length===0?null:this.points}subdivide(){let t=this.boundary[0],n=this.boundary[1],r=this.boundary[2]-t,o=this.boundary[3]-n,s=new Jt([t,n+o/2,t+r/2,n+o],this.capacity),i=new Jt([t+r/2,n+o/2,t+r,n+o],this.capacity),l=new Jt([t,n,t+r/2,n+o/2],this.capacity),a=new Jt([t+r/2,n,t+r,n+o/2],this.capacity);this.northWest=s,this.northEast=i,this.southWest=l,this.southEast=a,this.isDivided=!0,this.depth++}queryRange(t){let n=[];if(!Rn(this.boundary,t))return n;for(let r=0;r<this.points.length;r++)Tn(this.points[r],t)&&n.push(this.points[r]);return this.northWest===null||(n.push(...this.northWest.queryRange(t)),n.push(...this.northEast.queryRange(t)),n.push(...this.southWest.queryRange(t)),n.push(...this.southEast.queryRange(t))),n}queryCircle(t,n=[]){let r=[];if(t.intersects(this.boundary))n.push(this.boundary);else return r;for(let o=0;o<this.points.length;o++)t.contains(this.points[o],45e8)&&r.push(this.points[o]);return this.northWest===null||(r.push(...this.northWest.queryCircle(t,n)),r.push(...this.northEast.queryCircle(t,n)),r.push(...this.southWest.queryCircle(t,n)),r.push(...this.southEast.queryCircle(t,n))),r}}const fs=Object.freeze(Object.defineProperty({__proto__:null,QuadTree:Jt},Symbol.toStringTag,{value:"Module"})),cs=Math.E;function hn(e,t,n){return(t-e)*(3-n*2)*n*n+e}function ds(e,t){let o=e,s=t;o*=3284157443,s^=o<<128|o>>256-128,s*=1911520717,o^=s<<128|s>>256-128,o*=2048419325;const i=o*(3.14159265/~(-1>>>1));return{x:Math.cos(i),y:Math.sin(i)}}function Me(e,t,n,r){const o=ds(e,t),s=n-e,i=r-t;return s*o.x+i*o.y}function ms(e,t){const n=Math.floor(e),r=n+1,o=Math.floor(t),s=o+1,i=e-n,l=t-o,a=Me(n,o,e,t),h=Me(r,o,e,t),u=hn(a,h,i),f=Me(n,s,e,t),d=Me(r,s,e,t),b=hn(f,d,i);return hn(u,b,l)}function ys(e,t){return Math.pow(cs,-Math.pow(Math.sqrt(e*e+t*t),1/2))*Math.sin(Math.sqrt(e*e+t*t))}function ps(e,t){return Math.sin(Math.sqrt(e*e+t*t))}function ws(e,t,n){const r=new Array(e).fill(0).map(()=>new Array(t).fill(0)),o=new Array(n).fill(0).map(()=>({x:Math.random()*e,y:Math.random()*t}));for(let s=0;s<e;s++)for(let i=0;i<t;i++){let l=1e5;for(let a=0;a<n;a++){const h=Math.sqrt(Math.pow(o[a].x-s,2)+Math.pow(o[a].y-i,2));h<l&&(l=h)}r[s][i]=l}return r}function gs(e,t,n,r="horizontal"){const o=new Array(e).fill(0).map(()=>new Array(t).fill(0)),s=Math.floor(e/n);for(let i=0;i<e;i++)for(let l=0;l<t;l++)r==="vertical"?o[i][l]=Math.floor(i/s)%2===0?1:0:r==="horizontal"?o[i][l]=Math.floor(l/s)%2===0?1:0:r==="diagonal"?o[i][l]=Math.floor((i+l)/s)%2===0?1:0:r==="all"&&(o[i][l]=Math.floor((i+l)/s)%2===0?1:0,o[i][l]+=Math.floor(i/s)%2===0?1:0,o[i][l]+=Math.floor(l/s)%2===0?1:0);return o}const bs=Object.freeze(Object.defineProperty({__proto__:null,Perlin:ms,Sin3D:ps,dampedSin3D:ys,worleyNoise:ws,zebraNoise:gs},Symbol.toStringTag,{value:"Module"}));var yr=(e=>(e[e.linear=0]="linear",e[e.square=1]="square",e[e.log=2]="log",e[e.power=3]="power",e[e.groupStretch=4]="groupStretch",e))(yr||{}),pr=(e=>(e[e.default=0]="default",e))(pr||{});function oe(e,t){return(e-t.min)/(t.max-t.min)}function wr(e,t){return Math.sqrt((e-t.min)/(t.max-t.min))}function gr(e,t){return Math.log((e-t.min)/(t.max-t.min)+1)}function br(e,t){return Math.pow((e-t.min)/(t.max-t.min),2)}function xr(e,t){let n=.1;return e<t.mean-n||e>t.mean+n?0:(e-t.min)/(t.max-t.min)}function Te(e,t){switch(e){case 0:return t?(n,r)=>1-oe(n,r):oe;case 1:return t?(n,r)=>1-wr(n,r):wr;case 2:return t?(n,r)=>1-gr(n,r):gr;case 3:return t?(n,r)=>1-br(n,r):br;case 4:return t?(n,r)=>1-xr(n,r):xr;default:throw new Error("未知的拉伸类型")}}function Ee(e,t,n=oe){let r=n(t,e),o=Math.floor(r*255);return`rgb(${o},${o},${o})`}function Ar(e,t,n=oe){let r=Math.floor(n(t[0],e[0])*255),o=Math.floor(n(t[1],e[1])*255),s=Math.floor(n(t[2],e[2])*255);return`rgb(${r},${o},${s})`}function xs(e,t){return(n,r)=>Ar(n,r,Te(e,t))}function As(e,t){return(n,r)=>Ee(n,r,Te(e,t))}const Sr=["#163544","#495a45","#767d58","#76a477","#d7bd7f","#d7221f"],Mr=["#ffffff00","#ff9a00","#3ec1d3","#6c5b7b","#355c7d","#f8b500","#119da4","#ff165d","#8ECFC9","#FFBE7A","#82B0D2","#BEB8DC","#E7DAD2","#119da4","#ff165d","#ffffff00"];function Ss(e,t,n,r=Sr,o=oe){let s=o(t,e),i=0;if(n===void 0)i=Math.floor(s*r.length);else for(let l=0;l<n.length;l++)if(s<n[l]){i=l;break}return r[i]}function Ms(e,t,n=Sr){return(r,o)=>Ss(r,o,t,n,Te(e))}function Tr(e,t=["#000000","#ffffff"]){return e===0?t[0]:t[1]}function Ts(e,t=Mr){return t[e]}function Es(e,t=0,n){let r=new Array(256).fill(0),o=Te(t);if(n===void 0){n={max:0,min:0,mean:0};for(let s=0;s<e.length;s++)for(let i=0;i<e[0].length;i++)n.max=Math.max(n.max,e[s][i]),n.min=Math.min(n.min,e[s][i]),n.mean+=e[s][i]}for(let s=0;s<e.length;s++)for(let i=0;i<e[0].length;i++){let l=o(e[s][i],n),a=Math.floor(l*255);r[a]+=1}return r}const _s=Object.freeze(Object.defineProperty({__proto__:null,CountourColorList:Mr,binaryColorBand:Tr,colorListType:pr,hist:Es,pseudoColorBandFactory:Ms,simpleColorBand:Ee,simpleColorBandFactory:As,simplePseudoColorBand:Ts,stretchType:yr,trueColorBand:Ar,trueColorBandFactory:xs},Symbol.toStringTag,{value:"Module"}));function Ps(e,t,n,r,o=Ee,s){let i=n.w/t[0].length,l=n.h/t.length,a=e.getContext("2d");if(a===null)throw new Error("无法获取canvas绘图上下文");for(let h=0;h<t.length;h++)for(let u=0;u<t[0].length;u++){let f=t[h][u],d=o(r,f);a.fillStyle=d,a.fillRect(n.x+u*i,n.y+h*l,i,l)}if(s){let[h,u,f,d]=s;a.strokeStyle="red",a.lineWidth=1,a.strokeRect(n.x+h*i,n.y+u*l,(f-h)*i,(d-u)*l)}}function Rs(e,t,n,r=Tr){let o=n.w/t[0].length,s=n.h/t.length,i=e.getContext("2d");if(i===null)throw new Error("无法获取canvas绘图上下文");for(let l=0;l<t.length;l++)for(let a=0;a<t[0].length;a++){let h=t[l][a],u=r(h);i.fillStyle=u,i.fillRect(n.x+a*o,n.y+l*s,o,s)}}function Os(e,t,n,r="white"){let o=n.w/t[0].length,s=n.h/t.length,i=e.getContext("2d");if(i===null)throw new Error("无法获取canvas绘图上下文");for(let l=0;l<t.length;l++)for(let a=0;a<t[0].length;a++){let h=t[l][a];Cs(h,{x:n.x+a*o,y:n.y+l*s,w:o,h:s},i,r)}}function Cs(e,t,n,r="white"){switch(n.strokeStyle=r,e){case 0:break;case 1:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 2:n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 3:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 4:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 5:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke(),n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 6:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 7:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke();break;case 8:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke();break;case 9:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 10:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke(),n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 11:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 12:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 13:n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 14:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break}}function ie(e,t,n,r,o=Ee,s,i){let l=e.getContext("2d");if(l===null)throw new Error("无法获取canvas绘图上下文");let h=r.getSubGridObj(n.boundary).getBandStatistics(0),u=h.mean;i?(i.max=Math.max(i.max,h.max),i.min=Math.min(i.min,h.min),i.mean=(i.mean+h.mean)/2):i=h,s||(s=u);let f=o(i,u);l.fillStyle=f,l.fillRect(t.x,t.y,t.w,t.h),requestAnimationFrame(()=>{if(n.isDivided){let d=[{x:t.x+t.w/2,y:t.y,w:t.w/2,h:t.h/2},{x:t.x+t.w/2,y:t.y+t.h/2,w:t.w/2,h:t.h/2},{x:t.x,y:t.y,w:t.w/2,h:t.h/2},{x:t.x,y:t.y+t.h/2,w:t.w/2,h:t.h/2}];ie(e,d[0],n.children[0],r,o,s,i),ie(e,d[1],n.children[1],r,o,s,i),ie(e,d[2],n.children[2],r,o,s,i),ie(e,d[3],n.children[3],r,o,s,i)}})}function ks(e,t,n,r={color:"black",backgroundColor:"rgba(0,0,0,0)"},o=!1,s){let i=e.getContext("2d");if(i===null)throw new Error("无法获取canvas绘图上下文");s||(s={max:Math.max(...n),min:Math.min(...n),mean:n.reduce((a,h)=>a+h)/n.length}),i.fillStyle=r.backgroundColor,i.fillRect(t.x,t.y,t.w,t.h),i.fillStyle=r.color,i.lineWidth=1;let l=2;for(let a=0;a<n.length;a++){let h=t.x+t.w*a/n.length,u=t.y+t.h*(1-(n[a]-s.min)/(s.max-s.min));i.beginPath(),i.arc(h,u,l,0,2*Math.PI),i.fill()}i.strokeStyle=r.color,i.beginPath(),i.moveTo(t.x,t.y+t.h*(1-(n[0]-s.min)/(s.max-s.min)));for(let a=0;a<n.length;a++){let h=t.x+t.w*a/n.length,u=t.y+t.h*(1-(n[a]-s.min)/(s.max-s.min));i.lineTo(h,u)}if(i.stroke(),i.strokeStyle="white",i.beginPath(),i.moveTo(t.x,t.y+12),i.lineTo(t.x+t.w,t.y+12),i.stroke(),i.beginPath(),i.moveTo(t.x,t.y+t.h),i.lineTo(t.x+t.w,t.y+t.h),i.stroke(),i.beginPath(),i.moveTo(t.x,t.y+t.h/2),i.lineTo(t.x+t.w,t.y+t.h/2),i.stroke(),i.fillText(s.max.toFixed(2),t.x,t.y+12),i.fillText(s.min.toFixed(2),t.x,t.y+t.h),i.fillText(s.mean.toFixed(2),t.x,t.y+t.h/2),o){i.fillStyle="green",i.font="12px serif";for(let a=0;a<n.length;a+=16){let h=t.x+t.w*a/n.length,u=t.y+t.h*(1-(n[a]-s.min)/(s.max-s.min));i.fillText(n[a].toFixed(2),h,u)}}}function Ls(e,t,n,r={color:"black",backgroundColor:"rgba(0,0,0,0)"},o,s=!1){let i=e.getContext("2d");if(i===null)throw new Error("无法获取canvas绘图上下文");o||(o={max:Math.max(...n),min:Math.min(...n),mean:n.reduce((a,h)=>a+h)/n.length}),i.fillStyle=r.backgroundColor,i.fillRect(t.x,t.y,t.w,t.h),i.fillStyle=r.color;let l=t.w/n.length;for(let a=0;a<n.length;a++){let h=t.x+l*a,u=t.y+t.h*(1-(n[a]-o.min)/(o.max-o.min));i.fillRect(h,u,l,t.h-u+t.y)}s&&(i.fillStyle="green",i.font="12px serif",i.fillText(o.max.toFixed(2),t.x,t.y+12),i.fillText(o.min.toFixed(2),t.x,t.y+t.h),i.fillText(o.mean.toFixed(2),t.x,t.y+t.h/2)),i.strokeStyle="white",i.beginPath(),i.moveTo(t.x,t.y+12),i.lineTo(t.x+t.w,t.y+12),i.stroke(),i.beginPath(),i.moveTo(t.x,t.y+t.h),i.lineTo(t.x+t.w,t.y+t.h),i.stroke(),i.beginPath(),i.moveTo(t.x,t.y+t.h/2),i.lineTo(t.x+t.w,t.y+t.h/2),i.stroke()}function Fs(e,t,n,r={color:"black",font:"12px serif"}){let o=e.getContext("2d");if(o===null)throw new Error("无法获取canvas绘图上下文");o.fillStyle=r.color,o.font=r.font,o.fillText(n,t.x,t.y)}function Ns(e,t,n,r,o,s){let i=r.w/t.width,l=r.h/t.height,a=e.getContext("2d");if(a===null)throw new Error("无法获取canvas绘图上下文");let h=[],u=[];n.forEach(f=>{h.push(t.getBand(f)),u.push(t.getBandStatistics(f))});for(let f=0;f<t.height;f++)for(let d=0;d<t.width;d++){let b=n.map(g=>h[g][f][d]),y=o(u,b);a.fillStyle=y,a.fillRect(r.x+d*i,r.y+f*l,i,l)}if(s){let[f,d,b,y]=s;a.strokeStyle="red",a.lineWidth=1,a.strokeRect(r.x+f*i,r.y+d*l,(b-f)*i,(y-d)*l)}a.strokeStyle="red",a.lineWidth=1,a.beginPath(),a.moveTo(r.x+r.w/2,r.y+r.h/2-10),a.lineTo(r.x+r.w/2,r.y+r.h/2+10),a.stroke(),a.beginPath(),a.moveTo(r.x+r.w/2-10,r.y+r.h/2),a.lineTo(r.x+r.w/2+10,r.y+r.h/2),a.stroke()}function Er(e,t,n,r={color:"green",width:4,backgroundColor:"rgba(0,0,0,1)"}){let o=e.getContext("2d");if(o===null)throw new Error("无法获取canvas绘图上下文");o.fillStyle=r.backgroundColor,o.fillRect(t.x,t.y,t.w,t.h),o.fillStyle=r.color,o.fillRect(t.x,t.y,t.w*n/100,t.h),o.strokeStyle="white",o.lineWidth=1;for(let s=0;s<10;s++)o.beginPath(),o.moveTo(t.x+t.w*s/10,t.y),o.lineTo(t.x+t.w*s/10,t.y+t.h),o.stroke();t.h>=20&&t.w>=40&&(o.fillStyle="white",o.font="20px serif",o.fillText(n+"%",t.x+t.w/2-20,t.y+t.h/2+6))}function Bs(){let e=document.createElement("canvas");e.width=200,e.height=20,document.body.appendChild(e);let t={x:0,y:0,w:200,h:20},n=0;setInterval(()=>{Er(e,t,n),n+=1,n>100&&(n=0)},100)}const Ds=Object.freeze(Object.defineProperty({__proto__:null,binDrawGrid2d:Rs,drawCountour:Os,drawGrid2d:Ps,drawProgress:Er,drawQTree2d:ie,drawSample:ks,drawSample2:Ls,drawText:Fs,drawTrueColorGrid2d:Ns,testProgress:Bs},Symbol.toStringTag,{value:"Module"}));function Is(e,t,n,r,o=1,s=1){let i=new Array(t),l=(r-n)/t;for(let a=0;a<t;a++)i[a]=e(2*Math.PI*o*(n+a*l))*s;return i}function _e(e,t){return{real:e.real*t.real-e.imag*t.imag,imag:e.real*t.imag+e.imag*t.real}}function _r(e,t){return{real:e.real+t.real,imag:e.imag+t.imag}}function Pr(e,t){return{real:e.real-t.real,imag:e.imag-t.imag}}function Rr(e,t){let n=-2*Math.PI*e/t;return{real:Math.cos(n),imag:Math.sin(n)}}function js(e){return e.imag*=-1,e}function vs(e,t){let n=[];for(let r=0;r<t;r++)n.push({real:e[r],imag:0});return n}function Or(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=e[Us(r,t)];return n}function Us(e,t){let n=e.toString(2);return n=n.split("").reverse().join(""),n=n+"0".repeat(Math.log2(t)-n.length),parseInt(n,2)}function Cr(e){let t=e.length,n=vs(e,t),o=Or(n).slice();for(let s=1;s<Math.log2(t)+1;s++){let i=Math.pow(2,s),l=Rr(1,i);for(let a=0;a<t;a+=i){let h={real:1,imag:0};for(let u=0;u<i/2;u++){let f=_e(h,o[a+u+i/2]),d=o[a+u];o[a+u]=_r(d,f),o[a+u+i/2]=Pr(d,f),h=_e(h,l)}}}return o}function qs(e){let n=fn(e).map(o=>o.map(s=>Math.sqrt(s.real*s.real+s.imag*s.imag)));return Ur(fn(n,"column"))}function kr(e){let t=e.length,r=Or(e).slice();for(let o=1;o<Math.log2(t)+1;o++){let s=Math.pow(2,o),i=Rr(-1,s);for(let l=0;l<t;l+=s){let a={real:1,imag:0};for(let h=0;h<s/2;h++){let u=_e(a,r[l+h+s/2]),f=r[l+h];r[l+h]=_r(f,u),r[l+h+s/2]=Pr(f,u),a=_e(a,i)}}}for(let o=0;o<t;o++)r[o].real/=t,r[o].imag/=t;return r}function Lr(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=Ir(e[r]);return n}function Fr(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=e[r].real;return n}function zs(e,t="row"){return t==="row"?Nr(e):Pe(Nr(Xt(e)))}function Nr(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=Fr(e[r]);return n}function fn(e,t="row"){return t==="row"?Br(e):Xt(Br(Pe(e)))}function Br(e){let t=e[0].length,n=e.length;if(Math.log2(t)%1!==0){let o=Math.pow(2,Math.ceil(Math.log2(t)));for(let s=0;s<n;s++)e[s]=e[s].concat(new Array(o-t).fill(0))}let r=new Array(n);for(let o=0;o<n;o++)r[o]=Cr(e[o]);return r}function Hs(e,t="row"){return t==="row"?Dr(e):Xt(Dr(Xt(e)))}function Dr(e){let t=e[0].length,n=e.length;if(Math.log2(t)%1!==0){let o=Math.pow(2,Math.ceil(Math.log2(t)));for(let s=0;s<n;s++)e[s]=e[s].concat(new Array(o-t).fill({real:0,imag:0}))}let r=new Array(n);for(let o=0;o<n;o++)r[o]=kr(e[o]);return r}function Pe(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++){n[r]=new Array(t);for(let o=0;o<t;o++)n[r][o]=e[o][r]}return n}function Xt(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++){n[r]=new Array(t);for(let o=0;o<t;o++)n[r][o]=e[o][r]}return n}function Ir(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=e[r].imag;return n}function Ys(e,t="row"){return t==="row"?Lr(e):Pe(Lr(Xt(e)))}function jr(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=e[r].real;return n}function vr(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=jr(e[r]);return n}function Ws(e,t="row"){return t==="row"?vr(e):Pe(vr(Xt(e)))}function Ur(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++){n[r]=new Array(t);for(let o=0;o<t;o++)n[r][o]=e[(r+t/2)%t][(o+t/2)%t]}return n}const $s=Object.freeze(Object.defineProperty({__proto__:null,FFT:Cr,FFT2:fn,FFTImag:Ir,FFTImag2:Ys,FFTReal:jr,FFTReal2:Ws,FFTShift:Ur,IFFT:kr,IFFT2:Hs,IFFTReal:Fr,IFFTReal2:zs,conj:js,fastFFT2:qs,sample:Is},Symbol.toStringTag,{value:"Module"}));lt.CGUtils=Po,lt.Colors=_s,lt.Coverage=hs,lt.Delaunay=jo,lt.Fourier=$s,lt.Geometry=wo,lt.Measuration=Ao,lt.Meta=is,lt.Noise=bs,lt.QuadTree=fs,lt.Reference=fo,lt.Renderer=Ds,lt.Shell=qo,lt.Unit=lo,lt.Utils=ro,Object.defineProperty(lt,Symbol.toStringTag,{value:"Module"})});
