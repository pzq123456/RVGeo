(function(w,tt){typeof exports=="object"&&typeof module<"u"?tt(exports):typeof define=="function"&&define.amd?define(["exports"],tt):(w=typeof globalThis<"u"?globalThis:w||self,tt(w.RVGeo={}))})(this,function(w){"use strict";var ms=Object.defineProperty;var ws=(w,tt,Bt)=>tt in w?ms(w,tt,{enumerable:!0,configurable:!0,writable:!0,value:Bt}):w[tt]=Bt;var V=(w,tt,Bt)=>(ws(w,typeof tt!="symbol"?tt+"":tt,Bt),Bt);const tt=Math.PI/180,Bt=180/Math.PI,dt=63710088e-1,Ee={centimeters:dt*100,centimetres:dt*100,degrees:360/(2*Math.PI),feet:dt*3.28084,inches:dt*39.37,kilometers:dt/1e3,kilometres:dt/1e3,meters:dt,metres:dt,miles:dt/1609.344,millimeters:dt*1e3,millimetres:dt*1e3,nauticalmiles:dt/1852,radians:1,yards:dt*1.0936},Te={centimeters:1*100,centimetres:1*100,degrees:360/(2*Math.PI)*1/dt,feet:1*3.28084,inches:1*39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1*1e3,millimetres:1*1e3,nauticalmiles:1/1852,radians:1/dt,yards:1*1.0936},Se={acres:247105e-9,centimeters:1e4,centimetres:1e4,squaremeters:1,squaremetres:1,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,squarekilometers:1e-6,squarekilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ii(e,t="kilometers"){const n=Ee[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Ci(e,t="kilometers"){const n=Ee[t];if(!n)throw new Error(t+" units is invalid");return e/n}function Ie(e){return e%360*Math.PI/180}function Fi(e){return e%(2*Math.PI)*180/Math.PI}function sn(e,t){const n=Te[t];if(!n)throw new Error(t+" units is invalid");return e/n}function an(e,t){const n=Te[t];if(!n)throw new Error(t+" units is invalid");return e*n}function ki(e,t,n){return an(sn(e,t),n)}function ln(e,t){const n=Se[t];if(!n)throw new Error(t+" units is invalid");return e/n}function un(e,t){const n=Se[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Li(e,t,n){return un(ln(e,t),n)}function Bi(e,t,n,i){let r=e+t/60+n/3600;return(i==="S"||i==="W")&&(r=-r),r}function _i(e){let t=Math.floor(e),n=Math.floor((e-t)*60),i=((e-t)*60-n)*60;return[t,n,i,e<0?e<-180?"W":"S":e>180?"E":"N"]}const Ce=Math.PI,Fe=Ce/2,hn=Math.atan2,ke=Math.cos,ae=Math.sin,le=Math.sqrt,fn=1e-10;function Gi(e,t,n=fn){return!Array.isArray(e)&&!Array.isArray(t)?Math.abs(e-t)<n:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((i,r)=>Math.abs(i-t[r])<n):!1}function cn(e){return e>1?0:e<-1?Ce:Math.acos(e)}function dn(e){return e>1?Fe:e<-1?-Fe:Math.asin(e)}function Ri(e){return(e=ae(e/2))*e}function Ht(e){return[hn(e[1],e[0]),dn(e[2])]}function Kt(e,t=!0){t&&(e=[Ie(e[0]),Ie(e[1])]);const n=e[0],i=e[1],r=ke(i);return[r*ke(n),r*ae(n),ae(i)]}function ue(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function he(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ji(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Oi(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]}function yn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function qi(e){var t=le(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function mn(e){const t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]}function fe(e,t){let n=ue(e,t)/le(ue(e,e)*ue(t,t));return cn(n)}function Di(e,t){return e[0]*t[0]+e[1]*t[1]}function _t(e,t){return e[0]*t[1]-e[1]*t[0]}function Ni(e,t){return[e[0]+t[0],e[1]+t[1]]}function Yi(e,t){return[e[0]*t,e[1]*t]}function Wi(e){var t=le(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function Xi(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n,e[2]+(t[2]-e[2])*n]}function $i(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function zi(e,t){if(typeof t=="number"||t===void 0){const n=Math.pow(10,t===void 0?6:t);return Math.round(e*n)/n}return e}function Ui(e){return Number(e)===e&&e%1!==0}function Le(e,t=1){let n=e.slice();if(n.length<3)return 0;let i=0,r=n.length;n.forEach((o,s)=>{n[s]=o.map(a=>a*tt)});for(let o=0;o<r;o++){let s=(o+1)%r,a=(o+2)%r;i+=(n[o][0]-n[a][0])*Math.sin(n[s][1])}return i*=t*t/2,Math.abs(i)}function wn(e,t=1){let n=Pt.isLineString(e)?e.toXY():e;if(n.length<3)return 0;ut.isPoint(n[0])&&(n=n,n.map((o,s)=>{n[s]=o.toXY()})),n=n;let i=0,r=n.length-1;for(let o=0;o<n.length;o++)i+=(n[r][0]+n[o][0])*(n[r][1]-n[o][1]),r=o;return i=i*t*t/2,Math.abs(i)}function Qt(e,t,n=1){let i=Math.PI/180,r=e[0]*i,o=t[0]*i,s=Math.sin((t[0]-e[0])*i/2),a=Math.sin((t[1]-e[1])*i/2),h=s*s+Math.cos(r)*Math.cos(o)*a*a,u=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));return n*u}function Ji(e,t){let n=e[0]*tt,i=t[0]*tt,r=e[1]*tt,o=t[1]*tt;const s=Math.sin(o-r)*Math.cos(i),a=Math.cos(n)*Math.sin(i)-Math.sin(n)*Math.cos(i)*Math.cos(o-r);return(Math.atan2(s,a)*180/Math.PI+360)%360}function Vi(e,t){let n=e[0]*tt,i=e[1]*tt,r=t[0]*tt,o=t[1]*tt;const s=Math.cos(r)*Math.cos(o-i),a=Math.cos(r)*Math.sin(o-i),h=Math.atan2(Math.sin(n)+Math.sin(r),Math.sqrt((Math.cos(n)+s)*(Math.cos(n)+s)+a*a)),u=i+Math.atan2(a,Math.cos(n)+s);return[h/tt,u/tt]}function Hi(e,t,n){let i=e[0]*tt,r=e[1]*tt,o=t[0]*tt,s=t[1]*tt,a=Qt(e,t);const h=Math.sin((1-n)*a)/Math.sin(a),u=Math.sin(n*a)/Math.sin(a),f=h*Math.cos(i)*Math.cos(r)+u*Math.cos(o)*Math.cos(s),l=h*Math.cos(i)*Math.sin(r)+u*Math.cos(o)*Math.sin(s),c=h*Math.sin(i)+u*Math.sin(o),d=Math.atan2(c,Math.sqrt(f*f+l*l)),m=Math.atan2(l,f);return[d/tt,m/tt]}function Ki(e,t,n,i){const r=Kt(e),o=Kt(t),s=Kt(n),a=Kt(i),h=he(r,o),u=he(s,a),f=he(h,u),l=mn(f),c=yn(l,-1);if(d(c,r,o)||d(c,s,a))return Ht(c);if(d(l,r,o)||d(l,s,a))return Ht(l);return[0,0];function d(m,M,A){const p=fe(M,m),x=fe(A,m),B=fe(M,A);return Math.abs(p+x-B)<1e-6}}function Qi(e,t,n){let i=e[0]*tt,r=e[1]*tt,o=t*tt,s=6378137;const a=Math.asin(Math.sin(i)*Math.cos(n/s)+Math.cos(i)*Math.sin(n/s)*Math.cos(o)),h=r+Math.atan2(Math.sin(o)*Math.sin(n/s)*Math.cos(i),Math.cos(n/s)-Math.sin(i)*Math.sin(a));return[a/tt,h/tt]}function Zi(e,t,n,i,r,o,s=!1){r&&(e=r(e),t=r(t),n=r(n),i=r(i));let a=[t[0]-e[0],t[1]-e[1]],h=[i[0]-n[0],i[1]-n[1]],u=_t(a,h);if(u===0)return console.log("两条线段平行或共线"),null;let f=_t([n[0]-e[0],n[1]-e[1]],h)/u,l=_t([n[0]-e[0],n[1]-e[1]],a)/u;return!s&&(f<0||f>1||l<0||l>1)?(console.log("交点不在两条线段上"),null):o?o([e[0]+a[0]*f,e[1]+a[1]*f]):[e[0]+a[0]*f,e[1]+a[1]*f]}function tr(e,t,n,i,r=1,o=1){let s=new Array(t),a=(i-n)/t;for(let h=0;h<t;h++)s[h]=e(2*Math.PI*r*(n+h*a))*o;return s}function ce(e,t){return{real:e.real*t.real-e.imag*t.imag,imag:e.real*t.imag+e.imag*t.real}}function gn(e,t){return{real:e.real+t.real,imag:e.imag+t.imag}}function Mn(e,t){return{real:e.real-t.real,imag:e.imag-t.imag}}function bn(e,t){let n=-2*Math.PI*e/t;return{real:Math.cos(n),imag:Math.sin(n)}}function er(e){return e.imag*=-1,e}function nr(e,t){let n=[];for(let i=0;i<t;i++)n.push({real:e[i],imag:0});return n}function vn(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=e[ir(i,t)];return n}function ir(e,t){let n=e.toString(2);return n=n.split("").reverse().join(""),n=n+"0".repeat(Math.log2(t)-n.length),parseInt(n,2)}function pn(e){let t=e.length,n=nr(e,t),r=vn(n).slice();for(let o=1;o<Math.log2(t)+1;o++){let s=Math.pow(2,o),a=bn(1,s);for(let h=0;h<t;h+=s){let u={real:1,imag:0};for(let f=0;f<s/2;f++){let l=ce(u,r[h+f+s/2]),c=r[h+f];r[h+f]=gn(c,l),r[h+f+s/2]=Mn(c,l),u=ce(u,a)}}}return r}function rr(e){let n=Be(e).map(r=>r.map(o=>Math.sqrt(o.real*o.real+o.imag*o.imag)));return kn(Be(n,"column"))}function Pn(e){let t=e.length,i=vn(e).slice();for(let r=1;r<Math.log2(t)+1;r++){let o=Math.pow(2,r),s=bn(-1,o);for(let a=0;a<t;a+=o){let h={real:1,imag:0};for(let u=0;u<o/2;u++){let f=ce(h,i[a+u+o/2]),l=i[a+u];i[a+u]=gn(l,f),i[a+u+o/2]=Mn(l,f),h=ce(h,s)}}}for(let r=0;r<t;r++)i[r].real/=t,i[r].imag/=t;return i}function An(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=In(e[i]);return n}function xn(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=e[i].real;return n}function or(e,t="row"){return t==="row"?En(e):de(En(Nt(e)))}function En(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=xn(e[i]);return n}function Be(e,t="row"){return t==="row"?Tn(e):Nt(Tn(de(e)))}function Tn(e){let t=e[0].length,n=e.length;if(Math.log2(t)%1!==0){let r=Math.pow(2,Math.ceil(Math.log2(t)));for(let o=0;o<n;o++)e[o]=e[o].concat(new Array(r-t).fill(0))}let i=new Array(n);for(let r=0;r<n;r++)i[r]=pn(e[r]);return i}function sr(e,t="row"){return t==="row"?Sn(e):Nt(Sn(Nt(e)))}function Sn(e){let t=e[0].length,n=e.length;if(Math.log2(t)%1!==0){let r=Math.pow(2,Math.ceil(Math.log2(t)));for(let o=0;o<n;o++)e[o]=e[o].concat(new Array(r-t).fill({real:0,imag:0}))}let i=new Array(n);for(let r=0;r<n;r++)i[r]=Pn(e[r]);return i}function de(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++){n[i]=new Array(t);for(let r=0;r<t;r++)n[i][r]=e[r][i]}return n}function Nt(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++){n[i]=new Array(t);for(let r=0;r<t;r++)n[i][r]=e[r][i]}return n}function In(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=e[i].imag;return n}function ar(e,t="row"){return t==="row"?An(e):de(An(Nt(e)))}function Cn(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=e[i].real;return n}function Fn(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=Cn(e[i]);return n}function lr(e,t="row"){return t==="row"?Fn(e):de(Fn(Nt(e)))}function kn(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++){n[i]=new Array(t);for(let r=0;r<t;r++)n[i][r]=e[(i+t/2)%t][(r+t/2)%t]}return n}function ur(e,t){t.forEach(n=>{Object.getOwnPropertyNames(n.prototype).forEach(i=>{Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(n.prototype,i)||Object.create(null))})})}function Ln(e){return typeof e!="object"?!1:e.x&&e.y||e.lon&&e.lat||e.lng&&e.lat?!0:!!(e.X&&e.Y)}function hr(e,t){let n=0;return function(...i){const r=Date.now();r-n>t&&(e.apply(this,i),n=r)}}function _e(e,...t){for(let n=0,i=t.length;n<i;n++){const r=t[n];for(const o in r)e[o]=r[o]}return e}function fr(e){for(let t in e)delete e[t]}function cr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function dr(e){let t=[],n=e;for(;Array.isArray(n);)t.push(n.length),n=n[0];return t}function Bn(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?t.push(...Bn(i)):t.push(i)}return t}function _n(e,t){let n=[];for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?n.push(_n(r,t)):n.push(t[r])}return n}function yr(e,t){return e.forEach((n,i)=>{e[i]=n.concat(t[i])}),e}function mr(e,t){Array.isArray(t)||(t=[t]),t.forEach(i=>{if(i<0||i>=e[0].length)throw new Error("indexArray is illegal!")});let n=[];return e.forEach(i=>{let r=[];Array.isArray(t)?t.forEach(o=>{r.push(i[o])}):r.push(i[t]),n.push(r)}),n}function Gn(e,t){if(t>e)throw new Error("num must be less than length!");const n=[];for(;n.length<t;){const i=Math.floor(Math.random()*e);n.includes(i)||n.push(i)}return n}function wr(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}class gr{constructor(){V(this,"_events",{});V(this,"_asyncEvents",{})}on(t,n,i){return n.constructor.name==="AsyncFunction"?(this._asyncEvents[t]||(this._asyncEvents[t]=[]),this._asyncEvents[t].push({fn:n,context:i})):(this._events[t]||(this._events[t]=[]),this._events[t].push({fn:n,context:i})),this}off(t,n,i){if(!this._events[t])return this;if(this._events[t])if(!n&&!i)delete this._events[t];else{const r=this._events[t];for(let o=0;o<r.length;o++){const s=r[o];(!n||s.fn===n)&&(!i||s.context===i)&&(r.splice(o,1),o--)}}if(this._asyncEvents[t])if(!n&&!i)delete this._asyncEvents[t];else{const r=this._asyncEvents[t];for(let o=0;o<r.length;o++){const s=r[o];(!n||s.fn===n)&&(!i||s.context===i)&&(r.splice(o,1),o--)}}return this}once(t,n,i){const r=(...o)=>{n.apply(this,o),this.off(t,r)};return this.on(t,r,i)}emit(t,n){if(!this._events[t])return this;const i={type:t,target:this,...n};return this._events[t].slice().forEach(o=>{o.fn.call(o.context||this,i),o.once&&this.off(t,o.fn,o.context)}),this}async emitAsync(t,n,i){if(!this._asyncEvents[t])return;const r={type:t,target:this,...i},o=this._asyncEvents[t].slice();if(n==="parallel")await Promise.all(o.map(s=>s.fn.call(s.context||this,r)));else if(n==="series")for(const s of o)await s.fn.call(s.context||this,r);else n==="ignore"&&o.forEach(s=>s.fn.call(s.context||this,r))}listeners(t){return[...this._events[t]||[],...this._asyncEvents[t]||[]]}hasListeners(t){var n,i;return!!((n=this._events[t])!=null&&n.length||(i=this._asyncEvents[t])!=null&&i.length)}removeAllListeners(){return this._events={},this._asyncEvents={},this}static isAsyncListener(t){return t.fn.constructor.name==="AsyncFunction"}}function Mr(e){let t=e.length,n=0,i=0;for(let r=0;r<t;r++)n+=e[r][0],i+=e[r][1];return[n/t,i/t]}function br(e,t=1e-4,n=100,i){let r=[],o=i.length;if(o<e){console.log("样本数量小于分类数量");return}Gn(o,e).forEach(f=>{let l=i[f];r.push(l)});let a=1/0,h=0,u=[];for(;a>t&&h<n;){u=[];for(let l=0;l<e;l++)u.push([]);for(let l=0;l<o;l++){let c=1/0,d=0,m=i[l];for(let M=0;M<e;M++){let A=i[l],p=r[M],x=Qt(A,p);x<c&&(c=x,d=M)}u[d].push(m)}let f=[];for(let l=0;l<e;l++)f.push(Mr(u[l]));a=0;for(let l=0;l<e;l++){let c=r[l],d=f[l],m=Qt(c,d);m>a&&(a=m)}console.log(a),r=f,h++}return u}const vr=Object.prototype.hasOwnProperty;function pr(e){var t=1/0,n=1/0,i=-1/0,r=-1/0;function o(f){f!=null&&f.type&&vr.call(s,f.type)&&s[f.type](f)}const s={GeometryCollection:function(f){f.geometries.forEach(o)},Point:function(f){a(f.coordinates)},MultiPoint:function(f){f.coordinates.forEach(a)},LineString:function(f){h(f.arcs)},MultiLineString:function(f){f.arcs.forEach(h)},Polygon:function(f){f.arcs.forEach(h)},MultiPolygon:function(f){f.arcs.forEach(u)}};function a(f){var l=f[0],c=f[1];l<t&&(t=l),l>i&&(i=l),c<n&&(n=c),c>r&&(r=c)}function h(f){f.forEach(a)}function u(f){f.forEach(h)}for(let f in e)o(e[f]);return i>=t&&r>=n?[t,n,i,r]:void 0}function Pr(e,t,n,i=Array,r=null){for(var o=new i(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),s=e-1,a=0;a<e;++a)o[a]=r;function h(l){for(var c=t(l)&s,d=o[c],m=0;d!=r;){if(n(d,l))return!0;if(++m>=e)throw new Error("full hashset");d=o[c=c+1&s]}return o[c]=l,!0}function u(l){for(var c=t(l)&s,d=o[c],m=0;d!=r;){if(n(d,l))return!0;if(++m>=e)break;d=o[c=c+1&s]}return!1}function f(){for(var l=[],c=0,d=o.length;c<d;++c){var m=o[c];m!=r&&l.push(m)}return l}return{add:h,has:u,values:f}}function Ge(e,t,n,i=Array,r=null,o=Array){for(var s=new i(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),a=new o(e),h=e-1,u=0;u<e;++u)s[u]=r;function f(m,M){for(var A=t(m)&h,p=s[A],x=0;p!=r;){if(n(p,m))return a[A]=M;if(++x>=e)throw new Error("full hashmap");p=s[A=A+1&h]}return s[A]=m,a[A]=M,M}function l(m,M){for(var A=t(m)&h,p=s[A],x=0;p!=r;){if(n(p,m))return a[A];if(++x>=e)throw new Error("full hashmap");p=s[A=A+1&h]}return s[A]=m,a[A]=M,M}function c(m,M){for(var A=t(m)&h,p=s[A],x=0;p!=r;){if(n(p,m))return a[A];if(++x>=e)break;p=s[A=A+1&h]}return M}function d(){for(var m=[],M=0,A=s.length;M<A;++M){var p=s[M];p!=r&&m.push(p)}return m}return{set:f,maybeSet:l,get:c,keys:d}}function Gt(e,t){return e[0]===t[0]&&e[1]===t[1]}let Rn=new ArrayBuffer(16),jn=new Float64Array(Rn),ye=new Uint32Array(Rn);function Re(e){jn[0]=e[0],jn[1]=e[1];var t=ye[0]^ye[1];return t=t<<5^t>>7^ye[2]^ye[3],t&2147483647}function Ar(e){var t=e.coordinates,n=e.lines,i=e.rings,r=R(),o=new Int32Array(t.length),s=new Int32Array(t.length),a=new Int32Array(t.length),h=new Int8Array(t.length),u=0,f,l,c,d,m;for(f=0,l=t.length;f<l;++f)o[f]=s[f]=a[f]=-1;for(f=0,l=n.length;f<l;++f){var M=n[f],A=M[0],p=M[1];for(d=r[A],m=r[++A],++u,h[d]=1;++A<=p;)F(f,c=d,d=m,m=r[A]);++u,h[m]=1}for(f=0,l=t.length;f<l;++f)o[f]=-1;for(f=0,l=i.length;f<l;++f){var x=i[f],B=x[0]+1,_=x[1];for(c=r[_-1],d=r[B-1],m=r[B],F(f,c,d,m);++B<=_;)F(f,c=d,d=m,m=r[B])}function F(j,z,U,y){if(o[U]!==j){o[U]=j;var g=s[U];if(g>=0){var b=a[U];(g!==z||b!==y)&&(g!==y||b!==z)&&(++u,h[U]=1)}else s[U]=z,a[U]=y}}function R(){for(var j=Ge(t.length*1.4,Y,X,Int32Array,-1,Int32Array),z=new Int32Array(t.length),U=0,y=t.length;U<y;++U)z[U]=j.maybeSet(U,U);return z}function Y(j){return Re(t[j])}function X(j,z){return Gt(t[j],t[z])}o=s=a=null;var I=Pr(u*1.4,Re,Gt),W;for(f=0,l=t.length;f<l;++f)h[W=r[f]]&&I.add(t[W]);return I}function xr(e){var t=Ar(e),n=e.coordinates,i=e.lines,r=e.rings,o,s,a;for(s=0,a=i.length;s<a;++s)for(var h=i[s],u=h[0],f=h[1];++u<f;)t.has(n[u])&&(o={0:u,1:h[1]},h[1]=u,h=h.next=o);for(s=0,a=r.length;s<a;++s)for(var l=r[s],c=l[0],d=c,m=l[1],M=t.has(n[c]);++d<m;)t.has(n[d])&&(M?(o={0:d,1:l[1]},l[1]=d,l=l.next=o):(Er(n,c,m,m-d),n[m]=n[c],M=!0,d=c));return e}function Er(e,t,n,i){je(e,t,n),je(e,t,t+i),je(e,t+i,n)}function je(e,t,n){for(var i=t+(n---t>>1),r;t<i;++t,--n)r=e[t],e[t]=e[n],e[n]=r}function Tr(e){let t=e.coordinates,n=e.lines,i,r=e.rings,o,s=n.length+r.length,a,h;for(delete e.lines,delete e.rings,a=0,h=n.length;a<h;++a)for(i=n[a];i=i.next;)++s;for(a=0,h=r.length;a<h;++a)for(o=r[a];o=o.next;)++s;let u=Ge(s*2*1.4,Re,Gt),f=e.arcs=[];for(a=0,h=n.length;a<h;++a){i=n[a];do l(i);while(i=i.next)}for(a=0,h=r.length;a<h;++a)if(o=r[a],o.next)do l(o);while(o=o.next);else c(o);function l(x){let B,_,F,R,Y,X,I,W;if(F=u.get(B=t[x[0]])){for(I=0,W=F.length;I<W;++I)if(R=F[I],d(R,x)){x[0]=R[0],x[1]=R[1];return}}if(Y=u.get(_=t[x[1]])){for(I=0,W=Y.length;I<W;++I)if(X=Y[I],m(X,x)){x[1]=X[0],x[0]=X[1];return}}F?F.push(x):u.set(B,[x]),Y?Y.push(x):u.set(_,[x]),f.push(x)}function c(x){let B,_,F,R,Y;if(_=u.get(B=t[x[0]]))for(R=0,Y=_.length;R<Y;++R){if(F=_[R],M(F,x)){x[0]=F[0],x[1]=F[1];return}if(A(F,x)){x[0]=F[1],x[1]=F[0];return}}if(_=u.get(B=t[x[0]+p(x)]))for(R=0,Y=_.length;R<Y;++R){if(F=_[R],M(F,x)){x[0]=F[0],x[1]=F[1];return}if(A(F,x)){x[0]=F[1],x[1]=F[0];return}}_?_.push(x):u.set(B,[x]),f.push(x)}function d(x,B){let _=x[0],F=B[0],R=x[1],Y=B[1];if(_-R!==F-Y)return!1;for(;_<=R;++_,++F)if(!Gt(t[_],t[F]))return!1;return!0}function m(x,B){let _=x[0],F=B[0],R=x[1],Y=B[1];if(_-R!==F-Y)return!1;for(;_<=R;++_,--Y)if(!Gt(t[_],t[Y]))return!1;return!0}function M(x,B){let _=x[0],F=B[0],R=x[1],Y=B[1],X=R-_;if(X!==Y-F)return!1;let I=p(x),W=p(B);for(let j=0;j<X;++j)if(!Gt(t[_+(j+I)%X],t[F+(j+W)%X]))return!1;return!0}function A(x,B){let _=x[0],F=B[0],R=x[1],Y=B[1],X=R-_;if(X!==Y-F)return!1;let I=p(x),W=X-p(B);for(let j=0;j<X;++j)if(!Gt(t[_+(j+I)%X],t[Y-(j+W)%X]))return!1;return!0}function p(x){let B=x[0],_=x[1],F=B,R=F,Y=t[F];for(;++F<_;){let X=t[F];(X[0]<Y[0]||X[0]===Y[0]&&X[1]<Y[1])&&(R=F,Y=X)}return R-B}return e}function Sr(e){for(var t=-1,n=e.length;++t<n;){for(var i=e[t],r=0,o=1,s=i.length,a=i[0],h=a[0],u=a[1],f,l;++r<s;)a=i[r],f=a[0],l=a[1],(f!==h||l!==u)&&(i[o++]=[f-h,l-u],h=f,u=l);o===1&&(i[o++]=[0,0]),i.length=o}return e}const Ir=Object.prototype.hasOwnProperty;function Cr(e){let t=-1,n=[],i=[],r=[];function o(l){l&&l.type&&Ir.call(s,l.type)&&s[l.type](l)}const s={GeometryCollection:function(l){l.geometries.forEach(o)},LineString:function(l){l.arcs=a(l.arcs)},MultiLineString:function(l){l.arcs=l.arcs.map(a)},Polygon:function(l){l.arcs=l.arcs.map(h)},MultiPolygon:function(l){l.arcs=l.arcs.map(u)}};function a(l){for(var c=0,d=l.length;c<d;++c)n[++t]=l[c];var m={0:t-d+1,1:t};return i.push(m),m}function h(l){for(var c=0,d=l.length;c<d;++c)n[++t]=l[c];var m={0:t-d+1,1:t};return r.push(m),m}function u(l){return l.map(h)}for(var f in e)o(e[f]);return{type:"Topology",coordinates:n,lines:i,rings:r,objects:e}}function Fr(e){var t={},n;for(n in e)t[n]=kr(e[n]);return t}function kr(e){return e==null?{type:null}:e.type==="FeatureCollection"?Lr(e):e.type==="Feature"?On(e):Oe(e)}function Lr(e){var t={type:"GeometryCollection",geometries:e.features.map(On)};return e.bbox!=null&&(t.bbox=e.bbox),t}function On(e){var t=Oe(e.geometry),n;e.id!=null&&(t.id=e.id),e.bbox!=null&&(t.bbox=e.bbox);for(n in e.properties){t.properties=e.properties;break}return t}function Oe(e){if(e==null)return{type:null};let t={};if(e.type==="GeometryCollection")e=e,t={type:"GeometryCollection",geometries:e.geometries.map(Oe)},e.bbox!=null&&(t.bbox=e.bbox);else if(e.type==="Point"||e.type==="MultiPoint")t={type:e.type,coordinates:e.coordinates};else if(e.type==="LineString"||e.type==="MultiLineString"||e.type==="Polygon"||e.type==="MultiPolygon")e=e,t={type:e.type,arcs:e.coordinates};else throw new Error("Unknown geometry type: "+e.type);return t}const Br=Object.prototype.hasOwnProperty;function _r(e,t,n){var i=t[0],r=t[1],o=t[2],s=t[3],a=o-i?(n-1)/(o-i):1,h=s-r?(n-1)/(s-r):1;function u(p){return[Math.round((p[0]-i)*a),Math.round((p[1]-r)*h)]}function f(p,x){for(var B=-1,_=0,F=p.length,R=new Array(F),Y,X,I,W,j;++B<F;)Y=p[B],W=Math.round((Y[0]-i)*a),j=Math.round((Y[1]-r)*h),(W!==X||j!==I)&&(R[_++]=[X=W,I=j]);for(R.length=_;_<x;)_=R.push([R[0][0],R[0][1]]);return R}function l(p){return f(p,2)}function c(p){return f(p,4)}function d(p){return p.map(c)}function m(p){p!=null&&p.type&&Br.call(M,p.type)&&M[p.type](p)}const M={GeometryCollection:function(p){p.geometries.forEach(m)},Point:function(p){p.coordinates=u(p.coordinates)},MultiPoint:function(p){p.coordinates=p.coordinates.map(u)},LineString:function(p){p.arcs=l(p.arcs)},MultiLineString:function(p){p.arcs=p.arcs.map(l)},Polygon:function(p){p.arcs=d(p.arcs)},MultiPolygon:function(p){p.arcs=p.arcs.map(d)}};for(var A in e)m(e[A]);return{scale:[1/a,1/h],translate:[i,r]}}const Gr=Object.prototype.hasOwnProperty;function Rr(e,t){let n=Fr(e);var i=pr(n),r=t>0&&i&&_r(n,i,t),o=Tr(xr(Cr(n))),s=o.coordinates,a=Ge(o.arcs.length*1.4,jr,Or);o.bbox=i,o.arcs=o.arcs.map(function(d,m){return a.set(d,m),s.slice(d[0],d[1]+1)}),delete o.coordinates,s=null;function h(d){d&&d.type&&Gr.call(u,d.type)&&u[d.type](d)}var u={GeometryCollection:function(d){d.geometries.forEach(h)},LineString:function(d){d.arcs=f(d.arcs)},MultiLineString:function(d){d.arcs=d.arcs.map(f)},Polygon:function(d){d.arcs=d.arcs.map(f)},MultiPolygon:function(d){d.arcs=d.arcs.map(l)}};function f(d){var m=[];do{var M=a.get(d);m.push(d[0]<d[1]?M:~M)}while(d=d.next);return m}function l(d){return d.map(f)}for(var c in n)h(n[c]);return r&&(o.transform=r,o.arcs=Sr(o.arcs)),o}function jr(e){var t=e[0],n=e[1],i;return n<t&&(i=t,t=n,n=i),t+31*n}function Or(e,t){var n=e[0],i=e[1],r=t[0],o=t[1],s;return i<n&&(s=n,n=i,i=s),o<r&&(s=r,r=o,o=s),n===r&&i===o}function qn(e){return e}function Dn(e,t){for(var n=0,i=e.length;n<i;){var r=n+i>>>1;e[r]<t?n=r+1:i=r}return n}function Nn(e){if(!e)return qn;let t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,h){h||(t=n=0);var u=2,f=a.length,l=new Array(f);for(l[0]=(t+=a[0])*i+o,l[1]=(n+=a[1])*r+s;u<f;)l[u]=a[u],++u;return l}}function qr(e){if(!e)return qn;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,h){h||(t=n=0);var u=2,f=a.length,l=new Array(f),c=Math.round((a[0]-o)/i),d=Math.round((a[1]-s)/r);for(l[0]=c-t,t=c,l[1]=d-n,n=d;u<f;)l[u]=a[u],++u;return l}}function Yn(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function Dr(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Wn(e,n)})}:Wn(e,t)}function Wn(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,o=Zt(e,t);let s=n==null&&i==null?{type:"Feature",properties:r,geometry:o}:i==null?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o};return Object.keys(r).length===0&&delete s.properties,s}function Zt(e,t){let n=Nn(e.transform),i=e.arcs;function r(f,l){l.length&&l.pop();for(var c=i[f<0?~f:f],d=0,m=c.length;d<m;++d)l.push(n(c[d],d));f<0&&Yn(l,m)}function o(f){return n(f)}function s(f){for(var l=[],c=0,d=f.length;c<d;++c)r(f[c],l);return l.length<2&&l.push(l[0]),l}function a(f){for(var l=s(f);l.length<4;)l.push(l[0]);return l}function h(f){return f.map(a)}function u(f){var l=f.type,c;switch(l){case"GeometryCollection":return{type:l,geometries:f.geometries.map(u)};case"Point":c=o(f.coordinates);break;case"MultiPoint":c=f.coordinates.map(o);break;case"LineString":c=s(f.arcs);break;case"MultiLineString":c=f.arcs.map(s);break;case"Polygon":c=h(f.arcs);break;case"MultiPolygon":c=f.arcs.map(h);break;default:return null}return{type:l,coordinates:c}}return u(t)}function Nr(e){var t={},n=e.map(function(){return[]});function i(m,M){m.forEach(function(A){A<0&&(A=~A);var p=t[A];p?p.push(M):t[A]=[M]})}function r(m,M){m.forEach(function(A){i(A,M)})}function o(m,M){m.type==="GeometryCollection"?m.geometries.forEach(function(A){o(A,M)}):m.type in s&&s[m.type](m.arcs,M)}const s={LineString:i,MultiLineString:r,Polygon:r,MultiPolygon:function(m,M){m.forEach(function(A){r(A,M)})}};e.forEach(o);for(let m in t)for(var a=t[m],h=a.length,u=0;u<h;++u)for(var f=u+1;f<h;++f){var l=a[u],c=a[f],d;(d=n[l])[m=Dn(d,c)]!==c&&d.splice(m,0,c),(d=n[c])[m=Dn(d,l)]!==l&&d.splice(m,0,l)}return n}function Xn(e,t){var n={},i={},r={},o=[],s=-1;t.forEach(function(u,f){if(e.arcs)var l=e.arcs[u<0?~u:u],c;l.length<3&&!l[1][0]&&!l[1][1]&&(c=t[++s],t[s]=u,t[f]=c)}),t.forEach(function(u){var f=a(u),l=f[0],c=f[1],d,m;if(d=r[l])if(delete r[d.end],d.push(u),d.end=c,m=i[c]){delete i[m.start];var M=m===d?d:d.concat(m);i[M.start=d.start]=r[M.end=m.end]=M}else i[d.start]=r[d.end]=d;else if(d=i[c])if(delete i[d.start],d.unshift(u),d.start=l,m=r[l]){delete r[m.end];var A=m===d?d:m.concat(d);i[A.start=m.start]=r[A.end=d.end]=A}else i[d.start]=r[d.end]=d;else d=[u],i[d.start=l]=r[d.end=c]=d});function a(u){if(e.arcs){let f=e.arcs[u<0?~u:u],l=f[0],c;return e.transform?(c=[0,0],f.forEach(function(d){c[0]+=d[0],c[1]+=d[1]})):c=f[f.length-1],u<0?[c,l]:[l,c]}}function h(u,f){for(var l in u){var c=u[l];delete f[c.start],delete c.start,delete c.end,c.forEach(function(d){n[d<0?~d:d]=1}),o.push(c)}}return h(r,i),h(i,r),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function Yr(e){return Zt(e,$n.apply(this,arguments))}function $n(e,t,n){var i,r,o;if(arguments.length>1)i=Wr(e,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:Xn(e,i)}}function Wr(e,t,n){var i=[],r=[],o;function s(l){var c=l<0?~l:l;(r[c]||(r[c]=[])).push({i:l,g:o})}function a(l){l.forEach(s)}function h(l){l.forEach(a)}function u(l){l.forEach(h)}function f(l){switch(o=l,l.type){case"GeometryCollection":l.geometries.forEach(f);break;case"LineString":a(l.arcs);break;case"MultiLineString":case"Polygon":h(l.arcs);break;case"MultiPolygon":u(l.arcs);break}}return f(t),r.forEach(n==null?function(l){i.push(l[0].i)}:function(l){n(l[0].g,l[l.length-1].g)&&i.push(l[0].i)}),i}function Xr(e){for(var t=-1,n=e.length,i,r=e[n-1],o=0;++t<n;)i=r,r=e[t],o+=i[0]*r[1]-i[1]*r[0];return Math.abs(o)}function $r(e){return Zt(e,zn.apply(this,arguments))}function zn(e,t){var n={},i=[],r=[];t.forEach(o);function o(h){switch(h.type){case"GeometryCollection":h.geometries.forEach(o);break;case"Polygon":s(h.arcs);break;case"MultiPolygon":h.arcs.forEach(s);break}}function s(h){h.forEach(function(u){u.forEach(function(f){(n[f=f<0?~f:f]||(n[f]=[])).push(h)})}),i.push(h)}function a(h){return Xr(Zt(e,{type:"Polygon",arcs:[h]}).coordinates[0])}return i.forEach(function(h){if(!h._){var u=[],f=[h];for(h._=1,r.push(u);h=f.pop();)u.push(h),h.forEach(function(l){l.forEach(function(c){n[c<0?~c:c].forEach(function(d){d._||(d._=1,f.push(d))})})})}}),i.forEach(function(h){delete h._}),{type:"MultiPolygon",arcs:r.map(function(h){let u=[],f;if(h.forEach(function(M){M.forEach(function(A){A.forEach(function(p){n[p<0?~p:p].length<2&&u.push(p)})})}),u=Xn(e,u),(f=u.length)>1)for(var l=1,c=a(u[0]),d,m;l<f;++l)(d=a(u[l]))>c&&(m=u[0],u[0]=u[l],u[l]=m,c=d);return u}).filter(function(h){return h.length>0})}}const me=6378137,vt=20037508342789244e-9,zr=85.05112877980659,At={project(e){let t=Math.PI/180,n=zr,i=Math.max(Math.min(n,e[1]),-n),r=Math.sin(i*t),o=me*e[0]*t,s=me*Math.log((1+r)/(1-r))/2;return s>vt&&(s=vt),s<-vt&&(s=-vt),o>vt&&(o=vt),o<-vt&&(o=-vt),[o,s]},unproject(e){let t=180/Math.PI;return[e[0]*t/me,(2*Math.atan(Math.exp(e[1]/me))-Math.PI/2)*t]},bounds:[-vt,-vt,vt,vt],name:"EPSG:3857"};function Un(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[2]),Math.max(e[3],t[3])]}function Ur(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[0]),Math.max(e[3],t[1])]}function Jr(e,t=At){let n,i=t.project([e[0],e[1]]),r=t.project([e[2],e[3]]);return n=[i[0],i[1],r[0],r[1]],n}function Vr(e,t=At){let n,i=t.unproject([e[0],e[1]]),r=t.unproject([e[2],e[3]]);return n=[i[0],i[1],r[0],r[1]],n}function qe(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(let o=0;o<e.length;o++){let s=e[o][0],a=e[o][1];t=Math.min(t,s),n=Math.min(n,a),i=Math.max(i,s),r=Math.max(r,a)}return[t,n,i,r]}function we(e,t){let n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1];return s>=n&&s<=r&&a>=i&&a<=o}function Hr(e,t){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[2]&&e[3]>=t[3]}function Jn(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Kr(e,t){return e[0]<t[2]&&e[2]>t[0]&&e[1]<t[3]&&e[3]>t[1]}function Qr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Zr(e,t){let n=t.map((r,o)=>o%2===0?Kn(r):r),i=t.map((r,o)=>o%2===0?De(r):r);return we(e,n)||we(e,i)}function to(e){let t=e.map(io),n=qe(e),i=qe(t);return ro(n,i,[!1,!0])}function eo(e){let t=[e[0],e[1],180,e[3]],n=[-180,e[1],e[2],e[3]];return[t,n]}function Vn(e){return{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2,w:e[2]-e[0],h:e[3]-e[1]}}function no(e){return[e.x-e.w/2,e.y-e.h/2,e.x+e.w/2,e.y+e.h/2]}function Hn(e){let t=e[0],n=e[1],i=e[2],r=e[3];return[[t,n],[t,r],[i,r],[i,n],[t,n]]}function Kn(e){return e<0?e+180:e-180}function De(e){return e<0?e+180:e-180}function io(e){return[Kn(e[0]),e[1]]}function ro(e,t,n=[!1,!1]){let i=e[2]-e[0],r=e[3]-e[1],o=t[2]-t[0],s=t[3]-t[1];return i*r<o*s?n[0]?e.map((a,h)=>h%2===0?De(a):a):e:n[1]?t.map((a,h)=>h%2===0?De(a):a):t}const yt=11102230246251565e-32,L=134217729,Qn=(3+8*yt)*yt;function ht(e,t,n,i,r){let o,s,a,h,u=t[0],f=i[0],l=0,c=0;f>u==f>-u?(o=u,u=t[++l]):(o=f,f=i[++c]);let d=0;if(l<e&&c<n)for(f>u==f>-u?(s=u+o,a=o-(s-u),u=t[++l]):(s=f+o,a=o-(s-f),f=i[++c]),o=s,a!==0&&(r[d++]=a);l<e&&c<n;)f>u==f>-u?(s=o+u,h=s-o,a=o-(s-h)+(u-h),u=t[++l]):(s=o+f,h=s-o,a=o-(s-h)+(f-h),f=i[++c]),o=s,a!==0&&(r[d++]=a);for(;l<e;)s=o+u,h=s-o,a=o-(s-h)+(u-h),u=t[++l],o=s,a!==0&&(r[d++]=a);for(;c<n;)s=o+f,h=s-o,a=o-(s-h)+(f-h),f=i[++c],o=s,a!==0&&(r[d++]=a);return(o!==0||d===0)&&(r[d++]=o),d}function pt(e,t,n,i,r,o,s,a){return ht(ht(e,t,n,i,s),s,r,o,a)}function T(e,t,n,i){let r,o,s,a,h,u,f,l,c,d,m;f=L*n,d=f-(f-n),m=n-d;let M=t[0];r=M*n,f=L*M,l=f-(f-M),c=M-l,s=c*m-(r-l*d-c*d-l*m);let A=0;s!==0&&(i[A++]=s);for(let p=1;p<e;p++)M=t[p],a=M*n,f=L*M,l=f-(f-M),c=M-l,h=c*m-(a-l*d-c*d-l*m),o=r+h,u=o-r,s=r-(o-u)+(h-u),s!==0&&(i[A++]=s),r=a+o,s=o-(r-a),s!==0&&(i[A++]=s);return(r!==0||A===0)&&(i[A++]=r),A}function Zn(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function et(e){return new Float64Array(e)}const oo=(3+16*yt)*yt,so=(2+12*yt)*yt,ao=(9+64*yt)*yt*yt,Yt=et(4),ti=et(8),ei=et(12),ni=et(16),mt=et(4);function lo(e,t,n,i,r,o,s){let a,h,u,f,l,c,d,m,M,A,p,x,B,_,F,R,Y,X;const I=e-r,W=n-r,j=t-o,z=i-o;_=I*z,c=L*I,d=c-(c-I),m=I-d,c=L*z,M=c-(c-z),A=z-M,F=m*A-(_-d*M-m*M-d*A),R=j*W,c=L*j,d=c-(c-j),m=j-d,c=L*W,M=c-(c-W),A=W-M,Y=m*A-(R-d*M-m*M-d*A),p=F-Y,l=F-p,Yt[0]=F-(p+l)+(l-Y),x=_+p,l=x-_,B=_-(x-l)+(p-l),p=B-R,l=B-p,Yt[1]=B-(p+l)+(l-R),X=x+p,l=X-x,Yt[2]=x-(X-l)+(p-l),Yt[3]=X;let U=Zn(4,Yt),y=so*s;if(U>=y||-U>=y||(l=e-I,a=e-(I+l)+(l-r),l=n-W,u=n-(W+l)+(l-r),l=t-j,h=t-(j+l)+(l-o),l=i-z,f=i-(z+l)+(l-o),a===0&&h===0&&u===0&&f===0)||(y=ao*s+Qn*Math.abs(U),U+=I*f+z*a-(j*u+W*h),U>=y||-U>=y))return U;_=a*z,c=L*a,d=c-(c-a),m=a-d,c=L*z,M=c-(c-z),A=z-M,F=m*A-(_-d*M-m*M-d*A),R=h*W,c=L*h,d=c-(c-h),m=h-d,c=L*W,M=c-(c-W),A=W-M,Y=m*A-(R-d*M-m*M-d*A),p=F-Y,l=F-p,mt[0]=F-(p+l)+(l-Y),x=_+p,l=x-_,B=_-(x-l)+(p-l),p=B-R,l=B-p,mt[1]=B-(p+l)+(l-R),X=x+p,l=X-x,mt[2]=x-(X-l)+(p-l),mt[3]=X;const g=ht(4,Yt,4,mt,ti);_=I*f,c=L*I,d=c-(c-I),m=I-d,c=L*f,M=c-(c-f),A=f-M,F=m*A-(_-d*M-m*M-d*A),R=j*u,c=L*j,d=c-(c-j),m=j-d,c=L*u,M=c-(c-u),A=u-M,Y=m*A-(R-d*M-m*M-d*A),p=F-Y,l=F-p,mt[0]=F-(p+l)+(l-Y),x=_+p,l=x-_,B=_-(x-l)+(p-l),p=B-R,l=B-p,mt[1]=B-(p+l)+(l-R),X=x+p,l=X-x,mt[2]=x-(X-l)+(p-l),mt[3]=X;const b=ht(g,ti,4,mt,ei);_=a*f,c=L*a,d=c-(c-a),m=a-d,c=L*f,M=c-(c-f),A=f-M,F=m*A-(_-d*M-m*M-d*A),R=h*u,c=L*h,d=c-(c-h),m=h-d,c=L*u,M=c-(c-u),A=u-M,Y=m*A-(R-d*M-m*M-d*A),p=F-Y,l=F-p,mt[0]=F-(p+l)+(l-Y),x=_+p,l=x-_,B=_-(x-l)+(p-l),p=B-R,l=B-p,mt[1]=B-(p+l)+(l-R),X=x+p,l=X-x,mt[2]=x-(X-l)+(p-l),mt[3]=X;const P=ht(b,ei,4,mt,ni);return ni[P-1]}function te(e,t,n,i,r,o){const s=(t-o)*(n-r),a=(e-r)*(i-o),h=s-a,u=Math.abs(s+a);return Math.abs(h)>=oo*u?h:-lo(e,t,n,i,r,o,u)}const uo=(10+96*yt)*yt,ho=(4+48*yt)*yt,fo=(44+576*yt)*yt*yt,Ct=et(4),Ft=et(4),kt=et(4),Et=et(4),Tt=et(4),St=et(4),wt=et(4),gt=et(4),Ne=et(8),Ye=et(8),We=et(8),Xe=et(8),$e=et(8),ze=et(8),ge=et(8),Me=et(8),be=et(8),Rt=et(4),jt=et(4),Ot=et(4),G=et(8),$=et(16),ot=et(16),st=et(16),nt=et(32),Lt=et(32),at=et(48),Mt=et(64);let Wt=et(1152),Ue=et(1152);function lt(e,t,n){e=ht(e,Wt,t,n,Ue);const i=Wt;return Wt=Ue,Ue=i,e}function co(e,t,n,i,r,o,s,a,h){let u,f,l,c,d,m,M,A,p,x,B,_,F,R,Y,X,I,W,j,z,U,y,g,b,P,E,C,v,S,O,k,q,D,J,N;const H=e-s,K=n-s,Q=r-s,it=t-a,Z=i-a,rt=o-a;k=K*rt,g=L*K,b=g-(g-K),P=K-b,g=L*rt,E=g-(g-rt),C=rt-E,q=P*C-(k-b*E-P*E-b*C),D=Q*Z,g=L*Q,b=g-(g-Q),P=Q-b,g=L*Z,E=g-(g-Z),C=Z-E,J=P*C-(D-b*E-P*E-b*C),v=q-J,y=q-v,Ct[0]=q-(v+y)+(y-J),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O-D,y=O-v,Ct[1]=O-(v+y)+(y-D),N=S+v,y=N-S,Ct[2]=S-(N-y)+(v-y),Ct[3]=N,k=Q*it,g=L*Q,b=g-(g-Q),P=Q-b,g=L*it,E=g-(g-it),C=it-E,q=P*C-(k-b*E-P*E-b*C),D=H*rt,g=L*H,b=g-(g-H),P=H-b,g=L*rt,E=g-(g-rt),C=rt-E,J=P*C-(D-b*E-P*E-b*C),v=q-J,y=q-v,Ft[0]=q-(v+y)+(y-J),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O-D,y=O-v,Ft[1]=O-(v+y)+(y-D),N=S+v,y=N-S,Ft[2]=S-(N-y)+(v-y),Ft[3]=N,k=H*Z,g=L*H,b=g-(g-H),P=H-b,g=L*Z,E=g-(g-Z),C=Z-E,q=P*C-(k-b*E-P*E-b*C),D=K*it,g=L*K,b=g-(g-K),P=K-b,g=L*it,E=g-(g-it),C=it-E,J=P*C-(D-b*E-P*E-b*C),v=q-J,y=q-v,kt[0]=q-(v+y)+(y-J),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O-D,y=O-v,kt[1]=O-(v+y)+(y-D),N=S+v,y=N-S,kt[2]=S-(N-y)+(v-y),kt[3]=N,u=ht(ht(ht(T(T(4,Ct,H,G),G,H,$),$,T(T(4,Ct,it,G),G,it,ot),ot,nt),nt,ht(T(T(4,Ft,K,G),G,K,$),$,T(T(4,Ft,Z,G),G,Z,ot),ot,Lt),Lt,Mt),Mt,ht(T(T(4,kt,Q,G),G,Q,$),$,T(T(4,kt,rt,G),G,rt,ot),ot,nt),nt,Wt);let It=Zn(u,Wt),se=ho*h;if(It>=se||-It>=se||(y=e-H,f=e-(H+y)+(y-s),y=t-it,d=t-(it+y)+(y-a),y=n-K,l=n-(K+y)+(y-s),y=i-Z,m=i-(Z+y)+(y-a),y=r-Q,c=r-(Q+y)+(y-s),y=o-rt,M=o-(rt+y)+(y-a),f===0&&l===0&&c===0&&d===0&&m===0&&M===0)||(se=fo*h+Qn*Math.abs(It),It+=(H*H+it*it)*(K*M+rt*l-(Z*c+Q*m))+2*(H*f+it*d)*(K*rt-Z*Q)+((K*K+Z*Z)*(Q*d+it*c-(rt*f+H*M))+2*(K*l+Z*m)*(Q*it-rt*H))+((Q*Q+rt*rt)*(H*m+Z*f-(it*l+K*d))+2*(Q*c+rt*M)*(H*Z-it*K)),It>=se||-It>=se))return It;if((l!==0||m!==0||c!==0||M!==0)&&(k=H*H,g=L*H,b=g-(g-H),P=H-b,q=P*P-(k-b*b-(b+b)*P),D=it*it,g=L*it,b=g-(g-it),P=it-b,J=P*P-(D-b*b-(b+b)*P),v=q+J,y=v-q,Et[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,Et[1]=O-(v-y)+(D-y),N=S+v,y=N-S,Et[2]=S-(N-y)+(v-y),Et[3]=N),(c!==0||M!==0||f!==0||d!==0)&&(k=K*K,g=L*K,b=g-(g-K),P=K-b,q=P*P-(k-b*b-(b+b)*P),D=Z*Z,g=L*Z,b=g-(g-Z),P=Z-b,J=P*P-(D-b*b-(b+b)*P),v=q+J,y=v-q,Tt[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,Tt[1]=O-(v-y)+(D-y),N=S+v,y=N-S,Tt[2]=S-(N-y)+(v-y),Tt[3]=N),(f!==0||d!==0||l!==0||m!==0)&&(k=Q*Q,g=L*Q,b=g-(g-Q),P=Q-b,q=P*P-(k-b*b-(b+b)*P),D=rt*rt,g=L*rt,b=g-(g-rt),P=rt-b,J=P*P-(D-b*b-(b+b)*P),v=q+J,y=v-q,St[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,St[1]=O-(v-y)+(D-y),N=S+v,y=N-S,St[2]=S-(N-y)+(v-y),St[3]=N),f!==0&&(A=T(4,Ct,f,Ne),u=lt(u,pt(T(A,Ne,2*H,$),$,T(T(4,St,f,G),G,Z,ot),ot,T(T(4,Tt,f,G),G,-rt,st),st,nt,at),at)),d!==0&&(p=T(4,Ct,d,Ye),u=lt(u,pt(T(p,Ye,2*it,$),$,T(T(4,Tt,d,G),G,Q,ot),ot,T(T(4,St,d,G),G,-K,st),st,nt,at),at)),l!==0&&(x=T(4,Ft,l,We),u=lt(u,pt(T(x,We,2*K,$),$,T(T(4,Et,l,G),G,rt,ot),ot,T(T(4,St,l,G),G,-it,st),st,nt,at),at)),m!==0&&(B=T(4,Ft,m,Xe),u=lt(u,pt(T(B,Xe,2*Z,$),$,T(T(4,St,m,G),G,H,ot),ot,T(T(4,Et,m,G),G,-Q,st),st,nt,at),at)),c!==0&&(_=T(4,kt,c,$e),u=lt(u,pt(T(_,$e,2*Q,$),$,T(T(4,Tt,c,G),G,it,ot),ot,T(T(4,Et,c,G),G,-Z,st),st,nt,at),at)),M!==0&&(F=T(4,kt,M,ze),u=lt(u,pt(T(F,ze,2*rt,$),$,T(T(4,Et,M,G),G,K,ot),ot,T(T(4,Tt,M,G),G,-H,st),st,nt,at),at)),f!==0||d!==0){if(l!==0||m!==0||c!==0||M!==0?(k=l*rt,g=L*l,b=g-(g-l),P=l-b,g=L*rt,E=g-(g-rt),C=rt-E,q=P*C-(k-b*E-P*E-b*C),D=K*M,g=L*K,b=g-(g-K),P=K-b,g=L*M,E=g-(g-M),C=M-E,J=P*C-(D-b*E-P*E-b*C),v=q+J,y=v-q,wt[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,wt[1]=O-(v-y)+(D-y),N=S+v,y=N-S,wt[2]=S-(N-y)+(v-y),wt[3]=N,k=c*-Z,g=L*c,b=g-(g-c),P=c-b,g=L*-Z,E=g-(g- -Z),C=-Z-E,q=P*C-(k-b*E-P*E-b*C),D=Q*-m,g=L*Q,b=g-(g-Q),P=Q-b,g=L*-m,E=g-(g- -m),C=-m-E,J=P*C-(D-b*E-P*E-b*C),v=q+J,y=v-q,gt[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,gt[1]=O-(v-y)+(D-y),N=S+v,y=N-S,gt[2]=S-(N-y)+(v-y),gt[3]=N,Y=ht(4,wt,4,gt,Me),k=l*M,g=L*l,b=g-(g-l),P=l-b,g=L*M,E=g-(g-M),C=M-E,q=P*C-(k-b*E-P*E-b*C),D=c*m,g=L*c,b=g-(g-c),P=c-b,g=L*m,E=g-(g-m),C=m-E,J=P*C-(D-b*E-P*E-b*C),v=q-J,y=q-v,jt[0]=q-(v+y)+(y-J),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O-D,y=O-v,jt[1]=O-(v+y)+(y-D),N=S+v,y=N-S,jt[2]=S-(N-y)+(v-y),jt[3]=N,W=4):(Me[0]=0,Y=1,jt[0]=0,W=1),f!==0){const ft=T(Y,Me,f,st);u=lt(u,ht(T(A,Ne,f,$),$,T(ft,st,2*H,nt),nt,at),at);const ct=T(W,jt,f,G);u=lt(u,pt(T(ct,G,2*H,$),$,T(ct,G,f,ot),ot,T(ft,st,f,nt),nt,Lt,Mt),Mt),m!==0&&(u=lt(u,T(T(4,St,f,G),G,m,$),$)),M!==0&&(u=lt(u,T(T(4,Tt,-f,G),G,M,$),$))}if(d!==0){const ft=T(Y,Me,d,st);u=lt(u,ht(T(p,Ye,d,$),$,T(ft,st,2*it,nt),nt,at),at);const ct=T(W,jt,d,G);u=lt(u,pt(T(ct,G,2*it,$),$,T(ct,G,d,ot),ot,T(ft,st,d,nt),nt,Lt,Mt),Mt)}}if(l!==0||m!==0){if(c!==0||M!==0||f!==0||d!==0?(k=c*it,g=L*c,b=g-(g-c),P=c-b,g=L*it,E=g-(g-it),C=it-E,q=P*C-(k-b*E-P*E-b*C),D=Q*d,g=L*Q,b=g-(g-Q),P=Q-b,g=L*d,E=g-(g-d),C=d-E,J=P*C-(D-b*E-P*E-b*C),v=q+J,y=v-q,wt[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,wt[1]=O-(v-y)+(D-y),N=S+v,y=N-S,wt[2]=S-(N-y)+(v-y),wt[3]=N,z=-rt,U=-M,k=f*z,g=L*f,b=g-(g-f),P=f-b,g=L*z,E=g-(g-z),C=z-E,q=P*C-(k-b*E-P*E-b*C),D=H*U,g=L*H,b=g-(g-H),P=H-b,g=L*U,E=g-(g-U),C=U-E,J=P*C-(D-b*E-P*E-b*C),v=q+J,y=v-q,gt[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,gt[1]=O-(v-y)+(D-y),N=S+v,y=N-S,gt[2]=S-(N-y)+(v-y),gt[3]=N,X=ht(4,wt,4,gt,be),k=c*d,g=L*c,b=g-(g-c),P=c-b,g=L*d,E=g-(g-d),C=d-E,q=P*C-(k-b*E-P*E-b*C),D=f*M,g=L*f,b=g-(g-f),P=f-b,g=L*M,E=g-(g-M),C=M-E,J=P*C-(D-b*E-P*E-b*C),v=q-J,y=q-v,Ot[0]=q-(v+y)+(y-J),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O-D,y=O-v,Ot[1]=O-(v+y)+(y-D),N=S+v,y=N-S,Ot[2]=S-(N-y)+(v-y),Ot[3]=N,j=4):(be[0]=0,X=1,Ot[0]=0,j=1),l!==0){const ft=T(X,be,l,st);u=lt(u,ht(T(x,We,l,$),$,T(ft,st,2*K,nt),nt,at),at);const ct=T(j,Ot,l,G);u=lt(u,pt(T(ct,G,2*K,$),$,T(ct,G,l,ot),ot,T(ft,st,l,nt),nt,Lt,Mt),Mt),M!==0&&(u=lt(u,T(T(4,Et,l,G),G,M,$),$)),d!==0&&(u=lt(u,T(T(4,St,-l,G),G,d,$),$))}if(m!==0){const ft=T(X,be,m,st);u=lt(u,ht(T(B,Xe,m,$),$,T(ft,st,2*Z,nt),nt,at),at);const ct=T(j,Ot,m,G);u=lt(u,pt(T(ct,G,2*Z,$),$,T(ct,G,m,ot),ot,T(ft,st,m,nt),nt,Lt,Mt),Mt)}}if(c!==0||M!==0){if(f!==0||d!==0||l!==0||m!==0?(k=f*Z,g=L*f,b=g-(g-f),P=f-b,g=L*Z,E=g-(g-Z),C=Z-E,q=P*C-(k-b*E-P*E-b*C),D=H*m,g=L*H,b=g-(g-H),P=H-b,g=L*m,E=g-(g-m),C=m-E,J=P*C-(D-b*E-P*E-b*C),v=q+J,y=v-q,wt[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,wt[1]=O-(v-y)+(D-y),N=S+v,y=N-S,wt[2]=S-(N-y)+(v-y),wt[3]=N,z=-it,U=-d,k=l*z,g=L*l,b=g-(g-l),P=l-b,g=L*z,E=g-(g-z),C=z-E,q=P*C-(k-b*E-P*E-b*C),D=K*U,g=L*K,b=g-(g-K),P=K-b,g=L*U,E=g-(g-U),C=U-E,J=P*C-(D-b*E-P*E-b*C),v=q+J,y=v-q,gt[0]=q-(v-y)+(J-y),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O+D,y=v-O,gt[1]=O-(v-y)+(D-y),N=S+v,y=N-S,gt[2]=S-(N-y)+(v-y),gt[3]=N,R=ht(4,wt,4,gt,ge),k=f*m,g=L*f,b=g-(g-f),P=f-b,g=L*m,E=g-(g-m),C=m-E,q=P*C-(k-b*E-P*E-b*C),D=l*d,g=L*l,b=g-(g-l),P=l-b,g=L*d,E=g-(g-d),C=d-E,J=P*C-(D-b*E-P*E-b*C),v=q-J,y=q-v,Rt[0]=q-(v+y)+(y-J),S=k+v,y=S-k,O=k-(S-y)+(v-y),v=O-D,y=O-v,Rt[1]=O-(v+y)+(y-D),N=S+v,y=N-S,Rt[2]=S-(N-y)+(v-y),Rt[3]=N,I=4):(ge[0]=0,R=1,Rt[0]=0,I=1),c!==0){const ft=T(R,ge,c,st);u=lt(u,ht(T(_,$e,c,$),$,T(ft,st,2*Q,nt),nt,at),at);const ct=T(I,Rt,c,G);u=lt(u,pt(T(ct,G,2*Q,$),$,T(ct,G,c,ot),ot,T(ft,st,c,nt),nt,Lt,Mt),Mt),d!==0&&(u=lt(u,T(T(4,Tt,c,G),G,d,$),$)),m!==0&&(u=lt(u,T(T(4,Et,-c,G),G,m,$),$))}if(M!==0){const ft=T(R,ge,M,st);u=lt(u,ht(T(F,ze,M,$),$,T(ft,st,2*rt,nt),nt,at),at);const ct=T(I,Rt,M,G);u=lt(u,pt(T(ct,G,2*rt,$),$,T(ct,G,M,ot),ot,T(ft,st,M,nt),nt,Lt,Mt),Mt)}}return Wt[u-1]}function yo(e,t,n,i,r,o,s,a){const h=e-s,u=n-s,f=r-s,l=t-a,c=i-a,d=o-a,m=u*d,M=f*c,A=h*h+l*l,p=f*l,x=h*d,B=u*u+c*c,_=h*c,F=u*l,R=f*f+d*d,Y=A*(m-M)+B*(p-x)+R*(_-F),X=(Math.abs(m)+Math.abs(M))*A+(Math.abs(p)+Math.abs(x))*B+(Math.abs(_)+Math.abs(F))*R,I=uo*X;return Y>I||-Y>I?Y:co(e,t,n,i,r,o,s,a,X)}const ee=At.project,ii=At.unproject;function Je(e,t,n,i,r=At.project,o=At.unproject,s=!1){r&&(e=r(e),t=r(t),n=r(n),i=r(i));let a=[t[0]-e[0],t[1]-e[1]],h=[i[0]-n[0],i[1]-n[1]],u=_t(a,h);if(u===0)return console.log("两条线段平行或共线"),null;let f=_t([n[0]-e[0],n[1]-e[1]],h)/u,l=_t([n[0]-e[0],n[1]-e[1]],a)/u;return!s&&(f<0||f>1||l<0||l>1)?(console.log("交点不在两条线段上"),null):o?o([e[0]+a[0]*f,e[1]+a[1]*f]):[e[0]+a[0]*f,e[1]+a[1]*f]}function ri(e,t,n=!1){if(n){let i=ee(e),r=t[0],o=t[1],s=t[2],a=t[3];return[r,o]=ee([r,o]),[s,a]=ee([s,a]),i[0]<r||i[0]>s||i[1]<o||i[1]>a}else{let i=t[0],r=t[1],o=t[2],s=t[3];return e[0]<i||e[0]>o||e[1]<r||e[1]>s}}function oi(e,t){return si(e,Hn(t))}function si(e,t){let n=e[e.length-1],i,r,o,s=t;for(let a in e){i=e[a];let h=s;s=[],r=h[h.length-1];for(let u in h){if(o=h[u],ve(o,n,i)){if(!ve(r,n,i)){let f=Je(r,o,n,i,ee,ii,!0);s.push(f)}s.push(o)}else if(ve(r,n,i)){let f=Je(r,o,n,i,ee,ii,!0);s.push(f)}r=o}n=i}return s}function mo(e,t){let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++)t[i][1]>e[1]!=t[r][1]>e[1]&&e[0]<(t[r][0]-t[i][0])*(e[1]-t[i][1])/(t[r][1]-t[i][1])+t[i][0]&&(n=!n);return n}function wo(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(let o=0;o<e.length;o++){let s=e[o];s[0]<t&&(t=s[0]),s[0]>i&&(i=s[0]),s[1]<n&&(n=s[1]),s[1]>r&&(r=s[1])}return[t,n,i,r]}function go(e,t){for(let n=0,i=e.length-1;n<e.length;i=n++)t(e[n],e[i])}function Mo(e,t){return(e-1+t)%t}function ve(e,t,n){return Ve(t,n,e)>0}function bo(e){return Math.abs(e)<=180?e:e-Xt(e)*360}function Xt(e){return e<0?-1:e>0?1:0}function Ve(e,t,n){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let i=e[0],r=e[1],o=t[0],s=t[1],a=n[0],h=n[1],u=(o-i)*(h-r)-(s-r)*(a-i);return u=Xt(u),u}function He(e,t){let n=Array.isArray(e)?e:e.toXY(),i=Array.isArray(t)?t:t.toXY(),r=Math.atan2(i[1]-n[1],i[0]-n[0]);return r=r*180/Math.PI,r<0&&(r+=360),r}function vo(e,t,n,i=!0){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let r=e[0],o=e[1],s=t[0],a=t[1],h=n[0],u=n[1],f=te(r,o,s,a,h,u);return i&&(f=-f),f=Xt(f),f}function po(e,t,n,i){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),i=Array.isArray(i)?i:i.toXY();let r=e[0],o=e[1],s=t[0],a=t[1],h=n[0],u=n[1],f=i[0],l=i[1],c=yo(r,o,s,a,h,u,f,l);return c=Xt(c),c}function Po(e,t,n,i){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),i=Array.isArray(i)?i:i.toXY();let r=e[0],o=e[1],s=t[0],a=t[1],h=n[0],u=n[1],f=i[0],l=i[1];const c=r-f,d=o-l,m=s-f,M=a-l,A=h-f,p=u-l,x=c*c+d*d,B=m*m+M*M,_=A*A+p*p;let F=c*(M*_-B*p)-d*(m*_-B*A)+x*(m*p-M*A);return Xt(F)}class Ke{constructor(t,n){V(this,"MBR");V(this,"data");V(this,"shape");V(this,"rows");V(this,"cols");V(this,"bands");this.MBR=t,this.data=n,this.shape=[n.length,n[0].length,n[0][0].length],[this.bands,this.rows,this.cols]=this.shape}getShape(){return[this.data.length,this.data[0].length,this.data[0][0].length]}getBand(t){return this.data[t]}get width(){return this.cols}get height(){return this.rows}get bandCount(){return this.bands}getSubGrid(t,n=[0]){let i=t[0],r=t[1],o=t[2],s=t[3],a=[];for(let h of n){let u=[];for(let f=i;f<=o;f++){let l=[];for(let c=r;c<=s;c++)l.push(this.data[h][f][c]);u.push(l)}a.push(u)}return a}fillInvalidValue(t){let n=this.data[t],i=0,r=0;for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++){let h=n[s][a];h!==0&&(i+=h,r++)}let o=i/r;for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++){let h=n[s][a];(h===0||h===-9999||h===999999)&&(n[s][a]=o)}}getSubGridObj(t,n=[0]){let i=t[0],r=t[1],o=t[2],s=t[3],a=[];for(let u of n){let f=[];for(let l=i;l<=o;l++){let c=[];for(let d=r;d<=s;d++)c.push(this.data[u][l][d]);f.push(c)}a.push(f)}return new Ke(t,a)}ConvertToGridMBR(t){let n=t[0],i=t[1],r=t[2],o=t[3],s=this.getGridCoord([n,i]),a=this.getGridCoord([r,o]);if(s===null||a===null)return null;{let h=s[0],u=s[1],f=a[0],l=a[1];return[h,u,f,l]}}getGridCoord(t){if(ri(t,this.MBR))return null;{let n=t[0],i=t[1],r=this.MBR[0],o=this.MBR[1],s=this.MBR[2],a=this.MBR[3],h=Math.floor((i-o)/(a-o)*this.rows),u=Math.floor((n-r)/(s-r)*this.cols);return[h,u]}}getCoordByGridCoord(t){let n=t[0],i=t[1],r=this.MBR[0],o=this.MBR[1],s=this.MBR[2],a=this.MBR[3],h=(i+.5)/this.cols*(s-r)+r,u=(n+.5)/this.rows*(a-o)+o;return[h,u]}getBandStatistics(t){let n=this.data[t],i=n[0][0],r=n[0][0],o=0;for(let a=0;a<this.rows;a++)for(let h=0;h<this.cols;h++){let u=n[a][h];u>i&&(i=u),u<r&&(r=u),o+=u}let s=o/(this.rows*this.cols);return{max:i,min:r,mean:s}}binarization(t,n){let i=this.data[t],r=[];for(let o=0;o<this.rows;o++){let s=[];for(let a=0;a<this.cols;a++)i[o][a]<n?s.push(0):s.push(1);r.push(s)}return r}getCoutourCode(t,n,i){let r=this.binarization(t,n),o=[];for(let s=0;s<this.rows-1;s++){let a=[];for(let h=0;h<this.cols-1;h++){let u=0;u+=r[s][h]*8,u+=r[s][h+1]*4,u+=r[s+1][h+1]*2,u+=r[s+1][h]*1,a.push(u)}o.push(a)}if(i){for(let h=0;h<o.length;h++){let u=o[h];u.unshift(u[0]),u.push(u[u.length-1])}let s=o[0],a=o[o.length-1];o.unshift(s),o.push(a)}return o}getMean(t){let n=this.data[t],i=0;for(let r=0;r<this.rows;r++)for(let o=0;o<this.cols;o++)i+=n[r][o];return i/(this.rows*this.cols)}getSorted1DArray(t){let n=this.data[t],i=[];for(let r=0;r<this.rows;r++)for(let o=0;o<this.cols;o++)i.push(n[r][o]);return i.sort((r,o)=>r-o),i}}function Ao(e,t,n){let i=e.data[t],r=[];for(let o=0;o<e.rows;o++){let s=[];for(let a=0;a<e.cols;a++)i[o][a]<n?s.push(0):s.push(1);r.push(s)}return r}function xo(e,t){let n=e.rows*e.cols,i=Eo(n)+3;(t>i||t<0)&&(t=i);let r=[0,0,e.rows-1,e.cols-1];return ne(r,0,t)}function ne(e,t,n){let i={boundary:e,children:[],depth:t,maxDepth:n,isLeaf:!1,isDivided:!1};if(t===n-1)return i.isLeaf=!0,i;{i.isDivided=!0;let r=e[0],o=e[1],s=e[2],a=e[3],h=(r+s)/2;h=Math.floor(h);let u=(o+a)/2;u=Math.floor(u);let f=[r,u,h,a],l=[h,u,s,a],c=[r,o,h,u],d=[h,o,s,u],m=ne(f,t+1,n),M=ne(l,t+1,n),A=ne(c,t+1,n),p=ne(d,t+1,n);return i.children.push(m),i.children.push(M),i.children.push(A),i.children.push(p),i}}function Eo(e){let t=0,n=1;for(;n<e;)n*=4,t++;return t}function To(e){let t=-1/0,n=1/0;for(let i=0;i<e.length;i++)for(let r=0;r<e[0].length;r++)e[i][r]>t&&(t=e[i][r]),e[i][r]<n&&(n=e[i][r]);for(let i=0;i<e.length;i++)for(let r=0;r<e[0].length;r++)(e[i][r]===t||e[i][r]===n)&&(e[i][r]=0)}const So=Math.E;function Qe(e,t,n){return(t-e)*(3-n*2)*n*n+e}function Io(e,t){let r=e,o=t;r*=3284157443,o^=r<<128|r>>256-128,o*=1911520717,r^=o<<128|o>>256-128,r*=2048419325;const s=r*(3.14159265/~(-1>>>1));return{x:Math.cos(s),y:Math.sin(s)}}function pe(e,t,n,i){const r=Io(e,t),o=n-e,s=i-t;return o*r.x+s*r.y}function Co(e,t){const n=Math.floor(e),i=n+1,r=Math.floor(t),o=r+1,s=e-n,a=t-r,h=pe(n,r,e,t),u=pe(i,r,e,t),f=Qe(h,u,s),l=pe(n,o,e,t),c=pe(i,o,e,t),d=Qe(l,c,s);return Qe(f,d,a)}function Fo(e,t){return Math.pow(So,-Math.pow(Math.sqrt(e*e+t*t),1/2))*Math.sin(Math.sqrt(e*e+t*t))}function ko(e,t){return Math.sin(Math.sqrt(e*e+t*t))}function Lo(e,t,n){const i=new Array(e).fill(0).map(()=>new Array(t).fill(0)),r=new Array(n).fill(0).map(()=>({x:Math.random()*e,y:Math.random()*t}));for(let o=0;o<e;o++)for(let s=0;s<t;s++){let a=1e5;for(let h=0;h<n;h++){const u=Math.sqrt(Math.pow(r[h].x-o,2)+Math.pow(r[h].y-s,2));u<a&&(a=u)}i[o][s]=a}return i}function Bo(e,t,n,i="horizontal"){const r=new Array(e).fill(0).map(()=>new Array(t).fill(0)),o=Math.floor(e/n);for(let s=0;s<e;s++)for(let a=0;a<t;a++)i==="vertical"?r[s][a]=Math.floor(s/o)%2===0?1:0:i==="horizontal"?r[s][a]=Math.floor(a/o)%2===0?1:0:i==="diagonal"?r[s][a]=Math.floor((s+a)/o)%2===0?1:0:i==="all"&&(r[s][a]=Math.floor((s+a)/o)%2===0?1:0,r[s][a]+=Math.floor(s/o)%2===0?1:0,r[s][a]+=Math.floor(a/o)%2===0?1:0);return r}class $t{constructor(t,n){V(this,"bbox",[1/0,1/0,-1/0,-1/0]);V(this,"coordinates");V(this,"properties");V(this,"projection",At);this.coordinates=t,n&&(this.properties=n),this.updateBBox()}toXY(){}set Properties(t){this.properties=t}clone(){const t=this.coordinates.slice(),n={...this.properties};return new this.constructor(t,n)}equals(t){return JSON.stringify(this.toGeoJSON())===JSON.stringify(t.toGeoJSON())}toGeoJSON(){let t={type:"Feature",geometry:{type:this.constructor.name,coordinates:this.coordinates}};return this.properties&&(t.properties=this.properties),this.bbox&&(t.bbox=this.bbox),t}static fromGeoJSON(t){if(t.type==="Feature")return this.fromFeature(t);if(t.type==="Geometry")return this.fromGeometry(t);throw t.type==="FeatureCollection"?new Error(t.type+"is not supported"):new Error("Unknown GeoJSON type: "+t.type)}}V($t,"fromFeature"),V($t,"fromGeometry");class qt{constructor(t,n){V(this,"coordinates");V(this,"geometries",[]);V(this,"bbox",[1/0,1/0,-1/0,-1/0]);V(this,"properties");V(this,"projection",At);n&&(this.properties=n),t.forEach(i=>{this.geometries.push(i),this.updateBBox(i)})}toXY(){}updateBBox(t){const n=t.bbox;n&&(this.bbox=Un(this.bbox,n))}addGeometry(t){this.geometries.push(t),this.updateBBox(t)}_update(t,n){this.geometries[n]=t,this.updateBBox(t)}toGeoJSON(){let t={type:"Feature",geometry:{type:"GeometryCollection",geometries:this.geometries.map(n=>n.toGeoJSON().geometry)}};return this.properties&&(t.properties=this.properties),this.bbox&&(t.bbox=this.bbox),t}}const Ze=Ln;class ut extends $t{get lon(){return this.coordinates[0]}get lat(){return this.coordinates[1]}constructor(t,n){super(t,n)}updateBBox(){this.bbox=[this.coordinates[0],this.coordinates[1],this.coordinates[0],this.coordinates[1]]}toXY(){return this.projection.project(this.coordinates)}static isPoint(t){return t instanceof ut}static fromGeometry(t){return new ut(t.coordinates)}static fromFeature(t){const{geometry:n,properties:i}=t;if(n.type!=="Point")throw new Error(`The input geometry is not a Point: ${n.type}`);const r=n;return i?new ut(r.coordinates,i):new ut(r.coordinates)}}class bt extends qt{constructor(n,i){var t=(...bs)=>{super(...bs);V(this,"coordinates")};n[0]instanceof ut?(t(n,i),this.coordinates=n.map(r=>r.coordinates)):(t(n.map(r=>new ut(r)),i),this.coordinates=n)}toXY(){return this.geometries.map(n=>n.toXY())}getCoodinates(){return this.coordinates}centroid(n){if(n){let i=0;for(let h=0;h<n.length;h++)i+=n[h];for(let h=0;h<n.length;h++)n[h]/=i;let r=0,o=0;for(let h=0;h<this.coordinates.length;h++){let u=this.coordinates[h];r+=u[0]*n[h],o+=u[1]*n[h]}let s=r,a=o;return new ut([s,a])}else{let i=0,r=0;for(let a=0;a<this.coordinates.length;a++){let h=this.coordinates[a];i+=h[0],r+=h[1]}let o=i/this.coordinates.length,s=r/this.coordinates.length;return new ut([o,s])}}addGeometry(n){n instanceof ut?(this.geometries.push(n),this.coordinates.push(n.coordinates),this.updateBBox(n)):n instanceof bt?(this.geometries.concat(n.geometries),this.coordinates.concat(n.coordinates),this.updateBBox(n)):(this.geometries.push(new ut(n)),this.coordinates.push(n),this.updateBBox(this.geometries[this.geometries.length-1]))}toGeoJSON(){let n={type:"Feature",geometry:{type:"MultiPoint",coordinates:this.geometries.map(i=>i.coordinates)}};return this.properties&&(n.properties=this.properties),this.bbox&&(n.bbox=this.bbox),n}static isMultiPoint(n){return n instanceof bt}static fromFeature(n){const{geometry:i,properties:r}=n;if(i.type!=="MultiPoint")throw new Error(`The input geometry is not a MultiPoint: ${i.type}`);const o=i;return r?new bt(o.coordinates,r):new bt(o.coordinates)}static fromGeometry(n){return new bt(n.coordinates)}}function _o(...e){if(e.length===1){if(!Ze(e[0])&&e[0].length===2)return new ut(e[0]);if(Ze(e[0]))return new ut([e[0].lon||e[0].lng||e[0].x,e[0].lat||e[0].y],e[1]);throw new Error("Invalid input")}else if(e.length===2){if(typeof e[0]=="number"&&typeof e[1]=="number")return new ut([e[0],e[1]]);if(Ze(e[0]))return new ut([e[0].lon||e[0].lng||e[0].x,e[0].lat||e[0].y],e[1]);if(Array.isArray(e[0])&&e[0].length===2)return new ut(e[0],e[1]);throw new Error("Invalid input")}else return new ut([e[0],e[1]],e[2])}function Go(e,t){return new bt(e,t)}class Pt extends $t{constructor(t,n){super(t,n)}updateBBox(){let[t,n,i,r]=[1/0,1/0,-1/0,-1/0];for(const[o,s]of this.coordinates)t=Math.min(t,o),n=Math.min(n,s),i=Math.max(i,o),r=Math.max(r,s);this.bbox=[t,n,i,r]}toXY(){return this.coordinates.map(t=>this.projection.project(t))}toMultiPoint(){return new bt(this.coordinates)}static fromGeometry(t){return new Pt(t.coordinates)}static fromFeature(t){const{geometry:n,properties:i}=t;if(n.type!=="LineString")throw new Error(`The input geometry is not a LineString: ${n.type}`);const r=n;return new Pt(r.coordinates,i)}static isLineString(t){return t.type==="LineString"}}class zt extends qt{constructor(n,i){var t=(...vs)=>{super(...vs);V(this,"coordinates")};n[0]instanceof Pt?(t(n,i),this.coordinates=n.map(r=>r.coordinates)):(t(n.map(r=>new Pt(r)),i),this.coordinates=n)}getCoodinates(){return this.coordinates}toMultiPoint(){return new bt(this.coordinates.flat())}toXY(){return this.geometries.map(n=>n.toXY())}addGeometry(n){n instanceof Pt?(this.geometries.push(n),this.coordinates.push(n.coordinates),this.updateBBox(n)):(this.geometries.push(new Pt(n)),this.coordinates.push(n),this.updateBBox(this.geometries[this.geometries.length-1]))}toGeoJSON(){let n={type:"Feature",geometry:{type:"MultiLineString",coordinates:this.geometries.map(i=>i.coordinates)}};return this.properties&&(n.properties=this.properties),this.bbox&&(n.bbox=this.bbox),n}static fromFeature(n){const{geometry:i,properties:r}=n;if(i.type!=="MultiLineString")throw new Error(`The input geometry is not a MultiLineString: ${i.type}`);const o=i;return new zt(o.coordinates,r)}static fromGeometry(n){return new zt(n.coordinates)}}function Ro(e){return new Pt(e.map(t=>t.coordinates))}class xt extends $t{constructor(t,n){super(t,n)}toXY(){return this.coordinates.map(t=>t.map(n=>this.projection.project(n)))}toMultiPoint(){return new bt(this.coordinates.flat())}updateBBox(){let[t,n,i,r]=[1/0,1/0,-1/0,-1/0];for(const o of this.coordinates)for(const[s,a]of o)t=Math.min(t,s),n=Math.min(n,a),i=Math.max(i,s),r=Math.max(r,a);this.bbox=[t,n,i,r]}static isPolygon(t){return t instanceof xt}static fromGeometry(t){return new xt(t.coordinates)}static fromFeature(t){const{geometry:n,properties:i}=t;if(n.type!=="Polygon")throw new Error(`The input geometry is not a Polygon: ${n.type}`);const r=n;return new xt(r.coordinates,i)}}class Ut extends qt{constructor(n,i){var t=(...ps)=>{super(...ps);V(this,"coordinates")};n[0]instanceof xt?(t(n,i),this.coordinates=n.map(r=>r.coordinates)):(t(n.map(r=>new xt(r)),i),this.coordinates=n)}getCoodinates(){return this.coordinates}toMultiPoint(){return new bt(this.coordinates.flat().flat())}toXY(){return this.geometries.map(n=>n.toXY())}addGeometry(n){n instanceof xt?(this.geometries.push(n),this.coordinates.push(n.coordinates),this.updateBBox(n)):(this.geometries.push(new xt(n)),this.coordinates.push(n),this.updateBBox(this.geometries[this.geometries.length-1]))}toGeoJSON(){let n={type:"Feature",geometry:{type:"MultiPolygon",coordinates:this.geometries.map(i=>i.coordinates)}};return this.properties&&(n.properties=this.properties),this.bbox&&(n.bbox=this.bbox),n}static fromFeature(n){const{geometry:i,properties:r}=n;if(i.type!=="MultiPolygon")throw new Error(`The input geometry is not a MultiPolygon: ${i.type}`);const o=i;return new Ut(o.coordinates,r)}static fromGeometry(n){return new Ut(n.coordinates)}}class tn{constructor(t,n,i){V(this,"x");V(this,"y");V(this,"r");V(this,"rSquared");this.x=t,this.y=n,this.r=i,this.rSquared=this.r*this.r}contains(t,n=18e8){let i=t[0],r=t[1];return Math.pow(i-this.x,2)+Math.pow(r-this.y,2)-this.rSquared<=n}intersects(t){let n=Vn(t),i=Math.abs(n.x-this.x),r=Math.abs(n.y-this.y),o=this.r,s=n.w/2,a=n.h/2,h=Math.pow(i-s,2)+Math.pow(r-a,2);return i>o+s||r>o+a?!1:i<=s||r<=a?!0:h<=this.rSquared}static isCircle(t){return t instanceof tn}}function en(e){switch(e.type){case"Point":return ut.fromGeometry(e);case"LineString":return Pt.fromGeometry(e);case"Polygon":return xt.fromGeometry(e);case"MultiPoint":return bt.fromGeometry(e);case"MultiLineString":return zt.fromGeometry(e);case"MultiPolygon":return Ut.fromGeometry(e);case"GeometryCollection":return li(e);default:throw new Error("Unknown geometry type: "+e.type+" in fromGeometryObj")}}function ai(e){if(e.type==="Feature"){const t=e.geometry;switch(t.type){case"Point":return ut.fromFeature(e);case"LineString":return Pt.fromFeature(e);case"Polygon":return xt.fromFeature(e);case"MultiPoint":return bt.fromFeature(e);case"MultiLineString":return zt.fromFeature(e);case"MultiPolygon":return Ut.fromFeature(e);case"GeometryCollection":return nn(e);default:throw new Error("Unknown geometry type: "+t.type+" in fromGeometryObj")}}else{if(e.type==="FeatureCollection")return nn(e);throw new Error("Unknown GeoJSON type")}}function nn(e){if(e.type==="Feature"){const t=e.geometry;if(t.type==="GeometryCollection"){const n=t.geometries.map(i=>en(i));return new qt(n,e.properties)}else throw new Error("The input feature is not a GeometryCollection: "+t.type)}else if(e.type==="FeatureCollection"){const t=e.features.map(n=>ai(n));return new qt(t)}else throw new Error("Unknown GeoJSON type")}function li(e){if(e.type==="GeometryCollection"){const t=e.geometries.map(n=>en(n));return new qt(t)}else throw new Error("The input geometry is not a GeometryCollection: "+e.type)}class Jt{constructor(t,n,i=10){V(this,"capacity");V(this,"boundary");V(this,"points");V(this,"northWest");V(this,"northEast");V(this,"southWest");V(this,"southEast");V(this,"isDivided");V(this,"depth");V(this,"maxDepth",10);this.capacity=n,this.boundary=t,this.points=[],this.isDivided=!1,this.northWest=null,this.northEast=null,this.southWest=null,this.southEast=null,this.depth=0,this.maxDepth=i}contains(t,n){return we(t,n)}intersects(t,n){return Jn(t,n)}insert(t){return this.contains(t,this.boundary)?this.points.length<this.capacity&&this.depth<this.maxDepth?(this.points.push(t),!0):(this.isDivided||this.subdivide(),this.northEast.insert(t),this.northWest.insert(t),this.southEast.insert(t),this.southWest.insert(t),!0):!1}get pointsList(){return this.points.length===0?null:this.points}subdivide(){let t=this.boundary[0],n=this.boundary[1],i=this.boundary[2]-t,r=this.boundary[3]-n,o=new Jt([t,n+r/2,t+i/2,n+r],this.capacity),s=new Jt([t+i/2,n+r/2,t+i,n+r],this.capacity),a=new Jt([t,n,t+i/2,n+r/2],this.capacity),h=new Jt([t+i/2,n,t+i,n+r/2],this.capacity);this.northWest=o,this.northEast=s,this.southWest=a,this.southEast=h,this.isDivided=!0,this.depth++}queryRange(t){let n=[];if(!this.intersects(this.boundary,t))return n;for(let i=0;i<this.points.length;i++)this.contains(this.points[i],t)&&n.push(this.points[i]);return this.northWest===null||(n.push(...this.northWest.queryRange(t)),n.push(...this.northEast.queryRange(t)),n.push(...this.southWest.queryRange(t)),n.push(...this.southEast.queryRange(t))),n}customQuery(t){let n=[];if(!t.intersects(this.boundary))return n;for(let i=0;i<this.points.length;i++)t.contains(this.points[i])&&n.push(this.points[i]);return this.northWest===null||(n.push(...this.northWest.customQuery(t)),n.push(...this.northEast.customQuery(t)),n.push(...this.southWest.customQuery(t)),n.push(...this.southEast.customQuery(t))),n}}function jo(e){return e?/^(epsg:|EPSG:)?3857$/.test(e)||/^(epsg:|EPSG:)?900913$/.test(e)||/^(epsg-|EPSG-)?3857$/.test(e)||/^(epsg-|EPSG-)?900913$/.test(e)||e==="900913"||e==="3857":!1}function Oo(e){return e?/^(epsg:|EPSG:)?4326$/.test(e)||/^(epsg-|EPSG-)?4326$/.test(e)||e==="4326"||e.toLowerCase()==="wgs84":!1}const ui={R:6371e3,projection:null,distance(e,t){return Qt(e,t,this.R)},area(e){return Le(e,this.R)}},hi=85.05112877980659,fi=_e({},ui,{R:6378137,code:"EPSG:3857",projection:At,wrapLng:[-180,180],wrapLat:[-hi,hi],area(e){return Le(e,this.R)},planeArea(e){return wn(e,this.R)}}),qo=_e({},fi,{code:"EPSG:900913"});class Do{constructor(t,n){V(this,"edges");V(this,"source");V(this,"dijkstra",t=>{const n=new Set,i={},r={},o={},s=(a,h)=>{let u=1/0,f=null;for(let l of a)h[l]<u&&(u=h[l],f=l);return f};for(let a=0;a<this.edges.length;a++){let h=this.edges[a][0],u=this.edges[a][1],f=this.edges[a][2];n.add(h),n.add(u),r[h]=1/0,r[u]=1/0,o[h]===void 0&&(o[h]={}),o[u]===void 0&&(o[u]={}),o[h][u]=f,o[u][h]=f}for(r[this.source]=0;n.size;){let a=s(n,r),h=Object.keys(o[a]).map(u=>parseInt(u)).filter(u=>n.has(u));if(n.delete(a),a===t)break;for(let u of h){let f=r[a]+o[a][u];f<r[u]&&(r[u]=f,i[u]=a)}}{let a=t,h=[a],u=0;for(;i[a]!==void 0;)h.unshift(i[a]),u+=o[a][i[a]],a=i[a];return[h,u]}});this.edges=t,this.source=n}}var ci=(e=>(e[e.linear=0]="linear",e[e.square=1]="square",e[e.log=2]="log",e[e.power=3]="power",e[e.groupStretch=4]="groupStretch",e))(ci||{}),di=(e=>(e[e.default=0]="default",e))(di||{});function ie(e,t){return(e-t.min)/(t.max-t.min)}function yi(e,t){return Math.sqrt((e-t.min)/(t.max-t.min))}function mi(e,t){return Math.log((e-t.min)/(t.max-t.min)+1)}function wi(e,t){return Math.pow((e-t.min)/(t.max-t.min),2)}function gi(e,t){let n=.1;return e<t.mean-n||e>t.mean+n?0:(e-t.min)/(t.max-t.min)}function Pe(e,t){switch(e){case 0:return t?(n,i)=>1-ie(n,i):ie;case 1:return t?(n,i)=>1-yi(n,i):yi;case 2:return t?(n,i)=>1-mi(n,i):mi;case 3:return t?(n,i)=>1-wi(n,i):wi;case 4:return t?(n,i)=>1-gi(n,i):gi;default:throw new Error("未知的拉伸类型")}}function Ae(e,t,n=ie){let i=n(t,e),r=Math.floor(i*255);return`rgb(${r},${r},${r})`}function Mi(e,t,n=ie){let i=Math.floor(n(t[0],e[0])*255),r=Math.floor(n(t[1],e[1])*255),o=Math.floor(n(t[2],e[2])*255);return`rgb(${i},${r},${o})`}function No(e,t){return(n,i)=>Mi(n,i,Pe(e,t))}function Yo(e,t){return(n,i)=>Ae(n,i,Pe(e,t))}const bi=["#163544","#495a45","#767d58","#76a477","#d7bd7f","#d7221f"],vi=["#ffffff00","#ff9a00","#3ec1d3","#6c5b7b","#355c7d","#f8b500","#119da4","#ff165d","#8ECFC9","#FFBE7A","#82B0D2","#BEB8DC","#E7DAD2","#119da4","#ff165d","#ffffff00"];function Wo(e,t,n,i=bi,r=ie){let o=r(t,e),s=0;if(n===void 0)s=Math.floor(o*i.length);else for(let a=0;a<n.length;a++)if(o<n[a]){s=a;break}return i[s]}function Xo(e,t,n=bi){return(i,r)=>Wo(i,r,t,n,Pe(e))}function pi(e,t=["#000000","#ffffff"]){return e===0?t[0]:t[1]}function $o(e,t=vi){return t[e]}function zo(e,t=0,n){let i=new Array(256).fill(0),r=Pe(t);if(n===void 0){n={max:0,min:0,mean:0};for(let o=0;o<e.length;o++)for(let s=0;s<e[0].length;s++)n.max=Math.max(n.max,e[o][s]),n.min=Math.min(n.min,e[o][s]),n.mean+=e[o][s]}for(let o=0;o<e.length;o++)for(let s=0;s<e[0].length;s++){let a=r(e[o][s],n),h=Math.floor(a*255);i[h]+=1}return i}function Uo(e,t,n,i,r=Ae,o){let s=n.w/t[0].length,a=n.h/t.length,h=e.getContext("2d");if(h===null)throw new Error("无法获取canvas绘图上下文");for(let u=0;u<t.length;u++)for(let f=0;f<t[0].length;f++){let l=t[u][f],c=r(i,l);h.fillStyle=c,h.fillRect(n.x+f*s,n.y+u*a,s,a)}if(o){let[u,f,l,c]=o;h.strokeStyle="red",h.lineWidth=1,h.strokeRect(n.x+u*s,n.y+f*a,(l-u)*s,(c-f)*a)}}function Jo(e,t,n,i=pi){let r=n.w/t[0].length,o=n.h/t.length,s=e.getContext("2d");if(s===null)throw new Error("无法获取canvas绘图上下文");for(let a=0;a<t.length;a++)for(let h=0;h<t[0].length;h++){let u=t[a][h],f=i(u);s.fillStyle=f,s.fillRect(n.x+h*r,n.y+a*o,r,o)}}function Vo(e,t,n,i="white"){let r=n.w/t[0].length,o=n.h/t.length,s=e.getContext("2d");if(s===null)throw new Error("无法获取canvas绘图上下文");for(let a=0;a<t.length;a++)for(let h=0;h<t[0].length;h++){let u=t[a][h];Ho(u,{x:n.x+h*r,y:n.y+a*o,w:r,h:o},s,i)}}function Ho(e,t,n,i="white"){switch(n.strokeStyle=i,e){case 0:break;case 1:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 2:n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 3:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 4:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 5:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke(),n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 6:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 7:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke();break;case 8:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke();break;case 9:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 10:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke(),n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 11:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 12:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 13:n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 14:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break}}function re(e,t,n,i,r=Ae,o,s){let a=e.getContext("2d");if(a===null)throw new Error("无法获取canvas绘图上下文");let u=i.getSubGridObj(n.boundary).getBandStatistics(0),f=u.mean;s?(s.max=Math.max(s.max,u.max),s.min=Math.min(s.min,u.min),s.mean=(s.mean+u.mean)/2):s=u,o||(o=f);let l=r(s,f);a.fillStyle=l,a.fillRect(t.x,t.y,t.w,t.h),requestAnimationFrame(()=>{if(n.isDivided){let c=[{x:t.x+t.w/2,y:t.y,w:t.w/2,h:t.h/2},{x:t.x+t.w/2,y:t.y+t.h/2,w:t.w/2,h:t.h/2},{x:t.x,y:t.y,w:t.w/2,h:t.h/2},{x:t.x,y:t.y+t.h/2,w:t.w/2,h:t.h/2}];re(e,c[0],n.children[0],i,r,o,s),re(e,c[1],n.children[1],i,r,o,s),re(e,c[2],n.children[2],i,r,o,s),re(e,c[3],n.children[3],i,r,o,s)}})}function Ko(e,t,n,i={color:"black",backgroundColor:"rgba(0,0,0,0)"},r=!1,o){let s=e.getContext("2d");if(s===null)throw new Error("无法获取canvas绘图上下文");o||(o={max:Math.max(...n),min:Math.min(...n),mean:n.reduce((h,u)=>h+u)/n.length}),s.fillStyle=i.backgroundColor,s.fillRect(t.x,t.y,t.w,t.h),s.fillStyle=i.color,s.lineWidth=1;let a=2;for(let h=0;h<n.length;h++){let u=t.x+t.w*h/n.length,f=t.y+t.h*(1-(n[h]-o.min)/(o.max-o.min));s.beginPath(),s.arc(u,f,a,0,2*Math.PI),s.fill()}s.strokeStyle=i.color,s.beginPath(),s.moveTo(t.x,t.y+t.h*(1-(n[0]-o.min)/(o.max-o.min)));for(let h=0;h<n.length;h++){let u=t.x+t.w*h/n.length,f=t.y+t.h*(1-(n[h]-o.min)/(o.max-o.min));s.lineTo(u,f)}if(s.stroke(),s.strokeStyle="white",s.beginPath(),s.moveTo(t.x,t.y+12),s.lineTo(t.x+t.w,t.y+12),s.stroke(),s.beginPath(),s.moveTo(t.x,t.y+t.h),s.lineTo(t.x+t.w,t.y+t.h),s.stroke(),s.beginPath(),s.moveTo(t.x,t.y+t.h/2),s.lineTo(t.x+t.w,t.y+t.h/2),s.stroke(),s.fillText(o.max.toFixed(2),t.x,t.y+12),s.fillText(o.min.toFixed(2),t.x,t.y+t.h),s.fillText(o.mean.toFixed(2),t.x,t.y+t.h/2),r){s.fillStyle="green",s.font="12px serif";for(let h=0;h<n.length;h+=16){let u=t.x+t.w*h/n.length,f=t.y+t.h*(1-(n[h]-o.min)/(o.max-o.min));s.fillText(n[h].toFixed(2),u,f)}}}function Qo(e,t,n,i={color:"black",backgroundColor:"rgba(0,0,0,0)"},r,o=!1){let s=e.getContext("2d");if(s===null)throw new Error("无法获取canvas绘图上下文");r||(r={max:Math.max(...n),min:Math.min(...n),mean:n.reduce((h,u)=>h+u)/n.length}),s.fillStyle=i.backgroundColor,s.fillRect(t.x,t.y,t.w,t.h),s.fillStyle=i.color;let a=t.w/n.length;for(let h=0;h<n.length;h++){let u=t.x+a*h,f=t.y+t.h*(1-(n[h]-r.min)/(r.max-r.min));s.fillRect(u,f,a,t.h-f+t.y)}o&&(s.fillStyle="green",s.font="12px serif",s.fillText(r.max.toFixed(2),t.x,t.y+12),s.fillText(r.min.toFixed(2),t.x,t.y+t.h),s.fillText(r.mean.toFixed(2),t.x,t.y+t.h/2)),s.strokeStyle="white",s.beginPath(),s.moveTo(t.x,t.y+12),s.lineTo(t.x+t.w,t.y+12),s.stroke(),s.beginPath(),s.moveTo(t.x,t.y+t.h),s.lineTo(t.x+t.w,t.y+t.h),s.stroke(),s.beginPath(),s.moveTo(t.x,t.y+t.h/2),s.lineTo(t.x+t.w,t.y+t.h/2),s.stroke()}function Zo(e,t,n,i={color:"black",font:"12px serif"}){let r=e.getContext("2d");if(r===null)throw new Error("无法获取canvas绘图上下文");r.fillStyle=i.color,r.font=i.font,r.fillText(n,t.x,t.y)}function ts(e,t,n,i,r,o){let s=i.w/t.width,a=i.h/t.height,h=e.getContext("2d");if(h===null)throw new Error("无法获取canvas绘图上下文");let u=[],f=[];n.forEach(l=>{u.push(t.getBand(l)),f.push(t.getBandStatistics(l))});for(let l=0;l<t.height;l++)for(let c=0;c<t.width;c++){let d=n.map(M=>u[M][l][c]),m=r(f,d);h.fillStyle=m,h.fillRect(i.x+c*s,i.y+l*a,s,a)}if(o){let[l,c,d,m]=o;h.strokeStyle="red",h.lineWidth=1,h.strokeRect(i.x+l*s,i.y+c*a,(d-l)*s,(m-c)*a)}h.strokeStyle="red",h.lineWidth=1,h.beginPath(),h.moveTo(i.x+i.w/2,i.y+i.h/2-10),h.lineTo(i.x+i.w/2,i.y+i.h/2+10),h.stroke(),h.beginPath(),h.moveTo(i.x+i.w/2-10,i.y+i.h/2),h.lineTo(i.x+i.w/2+10,i.y+i.h/2),h.stroke()}function Pi(e,t,n,i={color:"green",width:4,backgroundColor:"rgba(0,0,0,1)"}){let r=e.getContext("2d");if(r===null)throw new Error("无法获取canvas绘图上下文");r.fillStyle=i.backgroundColor,r.fillRect(t.x,t.y,t.w,t.h),r.fillStyle=i.color,r.fillRect(t.x,t.y,t.w*n/100,t.h),r.strokeStyle="white",r.lineWidth=1;for(let o=0;o<10;o++)r.beginPath(),r.moveTo(t.x+t.w*o/10,t.y),r.lineTo(t.x+t.w*o/10,t.y+t.h),r.stroke();t.h>=20&&t.w>=40&&(r.fillStyle="white",r.font="20px serif",r.fillText(n+"%",t.x+t.w/2-20,t.y+t.h/2+6))}function es(){let e=document.createElement("canvas");e.width=200,e.height=20,document.body.appendChild(e);let t={x:0,y:0,w:200,h:20},n=0;setInterval(()=>{Pi(e,t,n),n+=1,n>100&&(n=0)},100)}const Ai=Math.pow(2,-52),xe=new Uint32Array(512),ns=At.unproject;class Dt{static from(t,n=xi,i=Ei){const r=t.length,o=new Float64Array(r*2);for(let s=0;s<r;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=i(a)}return new Dt(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,s=t.length>>1;let a=1/0,h=1/0,u=-1/0,f=-1/0;for(let I=0;I<s;I++){const W=t[2*I],j=t[2*I+1];W<a&&(a=W),j<h&&(h=j),W>u&&(u=W),j>f&&(f=j),this._ids[I]=I}const l=(a+u)/2,c=(h+f)/2;let d,m,M;for(let I=0,W=1/0;I<s;I++){const j=rn(l,c,t[2*I],t[2*I+1]);j<W&&(d=I,W=j)}const A=t[2*d],p=t[2*d+1];for(let I=0,W=1/0;I<s;I++){if(I===d)continue;const j=rn(A,p,t[2*I],t[2*I+1]);j<W&&j>0&&(m=I,W=j)}let x=t[2*m],B=t[2*m+1],_=1/0;for(let I=0;I<s;I++){if(I===d||I===m)continue;const W=os(A,p,x,B,t[2*I],t[2*I+1]);W<_&&(M=I,_=W)}let F=t[2*M],R=t[2*M+1];if(_===1/0){for(let j=0;j<s;j++)this._dists[j]=t[2*j]-t[0]||t[2*j+1]-t[1];Vt(this._ids,this._dists,0,s-1);const I=new Uint32Array(s);let W=0;for(let j=0,z=-1/0;j<s;j++){const U=this._ids[j],y=this._dists[U];y>z&&(I[W++]=U,z=y)}this.hull=I.subarray(0,W),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(te(A,p,x,B,F,R)<0){const I=m,W=x,j=B;m=M,x=F,B=R,M=I,F=W,R=j}const Y=this.circumcenter(A,p,x,B,F,R);this._cx=Y.x,this._cy=Y.y;for(let I=0;I<s;I++)this._dists[I]=rn(t[2*I],t[2*I+1],Y.x,Y.y);Vt(this._ids,this._dists,0,s-1),this._hullStart=d;let X=3;i[d]=n[M]=m,i[m]=n[d]=M,i[M]=n[m]=d,r[d]=0,r[m]=1,r[M]=2,o.fill(-1),o[this._hashKey(A,p)]=d,o[this._hashKey(x,B)]=m,o[this._hashKey(F,R)]=M,this.trianglesLen=0,this._addTriangle(d,m,M,-1,-1,-1);for(let I=0,W,j;I<this._ids.length;I++){const z=this._ids[I],U=t[2*z],y=t[2*z+1];if(I>0&&Math.abs(U-W)<=Ai&&Math.abs(y-j)<=Ai||(W=U,j=y,z===d||z===m||z===M))continue;let g=0;for(let v=0,S=this._hashKey(U,y);v<this._hashSize&&(g=o[(S+v)%this._hashSize],!(g!==-1&&g!==i[g]));v++);g=n[g];let b=g,P;for(;P=i[b],te(U,y,t[2*b],t[2*b+1],t[2*P],t[2*P+1])>=0;)if(b=P,b===g){b=-1;break}if(b===-1)continue;let E=this._addTriangle(b,z,i[b],-1,-1,r[b]);r[z]=this._legalize(E+2),r[b]=E,X++;let C=i[b];for(;P=i[C],te(U,y,t[2*C],t[2*C+1],t[2*P],t[2*P+1])<0;)E=this._addTriangle(C,z,P,r[z],-1,r[C]),r[z]=this._legalize(E+2),i[C]=C,X--,C=P;if(b===g)for(;P=n[b],te(U,y,t[2*P],t[2*P+1],t[2*b],t[2*b+1])<0;)E=this._addTriangle(P,z,b,-1,r[b],r[P]),this._legalize(E+2),r[P]=E,i[b]=b,X--,b=P;this._hullStart=n[z]=b,i[b]=n[C]=z,i[z]=C,o[this._hashKey(U,y)]=z,o[this._hashKey(t[2*b],t[2*b+1])]=b}this.hull=new Uint32Array(X);for(let I=0,W=this._hullStart;I<X;I++)this.hull[I]=W,W=i[W];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(is(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,s=0;for(;;){const a=i[t],h=t-t%3;if(s=h+(t+2)%3,a===-1){if(o===0)break;t=xe[--o];continue}const u=a-a%3,f=h+(t+1)%3,l=u+(a+2)%3,c=n[s],d=n[t],m=n[f],M=n[l];if(rs(r[2*c],r[2*c+1],r[2*d],r[2*d+1],r[2*m],r[2*m+1],r[2*M],r[2*M+1])){n[t]=M,n[a]=c;const p=i[l];if(p===-1){let B=this._hullStart;do{if(this._hullTri[B]===l){this._hullTri[B]=t;break}B=this._hullPrev[B]}while(B!==this._hullStart)}this._link(t,p),this._link(a,i[s]),this._link(s,l);const x=u+(a+1)%3;o<xe.length&&(xe[o++]=x)}else{if(o===0)break;t=xe[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}getTriangles(){return this.triangles}getHalfedges(){return this.halfedges}getHull(){return this.hull}getPoints(){let t=[];for(let n=0;n<this.coords.length;n+=2)t.push([this.coords[n],this.coords[n+1]]);return t}getTriangleIndices(){let t=[];for(let n=0;n<this.triangles.length;n+=3)t.push([this.triangles[n],this.triangles[n+1],this.triangles[n+2]]);return t}static circumRadius(t,n,i){const r=n[0]-t[0],o=n[1]-t[1],s=i[0]-t[0],a=i[1]-t[1],h=r*r+o*o,u=s*s+a*a,f=.5/(r*a-o*s),l=(a*h-o*u)*f,c=(r*u-s*h)*f;return l*l+c*c}circumcenter(t,n,i,r,o,s){const a=i-t,h=r-n,u=o-t,f=s-n,l=a*a+h*h,c=u*u+f*f,d=.5/(a*f-h*u),m=t+(f*l-h*c)*d,M=n+(a*c-u*l)*d;return{x:m,y:M}}}function is(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function rn(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function rs(e,t,n,i,r,o,s,a){const h=e-s,u=t-a,f=n-s,l=i-a,c=r-s,d=o-a,m=h*h+u*u,M=f*f+l*l,A=c*c+d*d;return h*(l*A-M*d)-u*(f*A-M*c)+m*(f*d-l*c)<0}function os(e,t,n,i,r,o){const s=n-e,a=i-t,h=r-e,u=o-t,f=s*s+a*a,l=h*h+u*u,c=.5/(s*u-a*h),d=(u*f-a*l)*c,m=(s*l-h*f)*c;return d*d+m*m}function Vt(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],s=t[o];let a=r-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const r=n+i>>1;let o=n+1,s=i;oe(e,r,o),t[e[n]]>t[e[i]]&&oe(e,n,i),t[e[o]]>t[e[i]]&&oe(e,o,i),t[e[n]]>t[e[o]]&&oe(e,n,o);const a=e[o],h=t[a];for(;;){do o++;while(t[e[o]]<h);do s--;while(t[e[s]]>h);if(s<o)break;oe(e,o,s)}e[n+1]=e[s],e[s]=a,i-o+1>=s-n?(Vt(e,t,o,i),Vt(e,t,n,s-1)):(Vt(e,t,n,s-1),Vt(e,t,o,i))}}function oe(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function xi(e){return e[0]}function Ei(e){return e[1]}function ss(e){return[3*e,3*e+1,3*e+2]}function as(e,t){return ss(t).map(n=>e.triangles[n])}function ls(e){return Math.floor(e/3)}function us(e,t,n){const i=e[0]*e[0]+e[1]*e[1],r=t[0]*t[0]+t[1]*t[1],o=n[0]*n[0]+n[1]*n[1],s=2*(e[0]*(t[1]-n[1])+t[0]*(n[1]-e[1])+n[0]*(e[1]-t[1]));return[1/s*(i*(t[1]-n[1])+r*(n[1]-e[1])+o*(e[1]-t[1])),1/s*(i*(n[0]-t[0])+r*(e[0]-n[0])+o*(t[0]-e[0]))]}function Ti(e,t,n,i=ns){const r=as(t,n).map(s=>e[s]);let o=us(r[0],r[1],r[2]);return i&&(o=i(o)),o}function Si(e){return e%3===2?e-2:e+1}function hs(e,t){const n=[];let i=t;do{n.push(i);const r=Si(i);i=e.halfedges[r]}while(i!==-1&&i!==t);return n}function on(e,t,n){const i=new Set;for(let r=0;r<t.triangles.length;r++){const o=t.triangles[Si(r)];if(!i.has(o)){i.add(o);const h=hs(t,r).map(ls).map(u=>Ti(e,t,u));n(o,h)}}}class fs{constructor(t,n=xi,i=Ei){V(this,"delaunay");V(this,"points");t instanceof Dt?(this.delaunay=t,this.points=t.getPoints()):(this.points=t,this.delaunay=Dt.from(t,n,i))}getVoronoi(){const{points:t,delaunay:n}=this,i=new Map;return on(t,n,(r,o)=>i.set(r,o)),i}cutVoronoiByMBR(t){const{points:n,delaunay:i}=this,r=new Map;return on(n,i,(o,s)=>{this.isInsideMBR(s,t)||(console.log(s),s=oi(s,t)),r.set(o,s)}),r}robustVoronoi(t){const{points:n,delaunay:i}=this,r=new Map;return on(n,i,(o,s)=>{this.isInsideMBR(s,t)&&r.set(o,s)}),r}isInsideMBR(t,n){const[i,r,o,s]=n;for(let a=0;a<t.length;a++){const[h,u]=t[a];if(h<i||h>o||u<r||u>s)return!1}return!0}}function cs(e,t){const n=new Map;for(let[i,r]of e)t.has(i)?n.set(i,t.get(i)):n.set(i,r);return n}function ds(e){const t=e.map((o,s)=>[...o.toXY(),s]);let n=t[0];for(let o=1;o<t.length;o++)t[o][1]<n[1]&&(n=t[o]);t.sort((o,s)=>{let a=He([n[0],n[1]],[o[0],o[1]]),h=He([n[0],n[1]],[s[0],s[1]]);if(a<h)return-1;if(a>h)return 1;{let u=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2),f=Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2);return u<f?-1:1}});let i=[];i.push(t[0]),i.push(t[1]);for(let o=2;o<t.length;o++){for(;i.length>1&&Ve([i[i.length-2][0],i[i.length-2][1]],[i[i.length-1][0],i[i.length-1][1]],[t[o][0],t[o][1]])<=0;)i.pop();i.push(t[o])}let r=[];for(let o=0;o<i.length;o++){let s=i[o][2];r.push(e[s])}return r}function ys(e,t){let n=e.map(s=>s.toXY());return Dt.from(n).getTriangleIndices().filter(s=>{let a=[n[s[0]],n[s[1]],n[s[2]]];return Dt.circumRadius(a[0],a[1],a[2])*t<1})}w.Circle=tn,w.CountourColorList=vi,w.D2R=tt,w.Delaunator=Dt,w.Dijkstra=Do,w.EPSG3857=fi,w.EPSG900913=qo,w.EPSLN=fn,w.Earth=ui,w.Evented=gr,w.FFT=pn,w.FFT2=Be,w.FFTImag=In,w.FFTImag2=ar,w.FFTReal=Cn,w.FFTReal2=lr,w.FFTShift=kn,w.Geometry=$t,w.GeometryCollection=qt,w.Grid=Ke,w.IFFT=Pn,w.IFFT2=sr,w.IFFTReal=xn,w.IFFTReal2=or,w.K_means=br,w.LineString=Pt,w.MBR2Plane=Jr,w.MultiLineString=zt,w.MultiPoint=bt,w.MultiPolygon=Ut,w.Perlin=Co,w.Point=ut,w.PointInsidePolygon=mo,w.PointOutsideMBR=ri,w.Polygon=xt,w.QuadTree=Jt,w.R2D=Bt,w.Sin3D=ko,w.SphericalMercator=At,w.UUID=cr,w.Voronoi=fs,w.acos=cn,w.add=Ni,w.adjust_lon=bo,w.alphaComplex=ys,w.applyMixins=ur,w.areaFactors=Se,w.areaToArea=Li,w.asin=dn,w.atan2=hn,w.bearing=Ji,w.binDrawGrid2d=Jo,w.binarization=Ao,w.binaryColorBand=pi,w.calculateArrayShape=dr,w.calculateMBR=wo,w.cartesian=Kt,w.cartesianAdd=Oi,w.cartesianAddInPlace=ji,w.cartesianAngle=fe,w.cartesianCross=he,w.cartesianDot=ue,w.cartesianNormalize=mn,w.cartesianNormalizeInPlace=qi,w.cartesianScale=yn,w.ccw=Ve,w.ccwRobust=vo,w.collectionFromFeature=nn,w.collectionFromGeometry=li,w.colorListType=di,w.complateMap=cs,w.concatEL2DArray=yr,w.conj=er,w.containsMBR=Hr,w.convexHull=ds,w.cos=ke,w.cross=_t,w.cutPolygonByMBR=oi,w.dampedSin3D=Fo,w.deMaxMin=To,w.degToDMS=_i,w.degreesToRadians=Ie,w.destination=Qi,w.dmsToDeg=Bi,w.dot=Di,w.drawCountour=Vo,w.drawGrid2d=Uo,w.drawProgress=Pi,w.drawQTree2d=re,w.drawSample=Ko,w.drawSample2=Qo,w.drawText=Zo,w.drawTrueColorGrid2d=ts,w.earthRadius=dt,w.emptyObj=fr,w.equals=Gi,w.equalsMBR=Qr,w.extend=_e,w.factors=Ee,w.factors2=Te,w.fastFFT2=rr,w.feature=Dr,w.fillIndexArray=_n,w.flattenArray=Bn,w.formatNum=zi,w.fromFeatureObj=ai,w.fromGeometryObj=en,w.getAngle=He,w.getMBRWithAntimeridian=to,w.getPointsMBR=qe,w.halfPi=Fe,w.haversin=Ri,w.haversine=Qt,w.hist=zo,w.inCircle=Po,w.inCircleRobust=po,w.intermediatePoint=Hi,w.interpolate=Xi,w.interpolate2=$i,w.intersection=Je,w.intersectionPolygon=si,w.intersectsMBR=Jn,w.isEPSG3857=jo,w.isEPSG4326=Oo,w.isFloat=Ui,w.isPotentialGeoObject=Ln,w.iterPolygonEdge=go,w.lengthToRadians=Ci,w.mbrToPolygon=Hn,w.mbrToRectangle=Vn,w.merge=$r,w.mergeArcs=zn,w.mergeMBR=Un,w.mergePointMBR=Ur,w.mesh=Yr,w.meshArcs=$n,w.metersTo=an,w.midpoint=Vi,w.neighbors=Nr,w.normalize=Wi,w.object=Zt,w.overlapsMBR=Kr,w.pi=Ce,w.plane2MBR=Vr,w.planeIntersection=Zi,w.planePolygonArea=wn,w.pointInEdge=ve,w.pointInMBR=we,w.pointInMBRWithAntimeridian=Zr,w.prePointInPolygon=Mo,w.pseudoColorBandFactory=Xo,w.radiansToDegrees=Fi,w.radiansToLength=Ii,w.randomIndexArray=Gn,w.rectangleToMBR=no,w.reverse=Yn,w.round=wr,w.sample=tr,w.scale=Yi,w.sign=Xt,w.simpleColorBand=Ae,w.simpleColorBandFactory=Yo,w.simplePseudoColorBand=$o,w.sin=ae,w.sphereIntersection=Ki,w.spherical=Ht,w.sphericalArea=Le,w.splitMBRWithAntimeridian=eo,w.sqrt=le,w.squareMetersTo=un,w.stretchType=ci,w.subColumnInEL2DArray=mr,w.subdivide2QTree=xo,w.testProgress=es,w.throttle=hr,w.toLineString=Ro,w.toMeters=sn,w.toMultiPoint=Go,w.toPoint=_o,w.toSquareMeters=ln,w.topology=Rr,w.transform=Nn,w.triangleCenter=Ti,w.trueColorBand=Mi,w.trueColorBandFactory=No,w.unitToUnit=ki,w.untransform=qr,w.worleyNoise=Lo,w.zebraNoise=Bo,Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});
