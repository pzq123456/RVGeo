(function(lt,it){typeof exports=="object"&&typeof module<"u"?it(exports):typeof define=="function"&&define.amd?define(["exports"],it):(lt=typeof globalThis<"u"?globalThis:lt||self,it(lt.RVGeo={}))})(this,function(lt){"use strict";var ei=Object.defineProperty;var ni=(lt,it,T)=>it in lt?ei(lt,it,{enumerable:!0,configurable:!0,writable:!0,value:T}):lt[it]=T;var Z=(lt,it,T)=>(ni(lt,typeof it!="symbol"?it+"":it,T),T);const it=11102230246251565e-32,T=134217729,sn=(3+8*it)*it;function ht(e,t,n,r,s){let o,i,a,f,u=t[0],l=r[0],h=0,m=0;l>u==l>-u?(o=u,u=t[++h]):(o=l,l=r[++m]);let b=0;if(h<e&&m<n)for(l>u==l>-u?(i=u+o,a=o-(i-u),u=t[++h]):(i=l+o,a=o-(i-l),l=r[++m]),o=i,a!==0&&(s[b++]=a);h<e&&m<n;)l>u==l>-u?(i=o+u,f=i-o,a=o-(i-f)+(u-f),u=t[++h]):(i=o+l,f=i-o,a=o-(i-f)+(l-f),l=r[++m]),o=i,a!==0&&(s[b++]=a);for(;h<e;)i=o+u,f=i-o,a=o-(i-f)+(u-f),u=t[++h],o=i,a!==0&&(s[b++]=a);for(;m<n;)i=o+l,f=i-o,a=o-(i-f)+(l-f),l=r[++m],o=i,a!==0&&(s[b++]=a);return(o!==0||b===0)&&(s[b++]=o),b}function At(e,t,n,r,s,o,i,a){return ht(ht(e,t,n,r,i),i,s,o,a)}function _(e,t,n,r){let s,o,i,a,f,u,l,h,m,b,p;l=T*n,b=l-(l-n),p=n-b;let g=t[0];s=g*n,l=T*g,h=l-(l-g),m=g-h,i=m*p-(s-h*b-m*b-h*p);let x=0;i!==0&&(r[x++]=i);for(let P=1;P<e;P++)g=t[P],a=g*n,l=T*g,h=l-(l-g),m=g-h,f=m*p-(a-h*b-m*b-h*p),o=s+f,u=o-s,i=s-(o-u)+(f-u),i!==0&&(r[x++]=i),s=a+o,i=o-(s-a),i!==0&&(r[x++]=i);return(s!==0||x===0)&&(r[x++]=s),x}function on(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function J(e){return new Float64Array(e)}const dr=(3+16*it)*it,mr=(2+12*it)*it,pr=(9+64*it)*it*it,qt=J(4),an=J(8),ln=J(12),un=J(16),yt=J(4);function yr(e,t,n,r,s,o,i){let a,f,u,l,h,m,b,p,g,x,P,j,U,$,tt,st,at,ot;const C=e-s,q=n-s,v=t-o,z=r-o;$=C*z,m=T*C,b=m-(m-C),p=C-b,m=T*z,g=m-(m-z),x=z-g,tt=p*x-($-b*g-p*g-b*x),st=v*q,m=T*v,b=m-(m-v),p=v-b,m=T*q,g=m-(m-q),x=q-g,at=p*x-(st-b*g-p*g-b*x),P=tt-at,h=tt-P,qt[0]=tt-(P+h)+(h-at),j=$+P,h=j-$,U=$-(j-h)+(P-h),P=U-st,h=U-P,qt[1]=U-(P+h)+(h-st),ot=j+P,h=ot-j,qt[2]=j-(ot-h)+(P-h),qt[3]=ot;let et=on(4,qt),c=mr*i;if(et>=c||-et>=c||(h=e-C,a=e-(C+h)+(h-s),h=n-q,u=n-(q+h)+(h-s),h=t-v,f=t-(v+h)+(h-o),h=r-z,l=r-(z+h)+(h-o),a===0&&f===0&&u===0&&l===0)||(c=pr*i+sn*Math.abs(et),et+=C*l+z*a-(v*u+q*f),et>=c||-et>=c))return et;$=a*z,m=T*a,b=m-(m-a),p=a-b,m=T*z,g=m-(m-z),x=z-g,tt=p*x-($-b*g-p*g-b*x),st=f*q,m=T*f,b=m-(m-f),p=f-b,m=T*q,g=m-(m-q),x=q-g,at=p*x-(st-b*g-p*g-b*x),P=tt-at,h=tt-P,yt[0]=tt-(P+h)+(h-at),j=$+P,h=j-$,U=$-(j-h)+(P-h),P=U-st,h=U-P,yt[1]=U-(P+h)+(h-st),ot=j+P,h=ot-j,yt[2]=j-(ot-h)+(P-h),yt[3]=ot;const d=ht(4,qt,4,yt,an);$=C*l,m=T*C,b=m-(m-C),p=C-b,m=T*l,g=m-(m-l),x=l-g,tt=p*x-($-b*g-p*g-b*x),st=v*u,m=T*v,b=m-(m-v),p=v-b,m=T*u,g=m-(m-u),x=u-g,at=p*x-(st-b*g-p*g-b*x),P=tt-at,h=tt-P,yt[0]=tt-(P+h)+(h-at),j=$+P,h=j-$,U=$-(j-h)+(P-h),P=U-st,h=U-P,yt[1]=U-(P+h)+(h-st),ot=j+P,h=ot-j,yt[2]=j-(ot-h)+(P-h),yt[3]=ot;const y=ht(d,an,4,yt,ln);$=a*l,m=T*a,b=m-(m-a),p=a-b,m=T*l,g=m-(m-l),x=l-g,tt=p*x-($-b*g-p*g-b*x),st=f*u,m=T*f,b=m-(m-f),p=f-b,m=T*u,g=m-(m-u),x=u-g,at=p*x-(st-b*g-p*g-b*x),P=tt-at,h=tt-P,yt[0]=tt-(P+h)+(h-at),j=$+P,h=j-$,U=$-(j-h)+(P-h),P=U-st,h=U-P,yt[1]=U-(P+h)+(h-st),ot=j+P,h=ot-j,yt[2]=j-(ot-h)+(P-h),yt[3]=ot;const A=ht(y,ln,4,yt,un);return un[A-1]}function Vt(e,t,n,r,s,o){const i=(t-o)*(n-s),a=(e-s)*(r-o),f=i-a,u=Math.abs(i+a);return Math.abs(f)>=dr*u?f:-yr(e,t,n,r,s,o,u)}const wr=(10+96*it)*it,gr=(4+48*it)*it,br=(44+576*it)*it*it,Lt=J(4),Dt=J(4),Bt=J(4),Rt=J(4),Mt=J(4),Tt=J(4),wt=J(4),gt=J(4),Ae=J(8),Se=J(8),Ee=J(8),_e=J(8),Re=J(8),Me=J(8),re=J(8),se=J(8),oe=J(8),It=J(4),jt=J(4),Ft=J(4),L=J(8),I=J(16),nt=J(16),rt=J(16),V=J(32),kt=J(32),ut=J(48),bt=J(64);let zt=J(1152),Te=J(1152);function ct(e,t,n){e=ht(e,zt,t,n,Te);const r=zt;return zt=Te,Te=r,e}function Ar(e,t,n,r,s,o,i,a,f){let u,l,h,m,b,p,g,x,P,j,U,$,tt,st,at,ot,C,q,v,z,et,c,d,y,A,E,M,w,R,D,O,B,k,F,N;const H=e-i,X=n-i,W=s-i,K=t-a,Y=r-a,Q=o-a;O=X*Q,d=T*X,y=d-(d-X),A=X-y,d=T*Q,E=d-(d-Q),M=Q-E,B=A*M-(O-y*E-A*E-y*M),k=W*Y,d=T*W,y=d-(d-W),A=W-y,d=T*Y,E=d-(d-Y),M=Y-E,F=A*M-(k-y*E-A*E-y*M),w=B-F,c=B-w,Lt[0]=B-(w+c)+(c-F),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D-k,c=D-w,Lt[1]=D-(w+c)+(c-k),N=R+w,c=N-R,Lt[2]=R-(N-c)+(w-c),Lt[3]=N,O=W*K,d=T*W,y=d-(d-W),A=W-y,d=T*K,E=d-(d-K),M=K-E,B=A*M-(O-y*E-A*E-y*M),k=H*Q,d=T*H,y=d-(d-H),A=H-y,d=T*Q,E=d-(d-Q),M=Q-E,F=A*M-(k-y*E-A*E-y*M),w=B-F,c=B-w,Dt[0]=B-(w+c)+(c-F),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D-k,c=D-w,Dt[1]=D-(w+c)+(c-k),N=R+w,c=N-R,Dt[2]=R-(N-c)+(w-c),Dt[3]=N,O=H*Y,d=T*H,y=d-(d-H),A=H-y,d=T*Y,E=d-(d-Y),M=Y-E,B=A*M-(O-y*E-A*E-y*M),k=X*K,d=T*X,y=d-(d-X),A=X-y,d=T*K,E=d-(d-K),M=K-E,F=A*M-(k-y*E-A*E-y*M),w=B-F,c=B-w,Bt[0]=B-(w+c)+(c-F),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D-k,c=D-w,Bt[1]=D-(w+c)+(c-k),N=R+w,c=N-R,Bt[2]=R-(N-c)+(w-c),Bt[3]=N,u=ht(ht(ht(_(_(4,Lt,H,L),L,H,I),I,_(_(4,Lt,K,L),L,K,nt),nt,V),V,ht(_(_(4,Dt,X,L),L,X,I),I,_(_(4,Dt,Y,L),L,Y,nt),nt,kt),kt,bt),bt,ht(_(_(4,Bt,W,L),L,W,I),I,_(_(4,Bt,Q,L),L,Q,nt),nt,V),V,zt);let Ct=on(u,zt),ne=gr*f;if(Ct>=ne||-Ct>=ne||(c=e-H,l=e-(H+c)+(c-i),c=t-K,b=t-(K+c)+(c-a),c=n-X,h=n-(X+c)+(c-i),c=r-Y,p=r-(Y+c)+(c-a),c=s-W,m=s-(W+c)+(c-i),c=o-Q,g=o-(Q+c)+(c-a),l===0&&h===0&&m===0&&b===0&&p===0&&g===0)||(ne=br*f+sn*Math.abs(Ct),Ct+=(H*H+K*K)*(X*g+Q*h-(Y*m+W*p))+2*(H*l+K*b)*(X*Q-Y*W)+((X*X+Y*Y)*(W*b+K*m-(Q*l+H*g))+2*(X*h+Y*p)*(W*K-Q*H))+((W*W+Q*Q)*(H*p+Y*l-(K*h+X*b))+2*(W*m+Q*g)*(H*Y-K*X)),Ct>=ne||-Ct>=ne))return Ct;if((h!==0||p!==0||m!==0||g!==0)&&(O=H*H,d=T*H,y=d-(d-H),A=H-y,B=A*A-(O-y*y-(y+y)*A),k=K*K,d=T*K,y=d-(d-K),A=K-y,F=A*A-(k-y*y-(y+y)*A),w=B+F,c=w-B,Rt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,Rt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,Rt[2]=R-(N-c)+(w-c),Rt[3]=N),(m!==0||g!==0||l!==0||b!==0)&&(O=X*X,d=T*X,y=d-(d-X),A=X-y,B=A*A-(O-y*y-(y+y)*A),k=Y*Y,d=T*Y,y=d-(d-Y),A=Y-y,F=A*A-(k-y*y-(y+y)*A),w=B+F,c=w-B,Mt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,Mt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,Mt[2]=R-(N-c)+(w-c),Mt[3]=N),(l!==0||b!==0||h!==0||p!==0)&&(O=W*W,d=T*W,y=d-(d-W),A=W-y,B=A*A-(O-y*y-(y+y)*A),k=Q*Q,d=T*Q,y=d-(d-Q),A=Q-y,F=A*A-(k-y*y-(y+y)*A),w=B+F,c=w-B,Tt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,Tt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,Tt[2]=R-(N-c)+(w-c),Tt[3]=N),l!==0&&(x=_(4,Lt,l,Ae),u=ct(u,At(_(x,Ae,2*H,I),I,_(_(4,Tt,l,L),L,Y,nt),nt,_(_(4,Mt,l,L),L,-Q,rt),rt,V,ut),ut)),b!==0&&(P=_(4,Lt,b,Se),u=ct(u,At(_(P,Se,2*K,I),I,_(_(4,Mt,b,L),L,W,nt),nt,_(_(4,Tt,b,L),L,-X,rt),rt,V,ut),ut)),h!==0&&(j=_(4,Dt,h,Ee),u=ct(u,At(_(j,Ee,2*X,I),I,_(_(4,Rt,h,L),L,Q,nt),nt,_(_(4,Tt,h,L),L,-K,rt),rt,V,ut),ut)),p!==0&&(U=_(4,Dt,p,_e),u=ct(u,At(_(U,_e,2*Y,I),I,_(_(4,Tt,p,L),L,H,nt),nt,_(_(4,Rt,p,L),L,-W,rt),rt,V,ut),ut)),m!==0&&($=_(4,Bt,m,Re),u=ct(u,At(_($,Re,2*W,I),I,_(_(4,Mt,m,L),L,K,nt),nt,_(_(4,Rt,m,L),L,-Y,rt),rt,V,ut),ut)),g!==0&&(tt=_(4,Bt,g,Me),u=ct(u,At(_(tt,Me,2*Q,I),I,_(_(4,Rt,g,L),L,X,nt),nt,_(_(4,Mt,g,L),L,-H,rt),rt,V,ut),ut)),l!==0||b!==0){if(h!==0||p!==0||m!==0||g!==0?(O=h*Q,d=T*h,y=d-(d-h),A=h-y,d=T*Q,E=d-(d-Q),M=Q-E,B=A*M-(O-y*E-A*E-y*M),k=X*g,d=T*X,y=d-(d-X),A=X-y,d=T*g,E=d-(d-g),M=g-E,F=A*M-(k-y*E-A*E-y*M),w=B+F,c=w-B,wt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,wt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,wt[2]=R-(N-c)+(w-c),wt[3]=N,O=m*-Y,d=T*m,y=d-(d-m),A=m-y,d=T*-Y,E=d-(d- -Y),M=-Y-E,B=A*M-(O-y*E-A*E-y*M),k=W*-p,d=T*W,y=d-(d-W),A=W-y,d=T*-p,E=d-(d- -p),M=-p-E,F=A*M-(k-y*E-A*E-y*M),w=B+F,c=w-B,gt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,gt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,gt[2]=R-(N-c)+(w-c),gt[3]=N,at=ht(4,wt,4,gt,se),O=h*g,d=T*h,y=d-(d-h),A=h-y,d=T*g,E=d-(d-g),M=g-E,B=A*M-(O-y*E-A*E-y*M),k=m*p,d=T*m,y=d-(d-m),A=m-y,d=T*p,E=d-(d-p),M=p-E,F=A*M-(k-y*E-A*E-y*M),w=B-F,c=B-w,jt[0]=B-(w+c)+(c-F),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D-k,c=D-w,jt[1]=D-(w+c)+(c-k),N=R+w,c=N-R,jt[2]=R-(N-c)+(w-c),jt[3]=N,q=4):(se[0]=0,at=1,jt[0]=0,q=1),l!==0){const mt=_(at,se,l,rt);u=ct(u,ht(_(x,Ae,l,I),I,_(mt,rt,2*H,V),V,ut),ut);const pt=_(q,jt,l,L);u=ct(u,At(_(pt,L,2*H,I),I,_(pt,L,l,nt),nt,_(mt,rt,l,V),V,kt,bt),bt),p!==0&&(u=ct(u,_(_(4,Tt,l,L),L,p,I),I)),g!==0&&(u=ct(u,_(_(4,Mt,-l,L),L,g,I),I))}if(b!==0){const mt=_(at,se,b,rt);u=ct(u,ht(_(P,Se,b,I),I,_(mt,rt,2*K,V),V,ut),ut);const pt=_(q,jt,b,L);u=ct(u,At(_(pt,L,2*K,I),I,_(pt,L,b,nt),nt,_(mt,rt,b,V),V,kt,bt),bt)}}if(h!==0||p!==0){if(m!==0||g!==0||l!==0||b!==0?(O=m*K,d=T*m,y=d-(d-m),A=m-y,d=T*K,E=d-(d-K),M=K-E,B=A*M-(O-y*E-A*E-y*M),k=W*b,d=T*W,y=d-(d-W),A=W-y,d=T*b,E=d-(d-b),M=b-E,F=A*M-(k-y*E-A*E-y*M),w=B+F,c=w-B,wt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,wt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,wt[2]=R-(N-c)+(w-c),wt[3]=N,z=-Q,et=-g,O=l*z,d=T*l,y=d-(d-l),A=l-y,d=T*z,E=d-(d-z),M=z-E,B=A*M-(O-y*E-A*E-y*M),k=H*et,d=T*H,y=d-(d-H),A=H-y,d=T*et,E=d-(d-et),M=et-E,F=A*M-(k-y*E-A*E-y*M),w=B+F,c=w-B,gt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,gt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,gt[2]=R-(N-c)+(w-c),gt[3]=N,ot=ht(4,wt,4,gt,oe),O=m*b,d=T*m,y=d-(d-m),A=m-y,d=T*b,E=d-(d-b),M=b-E,B=A*M-(O-y*E-A*E-y*M),k=l*g,d=T*l,y=d-(d-l),A=l-y,d=T*g,E=d-(d-g),M=g-E,F=A*M-(k-y*E-A*E-y*M),w=B-F,c=B-w,Ft[0]=B-(w+c)+(c-F),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D-k,c=D-w,Ft[1]=D-(w+c)+(c-k),N=R+w,c=N-R,Ft[2]=R-(N-c)+(w-c),Ft[3]=N,v=4):(oe[0]=0,ot=1,Ft[0]=0,v=1),h!==0){const mt=_(ot,oe,h,rt);u=ct(u,ht(_(j,Ee,h,I),I,_(mt,rt,2*X,V),V,ut),ut);const pt=_(v,Ft,h,L);u=ct(u,At(_(pt,L,2*X,I),I,_(pt,L,h,nt),nt,_(mt,rt,h,V),V,kt,bt),bt),g!==0&&(u=ct(u,_(_(4,Rt,h,L),L,g,I),I)),b!==0&&(u=ct(u,_(_(4,Tt,-h,L),L,b,I),I))}if(p!==0){const mt=_(ot,oe,p,rt);u=ct(u,ht(_(U,_e,p,I),I,_(mt,rt,2*Y,V),V,ut),ut);const pt=_(v,Ft,p,L);u=ct(u,At(_(pt,L,2*Y,I),I,_(pt,L,p,nt),nt,_(mt,rt,p,V),V,kt,bt),bt)}}if(m!==0||g!==0){if(l!==0||b!==0||h!==0||p!==0?(O=l*Y,d=T*l,y=d-(d-l),A=l-y,d=T*Y,E=d-(d-Y),M=Y-E,B=A*M-(O-y*E-A*E-y*M),k=H*p,d=T*H,y=d-(d-H),A=H-y,d=T*p,E=d-(d-p),M=p-E,F=A*M-(k-y*E-A*E-y*M),w=B+F,c=w-B,wt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,wt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,wt[2]=R-(N-c)+(w-c),wt[3]=N,z=-K,et=-b,O=h*z,d=T*h,y=d-(d-h),A=h-y,d=T*z,E=d-(d-z),M=z-E,B=A*M-(O-y*E-A*E-y*M),k=X*et,d=T*X,y=d-(d-X),A=X-y,d=T*et,E=d-(d-et),M=et-E,F=A*M-(k-y*E-A*E-y*M),w=B+F,c=w-B,gt[0]=B-(w-c)+(F-c),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D+k,c=w-D,gt[1]=D-(w-c)+(k-c),N=R+w,c=N-R,gt[2]=R-(N-c)+(w-c),gt[3]=N,st=ht(4,wt,4,gt,re),O=l*p,d=T*l,y=d-(d-l),A=l-y,d=T*p,E=d-(d-p),M=p-E,B=A*M-(O-y*E-A*E-y*M),k=h*b,d=T*h,y=d-(d-h),A=h-y,d=T*b,E=d-(d-b),M=b-E,F=A*M-(k-y*E-A*E-y*M),w=B-F,c=B-w,It[0]=B-(w+c)+(c-F),R=O+w,c=R-O,D=O-(R-c)+(w-c),w=D-k,c=D-w,It[1]=D-(w+c)+(c-k),N=R+w,c=N-R,It[2]=R-(N-c)+(w-c),It[3]=N,C=4):(re[0]=0,st=1,It[0]=0,C=1),m!==0){const mt=_(st,re,m,rt);u=ct(u,ht(_($,Re,m,I),I,_(mt,rt,2*W,V),V,ut),ut);const pt=_(C,It,m,L);u=ct(u,At(_(pt,L,2*W,I),I,_(pt,L,m,nt),nt,_(mt,rt,m,V),V,kt,bt),bt),b!==0&&(u=ct(u,_(_(4,Mt,m,L),L,b,I),I)),p!==0&&(u=ct(u,_(_(4,Rt,-m,L),L,p,I),I))}if(g!==0){const mt=_(st,re,g,rt);u=ct(u,ht(_(tt,Me,g,I),I,_(mt,rt,2*Q,V),V,ut),ut);const pt=_(C,It,g,L);u=ct(u,At(_(pt,L,2*Q,I),I,_(pt,L,g,nt),nt,_(mt,rt,g,V),V,kt,bt),bt)}}return zt[u-1]}function Sr(e,t,n,r,s,o,i,a){const f=e-i,u=n-i,l=s-i,h=t-a,m=r-a,b=o-a,p=u*b,g=l*m,x=f*f+h*h,P=l*h,j=f*b,U=u*u+m*m,$=f*m,tt=u*h,st=l*l+b*b,at=x*(p-g)+U*(P-j)+st*($-tt),ot=(Math.abs(p)+Math.abs(g))*x+(Math.abs(P)+Math.abs(j))*U+(Math.abs($)+Math.abs(tt))*st,C=wr*ot;return at>C||-at>C?at:Ar(e,t,n,r,s,o,i,a,ot)}function Pe(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}function cn(e){return Math.abs(e)<=180?e:e-Ht(e)*360}function Ht(e){return e<0?-1:e>0?1:0}function Oe(e,t,n){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let r=e[0],s=e[1],o=t[0],i=t[1],a=n[0],f=n[1],u=(o-r)*(f-s)-(i-s)*(a-r);return u=Ht(u),u}function Gt(e,t){let n=Array.isArray(e)?e:e.toXY(),r=Array.isArray(t)?t:t.toXY(),s=Math.atan2(r[1]-n[1],r[0]-n[0]);return s=s*180/Math.PI,s<0&&(s+=360),s}function Er(e,t,n,r=!0){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let s=e[0],o=e[1],i=t[0],a=t[1],f=n[0],u=n[1],l=Vt(s,o,i,a,f,u);return r&&(l=-l),l=Ht(l),l}function _r(e,t,n,r){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),r=Array.isArray(r)?r:r.toXY();let s=e[0],o=e[1],i=t[0],a=t[1],f=n[0],u=n[1],l=r[0],h=r[1],m=Sr(s,o,i,a,f,u,l,h);return m=Ht(m),m}function Rr(e,t,n,r){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY(),r=Array.isArray(r)?r:r.toXY();let s=e[0],o=e[1],i=t[0],a=t[1],f=n[0],u=n[1],l=r[0],h=r[1];const m=s-l,b=o-h,p=i-l,g=a-h,x=f-l,P=u-h,j=m*m+b*b,U=p*p+g*g,$=x*x+P*P;let tt=m*(g*$-U*P)-b*(p*$-U*x)+j*(p*P-g*x);return Ht(tt)}function Mr(e){let t=[],n=e;for(;Array.isArray(n);)t.push(n.length),n=n[0];return t}function hn(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?t.push(...hn(r)):t.push(r)}return t}function fn(e,t){let n=[];for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?n.push(fn(s,t)):n.push(t[s])}return n}function Tr(e,t){return e.forEach((n,r)=>{e[r]=n.concat(t[r])}),e}function Pr(e,t){Array.isArray(t)||(t=[t]),t.forEach(r=>{if(r<0||r>=e[0].length)throw new Error("indexArray is illegal!")});let n=[];return e.forEach(r=>{let s=[];Array.isArray(t)?t.forEach(o=>{s.push(r[o])}):s.push(r[t]),n.push(s)}),n}function Or(e,t){if(t>e)throw new Error("num must be less than length!");const n=[];for(;n.length<t;){const r=Math.floor(Math.random()*e);n.includes(r)||n.push(r)}return n}const xr=Object.freeze(Object.defineProperty({__proto__:null,adjust_lon:cn,calculateArrayShape:Mr,ccw:Oe,ccwRobust:Er,concatEL2DArray:Tr,fillIndexArray:fn,flattenArray:hn,getAngle:Gt,inCircle:Rr,inCircleRobust:_r,randomIndexArray:Or,round:Pe,sign:Ht,subColumnInEL2DArray:Pr},Symbol.toStringTag,{value:"Module"})),dn={a:6378137,b:63710088e-1,Name:"Normal Sphere ( r= 6371008.8 )"},dt=dn.a,xe={centimeters:dt*100,centimetres:dt*100,degrees:360/(2*Math.PI),feet:dt*3.28084,inches:dt*39.37,kilometers:dt/1e3,kilometres:dt/1e3,meters:dt,metres:dt,miles:dt/1609.344,millimeters:dt*1e3,millimetres:dt*1e3,nauticalmiles:dt/1852,radians:1,yards:dt*1.0936},Ce={centimeters:1*100,centimetres:1*100,degrees:360/(2*Math.PI)*1/dt,feet:1*3.28084,inches:1*39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1*1e3,millimetres:1*1e3,nauticalmiles:1/1852,radians:1/dt,yards:1*1.0936},Le={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function De(e,t="kilometers"){const n=xe[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Cr(e,t="kilometers"){const n=xe[t];if(!n)throw new Error(t+" units is invalid");return e/n}function Xt(e){return e%360*Math.PI/180}function Lr(e){return e%(2*Math.PI)*180/Math.PI}function mn(e,t){const n=Ce[t];if(!n)throw new Error(t+" units is invalid");return e/n}function ie(e,t){const n=Ce[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Dr(e,t,n){return ie(mn(e,t),n)}const Br=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Le,degreesToRadians:Xt,earthRadius:dt,factors:xe,factors2:Ce,lengthToRadians:Cr,metersTo:ie,radiansToDegrees:Lr,radiansToLength:De,toMeters:mn,unitTounit:Dr},Symbol.toStringTag,{value:"Module"}));function St(e,t="meters",n=6){const r=20037508342789244e-9,s=dt,o=Array.isArray(e)?e:e.to2DArray(),i=cn(o[0]);let a=Xt(i),f=Xt(o[1]);return a=De(a,"meters"),f=s*Math.log(Math.tan(Math.PI*.25+.5*f)),a>r&&(a=r),a<-r&&(a=-r),f>r&&(f=r),f<-r&&(f=-r),a=Pe(ie(a,t),n),f=Pe(ie(f,t),n),[a,f]}function Ut(e){var t=180/Math.PI,n=6378137;return[e[0]*t/n,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/n)))*t]}function kr(e,t="meters",n=6){if(e[0]instanceof Et){let r=[];for(let s=0;s<e.length;s++)r.push(St(e[s],t,n));return r}else{let r=[];for(let s=0;s<e.length;s++)r.push(St(e[s],t,n));return r}}function Nr(e,t="meters",n=6){let r=[],s=St([e[0],e[1]],t,n),o=St([e[2],e[3]],t,n);return r=[s[0],s[1],o[0],o[1]],r}function Ir(e,t="meters",n=6){let r=[],s=Ut([e[0],e[1]]),o=Ut([e[2],e[3]]);return r=[s[0],s[1],o[0],o[1]],r}const jr=Object.freeze(Object.defineProperty({__proto__:null,MBR2Plane:Nr,convertToMercator:St,convertToMercators:kr,convertToWgs84:Ut,plane2MBR:Ir},Symbol.toStringTag,{value:"Module"}));function pn(e){return{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2,w:e[2]-e[0],h:e[3]-e[1]}}function Fr(e){return[e.x-e.w/2,e.y-e.h/2,e.x+e.w/2,e.y+e.h/2]}function yn(e){let t=e[0],n=e[1],r=e[2],s=e[3];return[[t,n],[t,s],[r,s],[r,n],[t,n]]}function Ur(e){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let o=0;o<e.length;o++){let i=e[o][0],a=e[o][1];t=Math.min(t,i),n=Math.min(n,a),r=Math.max(r,i),s=Math.max(s,a)}return[t,n,r,s]}function wn(e,t){let n=t[0],r=t[1],s=t[2],o=t[3],i=e[0],a=e[1];return i>=n&&i<=s&&a>=r&&a<=o}class gn{constructor(t,n,...r){Z(this,"type");Z(this,"properties");Z(this,"MBR");Z(this,"coordinates");this.type=t,this.properties=r,this.coordinates=n,this.MBR=this.calculateMBR()}getPropertyArray(){return this.properties}getMBR(){return this.MBR}}class Et{constructor(t,n,r=0,...s){Z(this,"lon");Z(this,"lat");Z(this,"asl");Z(this,"type","Point");Z(this,"properties");this.lon=t,this.lat=n,this.asl=r,this.properties=s}toXY(t="meters"){return St(this,t)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat],properties:{...this.properties}}}to2DArray(){return[this.lon,this.lat]}to3DArray(){return[this.lon,this.lat,this.asl]}toString(){return`Point(${this.lon}, ${this.lat}, ${this.asl})`}getPropertyArray(){return this.properties}static isPoint(t){return t.type==="Point"}}class Be extends gn{constructor(t,...n){if(t[0]instanceof Array){t=t;let r=[];for(let s=0;s<t.length;s++)r.push(new Et(t[s][0],t[s][1]));t=r}super("MultiPoint",t,...n)}getCorrinatesPropertyArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].getPropertyArray();t.push(r)}return t}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].to2DArray();t.push(r)}return t}toXYArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toXY();t.push(r)}return t}toGeoJSON(){return{type:"MultiPoint",coordinates:this.toArray(),properties:{...this.properties}}}calculateMBR(){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let o=0;o<this.coordinates.length;o++){let i=this.coordinates[o].to2DArray();t=Math.min(t,i[0]),n=Math.min(n,i[1]),r=Math.max(r,i[0]),s=Math.max(s,i[1])}return[t,n,r,s]}calculateCentroid(t){if(t){let n=0;for(let a=0;a<t.length;a++)n+=t[a];for(let a=0;a<t.length;a++)t[a]/=n;let r=0,s=0;for(let a=0;a<this.coordinates.length;a++){let f=this.coordinates[a].to2DArray();r+=f[0]*t[a],s+=f[1]*t[a]}let o=r,i=s;return new Et(o,i)}else{let n=0,r=0;for(let i=0;i<this.coordinates.length;i++){let a=this.coordinates[i].to2DArray();n+=a[0],r+=a[1]}let s=n/this.coordinates.length,o=r/this.coordinates.length;return new Et(s,o)}}deletePoint(t){this.coordinates.splice(t,1),this.MBR=this.calculateMBR()}addPoint(t){let n=Et.isPoint(t)?t:new Et(t[0],t[1]);this.coordinates.push(n),this.MBR=this.calculateMBR()}popPoint(){this.coordinates.pop(),this.MBR=this.calculateMBR()}static isMultiPoint(t){return t.type==="MultiPoint"}}class ke extends Be{constructor(t,...n){super(t,...n),this.type="LineString"}static isLineString(t){return t.type==="LineString"}sortPoints(){let n=this.calculateCentroid().toXY();this.coordinates.sort((r,s)=>{let o=Gt(n,r.toXY()),i=Gt(n,s.toXY());return o<i?-1:o>i?1:0})}}class bn extends gn{constructor(t,...n){super("MultiLineString",t,...n)}calculateMBR(){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let o=0;o<this.coordinates.length;o++){let i=this.coordinates[o].getMBR();t=Math.min(t,i[0]),n=Math.min(n,i[1]),r=Math.max(r,i[2]),s=Math.max(s,i[3])}return[t,n,r,s]}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toArray();t.push(r)}return t}toGeoJSON(){return{type:"MultiLineString",coordinates:this.toArray(),properties:{...this.properties}}}static isMultiLineString(t){return t.type==="MultiLineString"}}class vr extends bn{constructor(t,...n){super(t,...n),this.type="Polygon"}static isPolygon(t){return t.type==="Polygon"}}class qr{constructor(t,n,r){Z(this,"x");Z(this,"y");Z(this,"r");Z(this,"rSquared");this.x=t,this.y=n,this.r=r,this.rSquared=this.r*this.r}contains(t,n=0){let r=t[0],s=t[1];return Math.pow(r-this.x,2)+Math.pow(s-this.y,2)-this.rSquared<=n}intersects(t){let n=pn(t),r=Math.abs(n.x-this.x),s=Math.abs(n.y-this.y),o=this.r,i=n.w/2,a=n.h/2,f=Math.pow(r-i,2)+Math.pow(s-a,2);return r>o+i||s>o+a?!1:r<=i||s<=a?!0:f<=this.rSquared}}const zr=Object.freeze(Object.defineProperty({__proto__:null,Circle:qr,LineString:ke,MultiLineString:bn,MultiPoint:Be,Point:Et,Polygon:vr,getPointsMBR:Ur,mbrToPolygon:yn,mbrToRectangle:pn,pointInMBR:wn,rectangleToMBR:Fr},Symbol.toStringTag,{value:"Module"})),An=dn.a;function Hr(e,t,n="kilometers"){Array.isArray(e)&&(e=[...e]),Array.isArray(t)&&(t=[...t]);const r=Array.isArray(e)?e:e.to2DArray(),s=Array.isArray(t)?t:t.to2DArray();r.map((l,h)=>{r[h]=Xt(l)}),s.map((l,h)=>{s[h]=Xt(l)});const o=s[1]-r[1],i=s[0]-r[0],a=r[1],f=s[1],u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(a)*Math.cos(f)));return De(u,n)}function Xr(e,t="kilometers"){let n=ke.isLineString(e)?e.toXYArray():e;if(n.length<3)return 0;Et.isPoint(n[0])&&(n=n,n.map((o,i)=>{n[i]=o.toXY()})),n=n;let r=0,s=n.length-1;for(let o=0;o<n.length;o++)r+=(n[s][0]+n[o][0])*(n[s][1]-n[o][1]),s=o;return r=r*Le[t]/2,Math.abs(r)}function Wr(e,t="kilometers"){let n=ke.isLineString(e)?e.toArray():e;if(n.length<3)return 0;Et.isPoint(n[0])&&(n=n,n.map((i,a)=>{n[a]=i.to2DArray()})),n=n;let r=0,s=n.length,o=[];for(let i=0;i<s;i++){o.push([]);for(let a=0;a<2;a++){let f=Xt(n[i][a]);o[i].push(f)}}for(let i=0;i<s;i++){let a=(i+1)%s,f=(i+2)%s;r+=(o[i][0]-o[f][0])*Math.sin(o[a][1])}return r=r*An*An/2,r=r*Le[t],Math.abs(r)}const Yr=Object.freeze(Object.defineProperty({__proto__:null,PlanePolygonArea:Xr,SpherePolygonArea:Wr,haversine:Hr},Symbol.toStringTag,{value:"Module"}));function ae(e,t){return e[0]*t[1]-t[0]*e[1]}function $r(e,t){return e[0]*t[0]+e[1]*t[1]}function Ne(e,t,n,r,s=St,o=Ut,i=!1){s&&(e=s(e),t=s(t),n=s(n),r=s(r));let a=[t[0]-e[0],t[1]-e[1]],f=[r[0]-n[0],r[1]-n[1]],u=ae(a,f);if(u===0)return console.log("两条线段平行或共线"),null;let l=ae([n[0]-e[0],n[1]-e[1]],f)/u,h=ae([n[0]-e[0],n[1]-e[1]],a)/u;return!i&&(l<0||l>1||h<0||h>1)?(console.log("交点不在两条线段上"),null):o?o([e[0]+a[0]*l,e[1]+a[1]*l]):[e[0]+a[0]*l,e[1]+a[1]*l]}function Ie(e,t,n=!1){if(n){let r=St(e),s=t[0],o=t[1],i=t[2],a=t[3];return[s,o]=St([s,o]),[i,a]=St([i,a]),r[0]<s||r[0]>i||r[1]<o||r[1]>a}else{let r=t[0],s=t[1],o=t[2],i=t[3];return e[0]<r||e[0]>o||e[1]<s||e[1]>i}}function Sn(e,t){return!(e[0]>t[2]||e[2]<t[0]||e[1]>t[3]||e[3]<t[1])}function En(e,t){return _n(e,yn(t))}function _n(e,t){let n=e[e.length-1],r,s,o,i=t;for(let a in e){r=e[a];let f=i;i=[],s=f[f.length-1];for(let u in f){if(o=f[u],le(o,n,r)){if(!le(s,n,r)){let l=Ne(s,o,n,r,St,Ut,!0);i.push(l)}i.push(o)}else if(le(s,n,r)){let l=Ne(s,o,n,r,St,Ut,!0);i.push(l)}s=o}n=r}return i}function Jr(e,t){let n=!1;for(let r=0,s=t.length-1;r<t.length;s=r++)t[r][1]>e[1]!=t[s][1]>e[1]&&e[0]<(t[s][0]-t[r][0])*(e[1]-t[r][1])/(t[s][1]-t[r][1])+t[r][0]&&(n=!n);return n}function Vr(e){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let o=0;o<e.length;o++){let i=e[o];i[0]<t&&(t=i[0]),i[0]>r&&(r=i[0]),i[1]<n&&(n=i[1]),i[1]>s&&(s=i[1])}return[t,n,r,s]}function Gr(e,t){for(let n=0,r=e.length-1;n<e.length;r=n++)t(e[n],e[r])}function Kr(e,t){return(e-1+t)%t}function le(e,t,n){return Oe(t,n,e)>0}const Qr=Object.freeze(Object.defineProperty({__proto__:null,MBRIntersectMBR:Sn,PointInsidePolygon:Jr,PointOutsideMBR:Ie,calculateMBR:Vr,cross:ae,cutPolygonByMBR:En,dot:$r,intersection:Ne,intersectionPolygon:_n,iterPolygonEdge:Gr,pointInEdge:le,prePointInPolygon:Kr},Symbol.toStringTag,{value:"Module"})),Rn=Math.pow(2,-52),ue=new Uint32Array(512);class vt{static from(t,n=Mn,r=Tn){const s=t.length,o=new Float64Array(s*2);for(let i=0;i<s;i++){const a=t[i];o[2*i]=n(a),o[2*i+1]=r(a)}return new vt(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:s,_hullHash:o}=this,i=t.length>>1;let a=1/0,f=1/0,u=-1/0,l=-1/0;for(let C=0;C<i;C++){const q=t[2*C],v=t[2*C+1];q<a&&(a=q),v<f&&(f=v),q>u&&(u=q),v>l&&(l=v),this._ids[C]=C}const h=(a+u)/2,m=(f+l)/2;let b,p,g;for(let C=0,q=1/0;C<i;C++){const v=je(h,m,t[2*C],t[2*C+1]);v<q&&(b=C,q=v)}const x=t[2*b],P=t[2*b+1];for(let C=0,q=1/0;C<i;C++){if(C===b)continue;const v=je(x,P,t[2*C],t[2*C+1]);v<q&&v>0&&(p=C,q=v)}let j=t[2*p],U=t[2*p+1],$=1/0;for(let C=0;C<i;C++){if(C===b||C===p)continue;const q=es(x,P,j,U,t[2*C],t[2*C+1]);q<$&&(g=C,$=q)}let tt=t[2*g],st=t[2*g+1];if($===1/0){for(let v=0;v<i;v++)this._dists[v]=t[2*v]-t[0]||t[2*v+1]-t[1];Wt(this._ids,this._dists,0,i-1);const C=new Uint32Array(i);let q=0;for(let v=0,z=-1/0;v<i;v++){const et=this._ids[v],c=this._dists[et];c>z&&(C[q++]=et,z=c)}this.hull=C.subarray(0,q),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Vt(x,P,j,U,tt,st)<0){const C=p,q=j,v=U;p=g,j=tt,U=st,g=C,tt=q,st=v}const at=this.circumcenter(x,P,j,U,tt,st);this._cx=at.x,this._cy=at.y;for(let C=0;C<i;C++)this._dists[C]=je(t[2*C],t[2*C+1],at.x,at.y);Wt(this._ids,this._dists,0,i-1),this._hullStart=b;let ot=3;r[b]=n[g]=p,r[p]=n[b]=g,r[g]=n[p]=b,s[b]=0,s[p]=1,s[g]=2,o.fill(-1),o[this._hashKey(x,P)]=b,o[this._hashKey(j,U)]=p,o[this._hashKey(tt,st)]=g,this.trianglesLen=0,this._addTriangle(b,p,g,-1,-1,-1);for(let C=0,q,v;C<this._ids.length;C++){const z=this._ids[C],et=t[2*z],c=t[2*z+1];if(C>0&&Math.abs(et-q)<=Rn&&Math.abs(c-v)<=Rn||(q=et,v=c,z===b||z===p||z===g))continue;let d=0;for(let w=0,R=this._hashKey(et,c);w<this._hashSize&&(d=o[(R+w)%this._hashSize],!(d!==-1&&d!==r[d]));w++);d=n[d];let y=d,A;for(;A=r[y],Vt(et,c,t[2*y],t[2*y+1],t[2*A],t[2*A+1])>=0;)if(y=A,y===d){y=-1;break}if(y===-1)continue;let E=this._addTriangle(y,z,r[y],-1,-1,s[y]);s[z]=this._legalize(E+2),s[y]=E,ot++;let M=r[y];for(;A=r[M],Vt(et,c,t[2*M],t[2*M+1],t[2*A],t[2*A+1])<0;)E=this._addTriangle(M,z,A,s[z],-1,s[M]),s[z]=this._legalize(E+2),r[M]=M,ot--,M=A;if(y===d)for(;A=n[y],Vt(et,c,t[2*A],t[2*A+1],t[2*y],t[2*y+1])<0;)E=this._addTriangle(A,z,y,-1,s[y],s[A]),this._legalize(E+2),s[A]=E,r[y]=y,ot--,y=A;this._hullStart=n[z]=y,r[y]=n[M]=z,r[z]=M,o[this._hashKey(et,c)]=z,o[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(ot);for(let C=0,q=this._hullStart;C<ot;C++)this.hull[C]=q,q=r[q];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Zr(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:s}=this;let o=0,i=0;for(;;){const a=r[t],f=t-t%3;if(i=f+(t+2)%3,a===-1){if(o===0)break;t=ue[--o];continue}const u=a-a%3,l=f+(t+1)%3,h=u+(a+2)%3,m=n[i],b=n[t],p=n[l],g=n[h];if(ts(s[2*m],s[2*m+1],s[2*b],s[2*b+1],s[2*p],s[2*p+1],s[2*g],s[2*g+1])){n[t]=g,n[a]=m;const P=r[h];if(P===-1){let U=this._hullStart;do{if(this._hullTri[U]===h){this._hullTri[U]=t;break}U=this._hullPrev[U]}while(U!==this._hullStart)}this._link(t,P),this._link(a,r[i]),this._link(i,h);const j=u+(a+1)%3;o<ue.length&&(ue[o++]=j)}else{if(o===0)break;t=ue[--o]}}return i}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,s,o,i){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,s),this._link(a+1,o),this._link(a+2,i),this.trianglesLen+=3,a}getTriangles(){return this.triangles}getHalfedges(){return this.halfedges}getHull(){return this.hull}getPoints(){let t=[];for(let n=0;n<this.coords.length;n+=2)t.push([this.coords[n],this.coords[n+1]]);return t}getTriangleIndices(){let t=[];for(let n=0;n<this.triangles.length;n+=3)t.push([this.triangles[n],this.triangles[n+1],this.triangles[n+2]]);return t}static circumRadius(t,n,r){const s=n[0]-t[0],o=n[1]-t[1],i=r[0]-t[0],a=r[1]-t[1],f=s*s+o*o,u=i*i+a*a,l=.5/(s*a-o*i),h=(a*f-o*u)*l,m=(s*u-i*f)*l;return h*h+m*m}circumcenter(t,n,r,s,o,i){const a=r-t,f=s-n,u=o-t,l=i-n,h=a*a+f*f,m=u*u+l*l,b=.5/(a*l-f*u),p=t+(l*h-f*m)*b,g=n+(a*m-u*h)*b;return{x:p,y:g}}}function Zr(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function je(e,t,n,r){const s=e-n,o=t-r;return s*s+o*o}function ts(e,t,n,r,s,o,i,a){const f=e-i,u=t-a,l=n-i,h=r-a,m=s-i,b=o-a,p=f*f+u*u,g=l*l+h*h,x=m*m+b*b;return f*(h*x-g*b)-u*(l*x-g*m)+p*(l*b-h*m)<0}function es(e,t,n,r,s,o){const i=n-e,a=r-t,f=s-e,u=o-t,l=i*i+a*a,h=f*f+u*u,m=.5/(i*u-a*f),b=(u*l-a*h)*m,p=(i*h-f*l)*m;return b*b+p*p}function Wt(e,t,n,r){if(r-n<=20)for(let s=n+1;s<=r;s++){const o=e[s],i=t[o];let a=s-1;for(;a>=n&&t[e[a]]>i;)e[a+1]=e[a--];e[a+1]=o}else{const s=n+r>>1;let o=n+1,i=r;Kt(e,s,o),t[e[n]]>t[e[r]]&&Kt(e,n,r),t[e[o]]>t[e[r]]&&Kt(e,o,r),t[e[n]]>t[e[o]]&&Kt(e,n,o);const a=e[o],f=t[a];for(;;){do o++;while(t[e[o]]<f);do i--;while(t[e[i]]>f);if(i<o)break;Kt(e,o,i)}e[n+1]=e[i],e[i]=a,r-o+1>=i-n?(Wt(e,t,o,r),Wt(e,t,n,i-1)):(Wt(e,t,n,i-1),Wt(e,t,o,r))}}function Kt(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Mn(e){return e[0]}function Tn(e){return e[1]}function ns(e){return[3*e,3*e+1,3*e+2]}function rs(e,t){return ns(t).map(n=>e.triangles[n])}function ss(e){return Math.floor(e/3)}function os(e,t,n){const r=e[0]*e[0]+e[1]*e[1],s=t[0]*t[0]+t[1]*t[1],o=n[0]*n[0]+n[1]*n[1],i=2*(e[0]*(t[1]-n[1])+t[0]*(n[1]-e[1])+n[0]*(e[1]-t[1]));return[1/i*(r*(t[1]-n[1])+s*(n[1]-e[1])+o*(e[1]-t[1])),1/i*(r*(n[0]-t[0])+s*(e[0]-n[0])+o*(t[0]-e[0]))]}function Pn(e,t,n,r=Ut){const s=rs(t,n).map(i=>e[i]);let o=os(s[0],s[1],s[2]);return r&&(o=r(o)),o}function On(e){return e%3===2?e-2:e+1}function is(e,t){const n=[];let r=t;do{n.push(r);const s=On(r);r=e.halfedges[s]}while(r!==-1&&r!==t);return n}function Fe(e,t,n){const r=new Set;for(let s=0;s<t.triangles.length;s++){const o=t.triangles[On(s)];if(!r.has(o)){r.add(o);const f=is(t,s).map(ss).map(u=>Pn(e,t,u));n(o,f)}}}class as{constructor(t,n=Mn,r=Tn){Z(this,"delaunay");Z(this,"points");t instanceof vt?(this.delaunay=t,this.points=t.getPoints()):(this.points=t,this.delaunay=vt.from(t,n,r))}getVoronoi(){const{points:t,delaunay:n}=this,r=new Map;return Fe(t,n,(s,o)=>r.set(s,o)),r}cutVoronoiByMBR(t){const{points:n,delaunay:r}=this,s=new Map;return Fe(n,r,(o,i)=>{this.isInsideMBR(i,t)||(i=En(i,t)),s.set(o,i)}),s}robustVoronoi(t){const{points:n,delaunay:r}=this,s=new Map;return Fe(n,r,(o,i)=>{this.isInsideMBR(i,t)&&s.set(o,i)}),s}isInsideMBR(t,n){const[r,s,o,i]=n;for(let a=0;a<t.length;a++){const[f,u]=t[a];if(f<r||f>o||u<s||u>i)return!1}return!0}}function ls(e,t){const n=new Map;for(let[r,s]of e)t.has(r)?n.set(r,t.get(r)):n.set(r,s);return n}const us=Object.freeze(Object.defineProperty({__proto__:null,Delaunator:vt,Voronoi:as,complateMap:ls,triangleCenter:Pn},Symbol.toStringTag,{value:"Module"}));function cs(e){const t=e.map((o,i)=>[...o.toXY(),i]);let n=t[0];for(let o=1;o<t.length;o++)t[o][1]<n[1]&&(n=t[o]);t.sort((o,i)=>{let a=Gt([n[0],n[1]],[o[0],o[1]]),f=Gt([n[0],n[1]],[i[0],i[1]]);if(a<f)return-1;if(a>f)return 1;{let u=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2),l=Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2);return u<l?-1:1}});let r=[];r.push(t[0]),r.push(t[1]);for(let o=2;o<t.length;o++){for(;r.length>1&&Oe([r[r.length-2][0],r[r.length-2][1]],[r[r.length-1][0],r[r.length-1][1]],[t[o][0],t[o][1]])<=0;)r.pop();r.push(t[o])}let s=[];for(let o=0;o<r.length;o++){let i=r[o][2];s.push(e[i])}return s}function hs(e,t){let n=e.map(i=>i.toXY());return vt.from(n).getTriangleIndices().filter(i=>{let a=[n[i[0]],n[i[1]],n[i[2]]];return vt.circumRadius(a[0],a[1],a[2])*t<1})}const fs=Object.freeze(Object.defineProperty({__proto__:null,alphaComplex:hs,convexHull:cs},Symbol.toStringTag,{value:"Module"}));function xn(e,t){return function(){return e.apply(t,arguments)}}const{toString:ds}=Object.prototype,{getPrototypeOf:Ue}=Object,ce=(e=>t=>{const n=ds.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pt=e=>(e=e.toLowerCase(),t=>ce(t)===e),he=e=>t=>typeof t===e,{isArray:Yt}=Array,Qt=he("undefined");function ms(e){return e!==null&&!Qt(e)&&e.constructor!==null&&!Qt(e.constructor)&&_t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Cn=Pt("ArrayBuffer");function ps(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Cn(e.buffer),t}const ys=he("string"),_t=he("function"),Ln=he("number"),fe=e=>e!==null&&typeof e=="object",ws=e=>e===!0||e===!1,de=e=>{if(ce(e)!=="object")return!1;const t=Ue(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gs=Pt("Date"),bs=Pt("File"),As=Pt("Blob"),Ss=Pt("FileList"),Es=e=>fe(e)&&_t(e.pipe),_s=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_t(e.append)&&((t=ce(e))==="formdata"||t==="object"&&_t(e.toString)&&e.toString()==="[object FormData]"))},Rs=Pt("URLSearchParams"),Ms=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zt(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Yt(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(r=0;r<i;r++)a=o[r],t.call(null,e[a],a,e)}}function Dn(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Bn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),kn=e=>!Qt(e)&&e!==Bn;function ve(){const{caseless:e}=kn(this)&&this||{},t={},n=(r,s)=>{const o=e&&Dn(t,s)||s;de(t[o])&&de(r)?t[o]=ve(t[o],r):de(r)?t[o]=ve({},r):Yt(r)?t[o]=r.slice():t[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Zt(arguments[r],n);return t}const Ts=(e,t,n,{allOwnKeys:r}={})=>(Zt(t,(s,o)=>{n&&_t(s)?e[o]=xn(s,n):e[o]=s},{allOwnKeys:r}),e),Ps=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Os=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},xs=(e,t,n,r)=>{let s,o,i;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!r||r(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&Ue(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Cs=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Ls=e=>{if(!e)return null;if(Yt(e))return e;let t=e.length;if(!Ln(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ds=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ue(Uint8Array)),Bs=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},ks=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Ns=Pt("HTMLFormElement"),Is=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Nn=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),js=Pt("RegExp"),In=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Zt(n,(s,o)=>{let i;(i=t(s,o,e))!==!1&&(r[o]=i||s)}),Object.defineProperties(e,r)},Fs=e=>{In(e,(t,n)=>{if(_t(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(_t(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Us=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Yt(e)?r(e):r(String(e).split(t)),n},vs=()=>{},qs=(e,t)=>(e=+e,Number.isFinite(e)?e:t),qe="abcdefghijklmnopqrstuvwxyz",jn="0123456789",Fn={DIGIT:jn,ALPHA:qe,ALPHA_DIGIT:qe+qe.toUpperCase()+jn},zs=(e=16,t=Fn.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Hs(e){return!!(e&&_t(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Xs=e=>{const t=new Array(10),n=(r,s)=>{if(fe(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const o=Yt(r)?[]:{};return Zt(r,(i,a)=>{const f=n(i,s+1);!Qt(f)&&(o[a]=f)}),t[s]=void 0,o}}return r};return n(e,0)},Ws=Pt("AsyncFunction"),S={isArray:Yt,isArrayBuffer:Cn,isBuffer:ms,isFormData:_s,isArrayBufferView:ps,isString:ys,isNumber:Ln,isBoolean:ws,isObject:fe,isPlainObject:de,isUndefined:Qt,isDate:gs,isFile:bs,isBlob:As,isRegExp:js,isFunction:_t,isStream:Es,isURLSearchParams:Rs,isTypedArray:Ds,isFileList:Ss,forEach:Zt,merge:ve,extend:Ts,trim:Ms,stripBOM:Ps,inherits:Os,toFlatObject:xs,kindOf:ce,kindOfTest:Pt,endsWith:Cs,toArray:Ls,forEachEntry:Bs,matchAll:ks,isHTMLForm:Ns,hasOwnProperty:Nn,hasOwnProp:Nn,reduceDescriptors:In,freezeMethods:Fs,toObjectSet:Us,toCamelCase:Is,noop:vs,toFiniteNumber:qs,findKey:Dn,global:Bn,isContextDefined:kn,ALPHABET:Fn,generateString:zs,isSpecCompliantForm:Hs,toJSONObject:Xs,isAsyncFn:Ws,isThenable:e=>e&&(fe(e)||_t(e))&&_t(e.then)&&_t(e.catch)};function G(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}S.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Un=G.prototype,vn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vn[e]={value:e}}),Object.defineProperties(G,vn),Object.defineProperty(Un,"isAxiosError",{value:!0}),G.from=(e,t,n,r,s,o)=>{const i=Object.create(Un);return S.toFlatObject(e,i,function(f){return f!==Error.prototype},a=>a!=="isAxiosError"),G.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const Ys=null;function ze(e){return S.isPlainObject(e)||S.isArray(e)}function qn(e){return S.endsWith(e,"[]")?e.slice(0,-2):e}function zn(e,t,n){return e?e.concat(t).map(function(s,o){return s=qn(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function $s(e){return S.isArray(e)&&!e.some(ze)}const Js=S.toFlatObject(S,{},null,function(t){return/^is[A-Z]/.test(t)});function me(e,t,n){if(!S.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=S.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,x){return!S.isUndefined(x[g])});const r=n.metaTokens,s=n.visitor||l,o=n.dots,i=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(t);if(!S.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(S.isDate(p))return p.toISOString();if(!f&&S.isBlob(p))throw new G("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(p)||S.isTypedArray(p)?f&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,g,x){let P=p;if(p&&!x&&typeof p=="object"){if(S.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(S.isArray(p)&&$s(p)||(S.isFileList(p)||S.endsWith(g,"[]"))&&(P=S.toArray(p)))return g=qn(g),P.forEach(function(U,$){!(S.isUndefined(U)||U===null)&&t.append(i===!0?zn([g],$,o):i===null?g:g+"[]",u(U))}),!1}return ze(p)?!0:(t.append(zn(x,g,o),u(p)),!1)}const h=[],m=Object.assign(Js,{defaultVisitor:l,convertValue:u,isVisitable:ze});function b(p,g){if(!S.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),S.forEach(p,function(P,j){(!(S.isUndefined(P)||P===null)&&s.call(t,P,S.isString(j)?j.trim():j,g,m))===!0&&b(P,g?g.concat(j):[j])}),h.pop()}}if(!S.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Hn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function He(e,t){this._pairs=[],e&&me(e,this,t)}const Xn=He.prototype;Xn.append=function(t,n){this._pairs.push([t,n])},Xn.toString=function(t){const n=t?function(r){return t.call(this,r,Hn)}:Hn;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Vs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wn(e,t,n){if(!t)return e;const r=n&&n.encode||Vs,s=n&&n.serialize;let o;if(s?o=s(t,n):o=S.isURLSearchParams(t)?t.toString():new He(t,n).toString(r),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Gs{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){S.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Yn=Gs,$n={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ks=typeof URLSearchParams<"u"?URLSearchParams:He,Qs=typeof FormData<"u"?FormData:null,Zs=typeof Blob<"u"?Blob:null,to=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),eo=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ot={isBrowser:!0,classes:{URLSearchParams:Ks,FormData:Qs,Blob:Zs},isStandardBrowserEnv:to,isStandardBrowserWebWorkerEnv:eo,protocols:["http","https","file","blob","url","data"]};function no(e,t){return me(e,new Ot.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return Ot.isNode&&S.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function ro(e){return S.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function so(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function Jn(e){function t(n,r,s,o){let i=n[o++];const a=Number.isFinite(+i),f=o>=n.length;return i=!i&&S.isArray(s)?s.length:i,f?(S.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!S.isObject(s[i]))&&(s[i]=[]),t(n,r,s[i],o)&&S.isArray(s[i])&&(s[i]=so(s[i])),!a)}if(S.isFormData(e)&&S.isFunction(e.entries)){const n={};return S.forEachEntry(e,(r,s)=>{t(ro(r),s,n,0)}),n}return null}function oo(e,t,n){if(S.isString(e))try{return(t||JSON.parse)(e),S.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Xe={transitional:$n,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=S.isObject(t);if(o&&S.isHTMLForm(t)&&(t=new FormData(t)),S.isFormData(t))return s&&s?JSON.stringify(Jn(t)):t;if(S.isArrayBuffer(t)||S.isBuffer(t)||S.isStream(t)||S.isFile(t)||S.isBlob(t))return t;if(S.isArrayBufferView(t))return t.buffer;if(S.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return no(t,this.formSerializer).toString();if((a=S.isFileList(t))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return me(a?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),oo(t)):t}],transformResponse:[function(t){const n=this.transitional||Xe.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&S.isString(t)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?G.from(a,G.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ot.classes.FormData,Blob:Ot.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],e=>{Xe.headers[e]={}});const We=Xe,io=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ao=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||t[n]&&io[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Vn=Symbol("internals");function te(e){return e&&String(e).trim().toLowerCase()}function pe(e){return e===!1||e==null?e:S.isArray(e)?e.map(pe):String(e)}function lo(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const uo=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ye(e,t,n,r,s){if(S.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!S.isString(t)){if(S.isString(r))return t.indexOf(r)!==-1;if(S.isRegExp(r))return r.test(t)}}function co(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function ho(e,t){const n=S.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,i){return this[r].call(this,t,s,o,i)},configurable:!0})})}class ye{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(a,f,u){const l=te(f);if(!l)throw new Error("header name must be a non-empty string");const h=S.findKey(s,l);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||f]=pe(a))}const i=(a,f)=>S.forEach(a,(u,l)=>o(u,l,f));return S.isPlainObject(t)||t instanceof this.constructor?i(t,n):S.isString(t)&&(t=t.trim())&&!uo(t)?i(ao(t),n):t!=null&&o(n,t,r),this}get(t,n){if(t=te(t),t){const r=S.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return lo(s);if(S.isFunction(n))return n.call(this,s,r);if(S.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=te(t),t){const r=S.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Ye(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(i){if(i=te(i),i){const a=S.findKey(r,i);a&&(!n||Ye(r,r[a],a,n))&&(delete r[a],s=!0)}}return S.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||Ye(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return S.forEach(this,(s,o)=>{const i=S.findKey(r,o);if(i){n[i]=pe(s),delete n[o];return}const a=t?co(o):String(o).trim();a!==o&&delete n[o],n[a]=pe(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return S.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&S.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Vn]=this[Vn]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=te(i);r[a]||(ho(s,i),r[a]=!0)}return S.isArray(t)?t.forEach(o):o(t),this}}ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),S.reduceDescriptors(ye.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}}),S.freezeMethods(ye);const xt=ye;function $e(e,t){const n=this||We,r=t||n,s=xt.from(r.headers);let o=r.data;return S.forEach(e,function(a){o=a.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Gn(e){return!!(e&&e.__CANCEL__)}function ee(e,t,n){G.call(this,e??"canceled",G.ERR_CANCELED,t,n),this.name="CanceledError"}S.inherits(ee,G,{__CANCEL__:!0});function fo(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new G("Request failed with status code "+n.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const mo=Ot.isStandardBrowserEnv?function(){return{write:function(n,r,s,o,i,a){const f=[];f.push(n+"="+encodeURIComponent(r)),S.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),S.isString(o)&&f.push("path="+o),S.isString(i)&&f.push("domain="+i),a===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function po(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function yo(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Kn(e,t){return e&&!po(t)?yo(e,t):t}const wo=Ot.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(o){let i=o;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(i){const a=S.isString(i)?s(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function go(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function bo(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(f){const u=Date.now(),l=r[o];i||(i=u),n[s]=f,r[s]=u;let h=o,m=0;for(;h!==s;)m+=n[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),u-i<t)return;const b=l&&u-l;return b?Math.round(m*1e3/b):void 0}}function Qn(e,t){let n=0;const r=bo(50,250);return s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,a=o-n,f=r(a),u=o<=i;n=o;const l={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:f||void 0,estimated:f&&i&&u?(i-o)/f:void 0,event:s};l[t?"download":"upload"]=!0,e(l)}}const Je={http:Ys,xhr:typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,r){let s=e.data;const o=xt.from(e.headers).normalize(),i=e.responseType;let a;function f(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let u;S.isFormData(s)&&(Ot.isStandardBrowserEnv||Ot.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.getContentType(/^\s*multipart\/form-data/)?S.isString(u=o.getContentType())&&o.setContentType(u.replace(/^\s*(multipart\/form-data);+/,"$1")):o.setContentType("multipart/form-data"));let l=new XMLHttpRequest;if(e.auth){const p=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(p+":"+g))}const h=Kn(e.baseURL,e.url);l.open(e.method.toUpperCase(),Wn(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function m(){if(!l)return;const p=xt.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),x={data:!i||i==="text"||i==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:p,config:e,request:l};fo(function(j){n(j),f()},function(j){r(j),f()},x),l=null}if("onloadend"in l?l.onloadend=m:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(m)},l.onabort=function(){l&&(r(new G("Request aborted",G.ECONNABORTED,e,l)),l=null)},l.onerror=function(){r(new G("Network Error",G.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const x=e.transitional||$n;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),r(new G(g,x.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,e,l)),l=null},Ot.isStandardBrowserEnv){const p=wo(h)&&e.xsrfCookieName&&mo.read(e.xsrfCookieName);p&&o.set(e.xsrfHeaderName,p)}s===void 0&&o.setContentType(null),"setRequestHeader"in l&&S.forEach(o.toJSON(),function(g,x){l.setRequestHeader(x,g)}),S.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),i&&i!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",Qn(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Qn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=p=>{l&&(r(!p||p.type?new ee(null,e,l):p),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const b=go(h);if(b&&Ot.protocols.indexOf(b)===-1){r(new G("Unsupported protocol "+b+":",G.ERR_BAD_REQUEST,e));return}l.send(s||null)})}};S.forEach(Je,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Zn=e=>`- ${e}`,Ao=e=>S.isFunction(e)||e===null||e===!1,tr={getAdapter:e=>{e=S.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let o=0;o<t;o++){n=e[o];let i;if(r=n,!Ao(n)&&(r=Je[(i=String(n)).toLowerCase()],r===void 0))throw new G(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([a,f])=>`adapter ${a} `+(f===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(Zn).join(`
`):" "+Zn(o[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Je};function Ve(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ee(null,e)}function er(e){return Ve(e),e.headers=xt.from(e.headers),e.data=$e.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tr.getAdapter(e.adapter||We.adapter)(e).then(function(r){return Ve(e),r.data=$e.call(e,e.transformResponse,r),r.headers=xt.from(r.headers),r},function(r){return Gn(r)||(Ve(e),r&&r.response&&(r.response.data=$e.call(e,e.transformResponse,r.response),r.response.headers=xt.from(r.response.headers))),Promise.reject(r)})}const nr=e=>e instanceof xt?e.toJSON():e;function $t(e,t){t=t||{};const n={};function r(u,l,h){return S.isPlainObject(u)&&S.isPlainObject(l)?S.merge.call({caseless:h},u,l):S.isPlainObject(l)?S.merge({},l):S.isArray(l)?l.slice():l}function s(u,l,h){if(S.isUndefined(l)){if(!S.isUndefined(u))return r(void 0,u,h)}else return r(u,l,h)}function o(u,l){if(!S.isUndefined(l))return r(void 0,l)}function i(u,l){if(S.isUndefined(l)){if(!S.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function a(u,l,h){if(h in t)return r(u,l);if(h in e)return r(void 0,u)}const f={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,l)=>s(nr(u),nr(l),!0)};return S.forEach(Object.keys(Object.assign({},e,t)),function(l){const h=f[l]||s,m=h(e[l],t[l],l);S.isUndefined(m)&&h!==a||(n[l]=m)}),n}const rr="1.6.0",Ge={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ge[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const sr={};Ge.transitional=function(t,n,r){function s(o,i){return"[Axios v"+rr+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,a)=>{if(t===!1)throw new G(s(i," has been removed"+(n?" in "+n:"")),G.ERR_DEPRECATED);return n&&!sr[i]&&(sr[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,a):!0}};function So(e,t,n){if(typeof e!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],i=t[o];if(i){const a=e[o],f=a===void 0||i(a,o,e);if(f!==!0)throw new G("option "+o+" must be "+f,G.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new G("Unknown option "+o,G.ERR_BAD_OPTION)}}const Ke={assertOptions:So,validators:Ge},Nt=Ke.validators;class we{constructor(t){this.defaults=t,this.interceptors={request:new Yn,response:new Yn}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=$t(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Ke.assertOptions(r,{silentJSONParsing:Nt.transitional(Nt.boolean),forcedJSONParsing:Nt.transitional(Nt.boolean),clarifyTimeoutError:Nt.transitional(Nt.boolean)},!1),s!=null&&(S.isFunction(s)?n.paramsSerializer={serialize:s}:Ke.assertOptions(s,{encode:Nt.function,serialize:Nt.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&S.merge(o.common,o[n.method]);o&&S.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=xt.concat(i,o);const a=[];let f=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(f=f&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let l,h=0,m;if(!f){const p=[er.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),m=p.length,l=Promise.resolve(n);h<m;)l=l.then(p[h++],p[h++]);return l}m=a.length;let b=n;for(h=0;h<m;){const p=a[h++],g=a[h++];try{b=p(b)}catch(x){g.call(this,x);break}}try{l=er.call(this,b)}catch(p){return Promise.reject(p)}for(h=0,m=u.length;h<m;)l=l.then(u[h++],u[h++]);return l}getUri(t){t=$t(this.defaults,t);const n=Kn(t.baseURL,t.url);return Wn(n,t.params,t.paramsSerializer)}}S.forEach(["delete","get","head","options"],function(t){we.prototype[t]=function(n,r){return this.request($t(r||{},{method:t,url:n,data:(r||{}).data}))}}),S.forEach(["post","put","patch"],function(t){function n(r){return function(o,i,a){return this.request($t(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}we.prototype[t]=n(),we.prototype[t+"Form"]=n(!0)});const ge=we;class Qe{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o,i,a){r.reason||(r.reason=new ee(o,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Qe(function(s){t=s}),cancel:t}}}const Eo=Qe;function _o(e){return function(n){return e.apply(null,n)}}function Ro(e){return S.isObject(e)&&e.isAxiosError===!0}const Ze={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ze).forEach(([e,t])=>{Ze[t]=e});const Mo=Ze;function or(e){const t=new ge(e),n=xn(ge.prototype.request,t);return S.extend(n,ge.prototype,t,{allOwnKeys:!0}),S.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return or($t(e,s))},n}const ft=or(We);ft.Axios=ge,ft.CanceledError=ee,ft.CancelToken=Eo,ft.isCancel=Gn,ft.VERSION=rr,ft.toFormData=me,ft.AxiosError=G,ft.Cancel=ft.CanceledError,ft.all=function(t){return Promise.all(t)},ft.spread=_o,ft.isAxiosError=Ro,ft.mergeConfig=$t,ft.AxiosHeaders=xt,ft.formToJSON=e=>Jn(S.isHTMLForm(e)?new FormData(e):e),ft.getAdapter=tr.getAdapter,ft.HttpStatusCode=Mo,ft.default=ft;const To=ft;function ir(e){if(e.length===2)return new Et(e[0],e[1]);if(e.length===3)return new Et(e[0],e[1],e[2]);if(e.length>4)return new Et(e[0],e[1],e[2],...e.slice(3));throw new Error("Error: the length of array is not correct")}function ar(e){let t=[];for(let n=0;n<e.length;n++){if(e[n]==null)continue;let r=ir(e[n]);t.push(r)}return t}function Po(e){let t=ar(e);return new Be(t)}function Oo(e){return To.get(e)}function xo(e){let t=[];return e.forEach(n=>{t.push(n.geometry.coordinates)}),t}function Co(e){let t=e,n=[];for(let r=0;r<t.length;r++){let s;for(let o=0;o<t[r].length;o++)s=t[r][o];n.push(s)}return n}const Lo=Object.freeze(Object.defineProperty({__proto__:null,GeoFeatures2Arr:xo,GeoPolygons2SimpleArr:Co,createMultiPointFromArr:Po,createPointListFromArr:ar,cretePointFromArr:ir,readDataFromGeoJSON:Oo},Symbol.toStringTag,{value:"Module"}));class tn{constructor(t,n){Z(this,"MBR");Z(this,"data");Z(this,"shape");Z(this,"rows");Z(this,"cols");Z(this,"bands");this.MBR=t,this.data=n,this.shape=[n.length,n[0].length,n[0][0].length],[this.bands,this.rows,this.cols]=this.shape}getShape(){return[this.data.length,this.data[0].length,this.data[0][0].length]}getSubGrid(t,n=[0]){let r=t[0],s=t[1],o=t[2],i=t[3],a=[];for(let f of n){let u=[];for(let l=r;l<=o;l++){let h=[];for(let m=s;m<=i;m++)h.push(this.data[f][l][m]);u.push(h)}a.push(u)}return a}getSubGridObj(t,n=[0]){let r=t[0],s=t[1],o=t[2],i=t[3],a=[];for(let u of n){let l=[];for(let h=r;h<=o;h++){let m=[];for(let b=s;b<=i;b++)m.push(this.data[u][h][b]);l.push(m)}a.push(l)}return new tn(t,a)}ConvertToGridMBR(t){let n=t[0],r=t[1],s=t[2],o=t[3],i=this.getGridCoord([n,r]),a=this.getGridCoord([s,o]);if(i===null||a===null)return null;{let f=i[0],u=i[1],l=a[0],h=a[1];return[f,u,l,h]}}getGridCoord(t){if(Ie(t,this.MBR))return null;{let n=t[0],r=t[1],s=this.MBR[0],o=this.MBR[1],i=this.MBR[2],a=this.MBR[3],f=Math.floor((r-o)/(a-o)*this.rows),u=Math.floor((n-s)/(i-s)*this.cols);return[f,u]}}getCoordByGridCoord(t){let n=t[0],r=t[1],s=this.MBR[0],o=this.MBR[1],i=this.MBR[2],a=this.MBR[3],f=(r+.5)/this.cols*(i-s)+s,u=(n+.5)/this.rows*(a-o)+o;return[f,u]}getBandStatistics(t){let n=this.data[t],r=n[0][0],s=n[0][0],o=0;for(let a=0;a<this.rows;a++)for(let f=0;f<this.cols;f++){let u=n[a][f];u>r&&(r=u),u<s&&(s=u),o+=u}let i=o/(this.rows*this.cols);return{max:r,min:s,mean:i}}binarization(t,n){let r=this.data[t],s=[];for(let o=0;o<this.rows;o++){let i=[];for(let a=0;a<this.cols;a++)r[o][a]<n?i.push(0):i.push(1);s.push(i)}return s}getCoutourCode(t,n,r){let s=this.binarization(t,n),o=[];for(let i=0;i<this.rows-1;i++){let a=[];for(let f=0;f<this.cols-1;f++){let u=0;u+=s[i][f]*8,u+=s[i][f+1]*4,u+=s[i+1][f+1]*2,u+=s[i+1][f]*1,a.push(u)}o.push(a)}if(r){for(let f=0;f<o.length;f++){let u=o[f];u.unshift(u[0]),u.push(u[u.length-1])}let i=o[0],a=o[o.length-1];o.unshift(i),o.push(a)}return o}}function Do(e,t,n){let r=e.data[t],s=[];for(let o=0;o<e.rows;o++){let i=[];for(let a=0;a<e.cols;a++)r[o][a]<n?i.push(0):i.push(1);s.push(i)}return s}const Bo=Object.freeze(Object.defineProperty({__proto__:null,Grid:tn,binarization:Do},Symbol.toStringTag,{value:"Module"}));class Jt{constructor(t,n,r=10){Z(this,"capacity");Z(this,"boundary");Z(this,"points");Z(this,"northWest");Z(this,"northEast");Z(this,"southWest");Z(this,"southEast");Z(this,"isDivided");Z(this,"depth");Z(this,"maxDepth",10);this.capacity=n,this.boundary=t,this.points=[],this.isDivided=!1,this.northWest=null,this.northEast=null,this.southWest=null,this.southEast=null,this.depth=0,this.maxDepth=r}insert(t){return Ie(t,this.boundary)?!1:this.points.length<this.capacity&&this.depth<this.maxDepth?(this.points.push(t),!0):(this.isDivided||this.subdivide(),this.northEast.insert(t),this.northWest.insert(t),this.southEast.insert(t),this.southWest.insert(t),!0)}get pointsList(){return this.points.length===0?null:this.points}subdivide(){let t=this.boundary[0],n=this.boundary[1],r=this.boundary[2]-t,s=this.boundary[3]-n,o=new Jt([t,n+s/2,t+r/2,n+s],this.capacity),i=new Jt([t+r/2,n+s/2,t+r,n+s],this.capacity),a=new Jt([t,n,t+r/2,n+s/2],this.capacity),f=new Jt([t+r/2,n,t+r,n+s/2],this.capacity);this.northWest=o,this.northEast=i,this.southWest=a,this.southEast=f,this.isDivided=!0,this.depth++}queryRange(t){let n=[];if(!Sn(this.boundary,t))return n;for(let r=0;r<this.points.length;r++)wn(this.points[r],t)&&n.push(this.points[r]);return this.northWest===null||(n.push(...this.northWest.queryRange(t)),n.push(...this.northEast.queryRange(t)),n.push(...this.southWest.queryRange(t)),n.push(...this.southEast.queryRange(t))),n}queryCircle(t,n=[]){let r=[];if(t.intersects(this.boundary))n.push(this.boundary);else return r;for(let s=0;s<this.points.length;s++)t.contains(this.points[s],45e8)&&r.push(this.points[s]);return this.northWest===null||(r.push(...this.northWest.queryCircle(t,n)),r.push(...this.northEast.queryCircle(t,n)),r.push(...this.southWest.queryCircle(t,n)),r.push(...this.southEast.queryCircle(t,n))),r}}const ko=Object.freeze(Object.defineProperty({__proto__:null,QuadTree:Jt},Symbol.toStringTag,{value:"Module"})),No=Math.E;function en(e,t,n){return(t-e)*(3-n*2)*n*n+e}function Io(e,t){let s=e,o=t;s*=3284157443,o^=s<<128|s>>256-128,o*=1911520717,s^=o<<128|o>>256-128,s*=2048419325;const i=s*(3.14159265/~(-1>>>1));return{x:Math.cos(i),y:Math.sin(i)}}function be(e,t,n,r){const s=Io(e,t),o=n-e,i=r-t;return o*s.x+i*s.y}function jo(e,t){const n=Math.floor(e),r=n+1,s=Math.floor(t),o=s+1,i=e-n,a=t-s,f=be(n,s,e,t),u=be(r,s,e,t),l=en(f,u,i),h=be(n,o,e,t),m=be(r,o,e,t),b=en(h,m,i);return en(l,b,a)}function Fo(e,t){return Math.pow(No,-Math.pow(Math.sqrt(e*e+t*t),1/2))*Math.sin(Math.sqrt(e*e+t*t))}function Uo(e,t){return Math.sin(Math.sqrt(e*e+t*t))}const vo=Object.freeze(Object.defineProperty({__proto__:null,Perlin:jo,Sin3D:Uo,dampedSin3D:Fo},Symbol.toStringTag,{value:"Module"}));var lr=(e=>(e[e.linear=0]="linear",e[e.square=1]="square",e[e.log=2]="log",e[e.power=3]="power",e))(lr||{}),ur=(e=>(e[e.default=0]="default",e))(ur||{});function nn(e,t){return(e-t.min)/(t.max-t.min)}function qo(e,t){return Math.sqrt((e-t.min)/(t.max-t.min))}function zo(e,t){return Math.log((e-t.min)/(t.max-t.min)+1)}function Ho(e,t){return Math.pow((e-t.min)/(t.max-t.min),2)}function cr(e){switch(e){case 0:return nn;case 1:return qo;case 2:return zo;case 3:return Ho;default:throw new Error("未知的拉伸类型")}}function rn(e,t,n=nn){let r=n(t,e),s=Math.floor(r*255);return`rgb(${s},${s},${s})`}function Xo(e){return(t,n)=>rn(t,n,cr(e))}const hr=["#163544","#495a45","#767d58","#76a477","#d7bd7f","#d7221f"],Wo=["#ffffff00","#ff9a00","#3ec1d3","#6c5b7b","#355c7d","#f8b500","#119da4","#ff165d","#8ECFC9","#FFBE7A","#82B0D2","#BEB8DC","#E7DAD2","#119da4","#ff165d","#ffffff00"];function Yo(e,t,n,r=hr,s=nn){let o=s(t,e),i=0;if(n===void 0)i=Math.floor(o*r.length);else for(let a=0;a<n.length;a++)if(o<n[a]){i=a;break}return r[i]}function $o(e,t,n=hr){return(r,s)=>Yo(r,s,t,n,cr(e))}function fr(e,t=["#000000","#ffffff"]){return e===0?t[0]:t[1]}function Jo(e,t=Wo){return t[e]}const Vo=Object.freeze(Object.defineProperty({__proto__:null,binaryColorBand:fr,colorListType:ur,pseudoColorBandFactory:$o,simpleColorBand:rn,simpleColorBandFactory:Xo,simplePseudoColorBand:Jo,stretchType:lr},Symbol.toStringTag,{value:"Module"}));function Go(e,t,n,r,s=rn,o){let i=n.w/t[0].length,a=n.h/t.length,f=e.getContext("2d");if(f===null)throw new Error("无法获取canvas绘图上下文");for(let u=0;u<t.length;u++)for(let l=0;l<t[0].length;l++){let h=t[u][l],m=s(r,h);f.fillStyle=m,f.fillRect(n.x+l*i,n.y+u*a,i,a)}if(o){let[u,l,h,m]=o;f.strokeStyle="red",f.lineWidth=1,f.strokeRect(n.x+u*i,n.y+l*a,(h-u)*i,(m-l)*a)}}function Ko(e,t,n,r=fr){let s=n.w/t[0].length,o=n.h/t.length,i=e.getContext("2d");if(i===null)throw new Error("无法获取canvas绘图上下文");for(let a=0;a<t.length;a++)for(let f=0;f<t[0].length;f++){let u=t[a][f],l=r(u);i.fillStyle=l,i.fillRect(n.x+f*s,n.y+a*o,s,o)}}function Qo(e,t,n,r="white"){let s=n.w/t[0].length,o=n.h/t.length,i=e.getContext("2d");if(i===null)throw new Error("无法获取canvas绘图上下文");for(let a=0;a<t.length;a++)for(let f=0;f<t[0].length;f++){let u=t[a][f];Zo(u,{x:n.x+f*s,y:n.y+a*o,w:s,h:o},i,r)}}function Zo(e,t,n,r="white"){switch(n.strokeStyle=r,e){case 0:break;case 1:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 2:n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 3:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 4:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 5:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke(),n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 6:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 7:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke();break;case 8:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y),n.stroke();break;case 9:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 10:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke(),n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break;case 11:n.beginPath(),n.moveTo(t.x+t.w/2,t.y),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 12:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 13:n.beginPath(),n.moveTo(t.x+t.w/2,t.y+t.h),n.lineTo(t.x+t.w,t.y+t.h/2),n.stroke();break;case 14:n.beginPath(),n.moveTo(t.x,t.y+t.h/2),n.lineTo(t.x+t.w/2,t.y+t.h),n.stroke();break}}const ti=Object.freeze(Object.defineProperty({__proto__:null,binDrawGrid2d:Ko,drawCountour:Qo,drawGrid2d:Go},Symbol.toStringTag,{value:"Module"}));lt.CGUtils=Qr,lt.Colors=Vo,lt.Coverage=Bo,lt.Delaunay=us,lt.Geometry=zr,lt.Measuration=Yr,lt.Meta=Lo,lt.Noise=vo,lt.QuadTree=ko,lt.Reference=jr,lt.Renderer=ti,lt.Shell=fs,lt.Unit=Br,lt.Utils=xr,Object.defineProperty(lt,Symbol.toStringTag,{value:"Module"})});
