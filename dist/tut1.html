<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深度指南：栅格数据渲染及分析 | RVGeo</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/app/dist/assets/style.44d257d1.css">
    <link rel="modulepreload" href="/app/dist/assets/chunks/display.e256649d.js">
    <link rel="modulepreload" href="/app/dist/assets/app.976dcdbd.js">
    <link rel="modulepreload" href="/app/dist/assets/tut1.md.a4459c6d.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f44a984a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-f44a984a data-v-a50780ff><div class="VPNavBar has-sidebar" data-v-a50780ff data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle has-sidebar" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/app/dist/" data-v-d5925166><!--[--><!--]--><!----><!--[-->RVGeo<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f1d18b5 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/app/dist/gs.html" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->快速开始<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 深度指南 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link active" href="/app/dist/tut1.html" data-v-e8e0fb1d data-v-3c355974><!--[-->栅格篇<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/tut2.html" data-v-e8e0fb1d data-v-3c355974><!--[-->矢量篇<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/tut3.html" data-v-e8e0fb1d data-v-3c355974><!--[-->数据篇<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 算法卡片 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp1.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第一讲<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp2.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第三四讲<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp3.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第五六讲<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp4.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第七讲<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp5.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第八讲<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp6.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第十讲<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp7.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第十二讲<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/cp8.html" data-v-e8e0fb1d data-v-3c355974><!--[-->第十三讲<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 语言 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/" data-v-e8e0fb1d data-v-3c355974><!--[-->中文<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="/app/dist/" data-v-e8e0fb1d data-v-3c355974><!--[-->English<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="http://124.221.217.153:5003/doc/index.html" target="_blank" rel="noreferrer" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->API&amp;源码<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/app/dist/team.html" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->团队<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-481098f9 data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-481098f9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-481098f9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-481098f9 data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-481098f9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-481098f9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-f44a984a data-v-b6162a8b><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-b6162a8b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-b6162a8b><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-b6162a8b>Menu</span></button><a class="top-link" href="#" data-v-b6162a8b> Return to top </a></div><aside class="VPSidebar" data-v-f44a984a data-v-a186aa16><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a186aa16><span class="visually-hidden" id="sidebar-aria-label" data-v-a186aa16> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-a186aa16><section class="VPSidebarGroup collapsible" data-v-a186aa16 data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>快速开始</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link" href="/app/dist/gs.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>快速上手</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-a186aa16><section class="VPSidebarGroup collapsible" data-v-a186aa16 data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>深度指南</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link active" href="/app/dist/tut1.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>栅格篇</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/tut2.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>矢量篇</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/tut3.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>数据篇</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-a186aa16><section class="VPSidebarGroup collapsible" data-v-a186aa16 data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>算法卡片</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link" href="/app/dist/cp1.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第一讲</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/cp2.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第三四讲</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/cp3.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第五六讲</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/cp4.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第七讲</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/cp5.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第八讲</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/cp6.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第十讲</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/cp7.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第十二讲</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/app/dist/cp8.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>第十三讲</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-f44a984a data-v-d981fe29><div class="VPDoc has-sidebar has-aside" data-v-d981fe29 data-v-cfb513e0><div class="container" data-v-cfb513e0><div class="aside" data-v-cfb513e0><div class="aside-curtain" data-v-cfb513e0></div><div class="aside-container" data-v-cfb513e0><div class="aside-content" data-v-cfb513e0><div class="VPDocAside" data-v-cfb513e0 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-cfb513e0><div class="content-container" data-v-cfb513e0><!--[--><!--]--><main class="main" data-v-cfb513e0><div style="position:relative;" class="vp-doc _app_dist_tut1" data-v-cfb513e0><div><h1 id="深度指南-栅格数据渲染及分析" tabindex="-1">深度指南：栅格数据渲染及分析 <a class="header-anchor" href="#深度指南-栅格数据渲染及分析" aria-hidden="true">#</a></h1><div class="info custom-block"><p class="custom-block-title">展望🌟</p><p>栅格数据既是一种地理数据模型，也是一种重要的数据源。栅格部分我们将更多地贴近遥感的技术原理与方法。计划跟进遥感数字图像处理的课程进度，挑选一些基础的经典算法实现。届时，RVGeo将支持多波段数据的管理能力。</p></div><h2 id="快速体验-地形坡面" tabindex="-1">快速体验：地形坡面 <a class="header-anchor" href="#快速体验-地形坡面" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">建议</p><ul><li>请先点击<code>请求并绘制DEM</code>按钮，然后自由移动滑块。</li><li><code>清空画板</code>按钮仅能清空剖面图，若想重新开始请刷新并从欢迎页面重新进入！</li></ul></div><p>移动滑块查看该线条覆盖的地形：</p><!--[--><div id="tools" style="align-items:normal;" data-v-341b67b9><button id="draw" class="button" data-v-341b67b9> 请求并绘制DEM </button><button id="reset" class="button" data-v-341b67b9> 清空画布 </button><button id="info" class="button" data-v-341b67b9> 画板信息 </button></div><canvas id="canvas693360" width="512" height="512" class="canvas" data-v-341b67b9></canvas><div data-v-341b67b9><label for="number1" data-v-341b67b9>x1:0</label><input id="number1" value="0" type="range" min="1" max="25" data-v-341b67b9><label for="number2" data-v-341b67b9>y1:0</label><input id="number2" value="0" type="range" min="1" max="25" data-v-341b67b9></div><div data-v-341b67b9><label for="number3" data-v-341b67b9>x2:0</label><input id="number3" value="0" type="range" min="1" max="25" data-v-341b67b9><label for="number4" data-v-341b67b9>y2:0</label><input id="number4" value="0" type="range" min="1" max="25" data-v-341b67b9></div><canvas id="panel693360" width="686" height="300" class="canvas" data-v-341b67b9></canvas><div class="info" style="visibility:hidden;" data-v-341b67b9><p data-v-341b67b9> INFO : 画板ID : canvas693360 画板宽度 : 512 画板高度 : 512<br data-v-341b67b9> 面板ID:panel693360 面板宽度:686 面板高度:300<br data-v-341b67b9> 是否已获取数据：false<br data-v-341b67b9> 示例3:栅格 <br data-v-341b67b9> - powered by rvgeo </p></div><!--]--><h2 id="预备知识" tabindex="-1">预备知识 <a class="header-anchor" href="#预备知识" aria-hidden="true">#</a></h2><p>栅格数据本质上就是矩阵，在计算机中一般使用二维数组存放矩阵。在这里，我使用<code>javascript</code>中两层嵌套的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noreferrer"><code>array</code></a>对象来模拟二维数组，存储矩阵数据。对于遥感影像而言，往往会有多个波段的数据，这样就需要再嵌套一层，将多个二维矩阵叠放。栅格数据的分析，往往与一定区域内栅格值的统计特征相关，因而，我们会有一个<a href="http://124.221.217.153:5003/doc/Stastic.html" target="_blank" rel="noreferrer">统计对象</a>用以处理相关需求。栅格数据的渲染与矢量图形不同，一般需要指定值到不同颜色的映射，因此需要一个<a href="http://124.221.217.153:5003/doc/CellValueRenderer.html" target="_blank" rel="noreferrer">栅格渲染器</a>来处理这些颜色映射。</p><div class="info custom-block"><p class="custom-block-title">有待完善</p><p>目前，我们尚未编写多波段影像的部分。</p></div><h2 id="基础" tabindex="-1">基础 <a class="header-anchor" href="#基础" aria-hidden="true">#</a></h2><h3 id="栅格类" tabindex="-1">栅格类 <a class="header-anchor" href="#栅格类" aria-hidden="true">#</a></h3><p><a href="http://124.221.217.153:5003/doc/grid.js.html#line9" target="_blank" rel="noreferrer"><code>grid</code></a>类包装了一个二层嵌套的数组，是管理栅格数据的类。你可以通过<code>new</code>关键字来创建一个指定大小（行、列）的栅格对象，默认生成0填充矩阵。下面我们就来创建一个256*256的栅格：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> grid </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Raster</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">256</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">256</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><details class="details custom-block"><summary>另一种创建栅格对象的方法</summary><p>栅格对象还可以通过静态方法<code>fromMatrix</code>创建，该方法接受一个二层嵌套的数组作为参数：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> grid </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Raster</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromMatrix</span><span style="color:#A6ACCD;">(data)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>该种方法相较于新建空栅格再逐一覆盖要高效许多，但数据的合法性无法保证。</p></details><p>假设我们已经得到了一个表示真实地形的栅格对象<code>grid</code>,现在我们想要将它渲染在页面上。</p><h3 id="统计类" tabindex="-1">统计类 <a class="header-anchor" href="#统计类" aria-hidden="true">#</a></h3><p>在介绍栅格数据的渲染器之前，我们需要先来了解一下统计类，<a href="http://124.221.217.153:5003/doc/Stastic.html" target="_blank" rel="noreferrer">static</a>。这是一个十分强大的类，它不仅可以统计一定区域内的栅格数据，还可以生成统计图对象用以直观地表示我们的数据。当然，栅格数据的灰度拉伸渲染也同样离不开它。</p><div class="tip custom-block"><p class="custom-block-title">建议</p><ul><li>请先点击<code>绘制盒须图</code>按钮，然后自由移动滑块。</li><li><code>清空画板</code>按钮仅能清空剖面图，若想重新开始请刷新并从欢迎页面重新进入！</li></ul></div><p>点击按钮查看本页之前渲染DEM的统计信息（盒须图）</p><!--[--><div id="tools" style="align-items:normal;" data-v-959584c0><button id="draw" class="button" data-v-959584c0> 请求并绘制DEM的统计图 </button><button id="reset" class="button" data-v-959584c0> 清空画布 </button><button id="info" class="button" data-v-959584c0> 画板信息 </button></div><canvas id="canvas822604" width="686" height="550" class="canvas" data-v-959584c0></canvas><div class="info" style="visibility:hidden;" data-v-959584c0><p data-v-959584c0> INFO : 画板ID : canvas822604 画板宽度 : 686 画板高度 : 550<br data-v-959584c0> 是否已获取数据：false<br data-v-959584c0> 示例4:统计图（盒须图绘制） <br data-v-959584c0> - powered by rvgeo </p></div><!--]--><div class="info custom-block"><p class="custom-block-title">有待完善</p><p>现在我们只支持箱线图及固定补偿的栅格值列表绘制，计划在下一次更新中添加直方图。</p></div><p>统计类只能处理一维数组，也就是列表，所以我们需要将栅格对象转化为列表：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> stt </span><span style="color:#89DDFF;">=new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Stastic</span><span style="color:#A6ACCD;">(grid</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get1DArray</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>在接收到列表之后，统计对象就会自动对数值进行排序，提取最大最小值、均值以及方差等统计量。若想要查看某一具体统计图，需要使用统计对象的渲染器，该渲染器会调用统计对象的方法生成统计图JSON对象，并在画布上渲染出来。例如，我们希望查看当前栅格对象数值的箱线图，就可以像这样操作：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> stv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">StasticView</span><span style="color:#A6ACCD;">(myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">stt)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">stv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw_box_whisker_plot</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">60</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">图表 坡向数据箱线图</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p><code>RV.Renderer.xxx</code> 接口包含了用以渲染当前数据的类（该接口中类的命名方式：数据类名+view），只需要用渲染类包装对应的数据类即可仅用一行代码就渲染出相应的数据内容。</p></div><p>事实上，RVGeo从一开始就决定把数据操作和渲染操作分开，因此在面对一个GIS数据元时，我们始终需要先用数据类来包装源数据，再用对应的渲染类来控制渲染行为。</p><h3 id="栅格渲染器" tabindex="-1">栅格渲染器 <a class="header-anchor" href="#栅格渲染器" aria-hidden="true">#</a></h3><div class="info custom-block"><p class="custom-block-title">知识点</p><p>在处理栅格数据时，可以粗略地将栅格数据类型分为离散型和连续型。</p><ul><li>离散型：一般对应于某种人为设计的栅格模型，类似于图像分割中用不同的整数值标注结果，用以区分不同的地物类别</li><li>连续值：一般是自然形成的，如DEM数据等，用以模拟连续的自然表面</li></ul><p>因此，在设计栅格渲染器时，我也将其分为离散值和连续值两种渲染方法。对于用户而言，可以自己重写对应的色彩映射函数以实现自定义的效果。</p></div><p>栅格渲染器（<a href="http://124.221.217.153:5003/doc/GridView.html" target="_blank" rel="noreferrer"><code>RV.Renderer.GridView</code></a>）一旦包装了栅格数据对象，就具有在指定位置绘制该栅格对象的数据，并标注相应像元点的能力：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-focused-lines"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> gridview </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">GridView</span><span style="color:#A6ACCD;">(myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">grid1</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">gridview</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw_custom</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    canvas_height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    ISDrawRamp</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    ISDrawmain</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    ISReversed</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    stastic</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">    render_function</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;">//静态可用户自定义的栅格值渲染函数 </span></span>
<span class="line"><span style="color:#A6ACCD;">    name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    alpha</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>代码段中突出的部分就是我们的静态色彩映射函数（<a href="http://124.221.217.153:5003/doc/CellValueRenderer.html" target="_blank" rel="noreferrer">CellValueRenderer类中</a>）,切换不同的色彩映射函数即可实现不同的栅格渲染效果。考虑到方便性，所有的色彩映射函数都是静态的javascript函数对象，因此可以被作为参数传递给渲染器。</p><details class="details custom-block"><summary>即将废弃的栅格渲染方式</summary><p><a href="http://124.221.217.153:5003/doc/ColorRamp.html" target="_blank" rel="noreferrer">ColorRamp</a>是第一代栅格数据渲染方式，想要使用该渲染器，你需要：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-highlighted-lines"><code><span class="line highlighted"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> colorramp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ColorRamp</span><span style="color:#A6ACCD;">(stt)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> gridview </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">GridView</span><span style="color:#A6ACCD;">(myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">grid1</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">gridview</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw</span><span style="color:#A6ACCD;">(colorramp</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">栅格1-1 原始DEM渲染</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">gridview2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw_aspect</span><span style="color:#A6ACCD;">(colorramp2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">栅格 2-1 坡向</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">gridview3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw_main</span><span style="color:#A6ACCD;">(colorramp3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">栅格 2-2 坡度</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>首先用<code>ColorRamp</code>对象包装统计对象，然后将其作为参数传给栅格渲染器。你会发现想要改换渲染样式就需要使用不同的渲染器函数，例如，渲染原始值的函数 <code>draw</code> 就会将原始值依照<code>某种拉伸规则</code>映射到<code>某种颜色区间</code>上。或许你已经发现这么做的不妥之处：操作之间的耦合太高了！一个函数名对应了<code>拉伸数值</code>和<code>数值映射</code>两个操作，如果我们有3种数值拉伸规则，3种数值映射方法，就需要单独写9份函数才能穷尽所有的功能组合。这显然是不合理、不优雅的。</p></details><h2 id="进阶" tabindex="-1">进阶 <a class="header-anchor" href="#进阶" aria-hidden="true">#</a></h2><h3 id="快速体验-渲染坡向、坡度及坡度变率" tabindex="-1">快速体验：渲染坡向、坡度及坡度变率 <a class="header-anchor" href="#快速体验-渲染坡向、坡度及坡度变率" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">提示</p><ul><li>点击 <code>请求并绘制DEM</code> 即可绘制基础DEM栅格</li><li>点击 <code>绘制坡向</code> 即可绘制栅格各处的坡向</li><li>点击 <code>绘制坡度</code> 即可查看各处坡度</li><li>点击 <code>绘制坡度变率</code> 即可查看坡度各处变率</li></ul></div><div class="warning custom-block"><p class="custom-block-title">！注意</p><ul><li>计算需要一定的时间，点击完按钮之后需要等待</li><li><code>清空画布</code>按钮将重新请求数据</li></ul></div><!--[--><div id="tools" style="align-items:normal;" data-v-88da908d><button id="draw" class="button" data-v-88da908d> 请求并绘制DEM </button><button id="angle" class="button" data-v-88da908d> 渲染坡向 </button><button id="slope" class="button" data-v-88da908d> 渲染坡度 </button><button id="slope2" class="button" data-v-88da908d> 渲染坡度变率 </button><button id="reset" class="button" data-v-88da908d> 清空画布 </button><button id="info" class="button" data-v-88da908d> 画板信息 </button></div><canvas id="canvas61289" width="512" height="512" class="canvas" data-v-88da908d></canvas><div class="info" style="visibility:hidden;" data-v-88da908d><p data-v-88da908d> INFO : 画板ID : canvas61289 画板宽度 : 512 画板高度 : 512<br data-v-88da908d> 是否已获取数据：false<br data-v-88da908d> 示例3:栅格2 <br data-v-88da908d> - powered by rvgeo </p></div><!--]--><h3 id="栅格数据的空间分析" tabindex="-1">栅格数据的空间分析 <a class="header-anchor" href="#栅格数据的空间分析" aria-hidden="true">#</a></h3><p>作为技术验证库，我们会尝试一些栅格数据分析常用的算法。课上讲的主要是地形因子提取与水文分析的相关内容，所以我们会首先计算坡度、坡向等宏观地形因子，然后实现地形坡面图的绘制。单一栅格值本身并没有太多意义，栅格数据的信息往往隐藏在一定范围栅格值的分布模式内。或者说，在进行栅格空间分析时，我们需要做的事是提取某种潜藏在一定区域范围下的分布模式。所以，对于绝大多数栅格数据的分析而言，我们都需要在目标栅格周围开辟一个小窗口来进行分析（计算）以获得我们想要的信息。一般我们把这种独立的、有确定大小和固定计算方式的单元称为 <code>kernel</code>。在我们的验证库中，我们会按照一定的顺序，逐一对栅格值进行小窗提取（一般是3*3的小窗口），提取后，我们对该窗口中的值进行数值运算，实际上就是把窗口里的值与一个描述了计算方法的参数矩阵进行矩阵乘法。最后我们将得到的值放入新生成的结果栅格中。</p><div class="warning custom-block"><p class="custom-block-title">！注意</p><p><code>kernel</code>的大小一般需要与窗口对应，而且<code>kernel</code>是一种操作，不只是单纯的参数矩阵。</p></div><div class="info custom-block"><p class="custom-block-title">信息</p><p>你已经可能注意到上述操作与卷积操作有许多相似之处，有关卷积的详细信息欢迎参考<a href="https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md" target="_blank" rel="noreferrer">这里</a>。</p></div><p>你或许已经注意到，在栅格数据的边缘无法进行上述操作，因为那里的小窗口会有一部分“无值可取”。所以，在进行栅格数据的空间分析之前，我们需要先对数据进行<code>padding</code>操作，在栅格四周缓冲出所需宽度的值来。<code>padding</code>操作本质上是将指定的值添加到原栅格的四周，你可以选择统计对象中的任意统计值：均值、最值、分位数……</p><div class="warning custom-block"><p class="custom-block-title">！注意</p><p>有些情况下<code>padding</code>操作会影响到计算结果，例如在求取坡向时，边缘的<code>padding区域</code>会出现带状噪声。你可在完成对应的操作后裁切掉对应的<code>padding区域</code>。如果数据区域足够大的话，不妨简单忽略此问题。</p></div><h4 id="坡度" tabindex="-1">坡度 <a class="header-anchor" href="#坡度" aria-hidden="true">#</a></h4><p>实现代码：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;"> * 坡度提取 默认3x3矩阵</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">array</span><span style="color:#89DDFF;">}</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">input_cell</span><span style="color:#676E95;"> - 输入卷积区域</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">returns</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">}</span><span style="color:#676E95;"> 输出计算结果</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">kernel_2Dmatrix_2</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">input_cell</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_we_operator</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    [</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    ]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_sn_operator</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    [</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    ]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_we</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">kernel_2Dmatrix_cal</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">slope_we_operator</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">input_cell</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_sn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">kernel_2Dmatrix_cal</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">slope_sn_operator</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">input_cell</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sqrt</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">slope_sn</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">slope_sn</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">slope_we</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">slope_we</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">slope</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>详情请见：<a href="https://desktop.arcgis.com/zh-cn/arcmap/10.3/tools/3d-analyst-toolbox/how-slope-works.htm" target="_blank" rel="noreferrer">坡度</a></p><p>使用样例：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-focused-lines"><code><span class="line has-focus"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> dd1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> grid1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_Slope</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> grid3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Raster</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromMatrix</span><span style="color:#A6ACCD;">(dd1)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> stt3 </span><span style="color:#89DDFF;">=new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Stastic</span><span style="color:#A6ACCD;">(grid3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get1DArray</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> colorramp3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ColorRamp</span><span style="color:#A6ACCD;">(stt3)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> gridview3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">GridView</span><span style="color:#A6ACCD;">(myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">grid3</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">600</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">    gridview3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw_main</span><span style="color:#A6ACCD;">(colorramp3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">栅格 2-2 坡度</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="坡向" tabindex="-1">坡向 <a class="header-anchor" href="#坡向" aria-hidden="true">#</a></h4><p>实现代码：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;"> * 坡向提取 默认3x3矩阵</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">param</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">array</span><span style="color:#89DDFF;">}</span><span style="color:#676E95;"> </span><span style="color:#A6ACCD;">input_cell</span><span style="color:#676E95;"> - 输入卷积区域</span></span>
<span class="line"><span style="color:#676E95;"> * </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">returns</span><span style="color:#676E95;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">}</span><span style="color:#676E95;"> 输出计算结果</span></span>
<span class="line"><span style="color:#676E95;"> */</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">kernel_2Dmatrix_3</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">input_cell</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_we_operator</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    [</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    ]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_sn_operator</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    [</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        [</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    ]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_we</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#82AAFF;">kernel_2Dmatrix_cal</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">slope_we_operator</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">input_cell</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">slope_sn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#82AAFF;">kernel_2Dmatrix_cal</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">slope_sn_operator</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">input_cell</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//let aspect = Math.abs(slope_sn/slope_we);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">aspect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">57.29578</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">atan2</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">slope_sn</span><span style="color:#89DDFF;">,-</span><span style="color:#A6ACCD;">slope_we</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cell</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">//根据arcgis官网内容修正</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">aspect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">cell</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">90.0</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">aspect</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">aspect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">90.0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">cell</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">360.0</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">aspect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">90.0</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">cell</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">90.0</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">aspect</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">cell</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>详情请见：<a href="https://desktop.arcgis.com/zh-cn/arcmap/latest/tools/3d-analyst-toolbox/how-aspect-works.htm" target="_blank" rel="noreferrer">坡向</a></p><p>使用示例：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-focused-lines"><code><span class="line has-focus"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> dd </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> grid1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_Aspect</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 获得坡向 </span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> grid2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Raster</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromMatrix</span><span style="color:#A6ACCD;">(dd)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> stt2 </span><span style="color:#89DDFF;">=new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Stastic</span><span style="color:#A6ACCD;">(grid2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get1DArray</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> colorramp2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ColorRamp</span><span style="color:#A6ACCD;">(stt2)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> gridview2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">GridView</span><span style="color:#A6ACCD;">(myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">grid2</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">600</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">gridview2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw_aspect</span><span style="color:#A6ACCD;">(colorramp2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">                                </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">栅格 2-1 坡向</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;">//渲染坡向</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h4 id="剖面图" tabindex="-1">剖面图 <a class="header-anchor" href="#剖面图" aria-hidden="true">#</a></h4><p>使用样例：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki has-focused-lines"><code><span class="line has-focus"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> cs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> grid1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_SampleLine</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">254</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;">//gridview.draw_cell_set(cs,&quot;green&quot;,myCanvas.height);</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> da </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> grid3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_CellValueList</span><span style="color:#A6ACCD;">(cs</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> st </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Stastic</span><span style="color:#A6ACCD;">(da)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> stv4 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> RV</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Renderer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">StasticView</span><span style="color:#A6ACCD;">(myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">st)</span><span style="color:#89DDFF;">;</span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">stv4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">draw_step_plot</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">512</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">600</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">250</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">myCanvas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">green</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">图表 3-1 剖面图</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><p>详情： <code>grid1.get_SampleLine(...)</code>对指定直线进行采样（指定始末点的行列号及采样步长，根据直线的微分方程采样，单栅格线宽），并将结果作为列表返回。统计对象获取列表值后，生成值的顺序均匀步长曲线（剖面图）。最后利用统计渲染器将其渲染出来。</p><div class="tip custom-block"><p class="custom-block-title">可选</p><p><code>gridview.draw_cell_set(cs,&quot;green&quot;,myCanvas.height);</code>可以将采样曲线在原栅格上显示出来。</p></div><h4 id="拉普拉斯算子卷积" tabindex="-1">拉普拉斯算子卷积 <a class="header-anchor" href="#拉普拉斯算子卷积" aria-hidden="true">#</a></h4><p>编写中...</p><nav class="table-of-contents"><ul><li><a href="#快速体验-地形坡面">快速体验：地形坡面</a></li><li><a href="#预备知识">预备知识</a></li><li><a href="#基础">基础</a><ul><li><a href="#栅格类">栅格类</a></li><li><a href="#统计类">统计类</a></li><li><a href="#栅格渲染器">栅格渲染器</a></li></ul></li><li><a href="#进阶">进阶</a><ul><li><a href="#快速体验-渲染坡向、坡度及坡度变率">快速体验：渲染坡向、坡度及坡度变率</a></li><li><a href="#栅格数据的空间分析">栅格数据的空间分析</a></li></ul></li></ul></nav></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-cfb513e0 data-v-21f75714><div class="edit-info" data-v-21f75714><div class="edit-link" data-v-21f75714><a class="VPLink link edit-link-button" href="http://101.43.94.152:8099/gitlab-instance-a9a44dc1/rvgeo" target="_blank" rel="noreferrer" data-v-21f75714 data-v-3c355974><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-21f75714><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 在 GitLab 上编辑此页<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-21f75714><div class="pager" data-v-21f75714><a class="pager-link prev" href="/app/dist/gs.html" data-v-21f75714><span class="desc" data-v-21f75714>Previous page</span><span class="title" data-v-21f75714>快速上手</span></a></div><div class="has-prev pager" data-v-21f75714><a class="pager-link next" href="/app/dist/tut2.html" data-v-21f75714><span class="desc" data-v-21f75714>Next page</span><span class="title" data-v-21f75714>矢量篇</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-f44a984a data-v-9f24cc86><div class="container" data-v-9f24cc86><p class="message" data-v-9f24cc86>Released under the <a href="http://101.43.94.152:8099/gitlab-instance-a9a44dc1/rvgeo/-/blob/main/LICENSE">MIT License</a>.</p><p class="copyright" data-v-9f24cc86>Copyright © 2022-present <a href="https://github.com/pzq123456">ZQ Pan</a></p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ohif.md\":\"6df5949c\",\"cp1.md\":\"0bddfcbc\",\"cp2.md\":\"3d2f5dcf\",\"cp3.md\":\"86178e91\",\"cp4.md\":\"7de7c678\",\"cp5.md\":\"d7be565e\",\"cp6.md\":\"81a3c26b\",\"cp7.md\":\"772dd980\",\"cp8.md\":\"48937bfb\",\"gs.md\":\"59576c1e\",\"index.md\":\"b0124c3d\",\"team.md\":\"f2eb0b7b\",\"tut1.md\":\"a4459c6d\",\"tut2.md\":\"be7e1543\",\"tut3.md\":\"e5a939ec\"}")</script>
    <script type="module" async src="/app/dist/assets/app.976dcdbd.js"></script>
    
  </body>
</html>