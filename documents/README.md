# RVGeo 3.0.0 文档
> - 2025.5.8 开始 预计发布时间未定
> - 重构 RVGeo 代码库，精简代码，提升性能，删去一部分不必要的代码及功能。
> - 本项目可以作为毕设的一部分。

## 历史回顾

下一个版本将会为社区提供更有用的功能，而不再是用于个人学习及算法验证的玩具性质的项目。之前的若干版本，本质上是作为课程作业的一部分。

例如最早期（1.0版本），本项目是用于空间分析课程中的一个编程作业，该课程需要实现经典的GIS空间分析算法，并搭建一个简易的GIS系统。仍然记得，那个时候大部分同学都在用 Python 或 C# 完成作业（因为有较多参考资料，且院系主要教授这两门编程语言），我较为激进地选择 JavaScript 来完成作业，使用原生 js 依据老师给出的伪代码，从 0 开始实现了许多空间分析算法（明氏、曼哈顿距离计算，凸包、缓冲区、等值线提取等），并使用最原始的 Canvas API 来实现了一个简易的交互界面。这也解释了为什么，早起我如此排斥使用任何已有的 GIS 库（如 turf.js、leaflet.js 等），因为从诚实的角度来说，我还是希望尽可能靠自己来完成作业。当然，这样的选择确实使得我最终获得了课程教授的认可，但也使得该项目的代码变得臃肿且难以维护。你可以想象，在一个没有 ChatGPT 的时代，一个刚刚编程入门的大学二年级学生，使用 js 这样一个“自由”的语言，在有限的时间内，完成如此“复杂”的项目，最终会产生一堆多么混乱的代码。

在 2.0 时期，我本打算将这个代码库整理为毕业设计的一个部分，奈何时间不够加之指导老师反对，最终还是选择了一个相对简单的项目（共享单车轨迹分析）来完成毕业设计。原本的计划是基于现代浏览器的诸多特性，打造一个完全基于浏览器的 GIS 系统，使用 WebGL 来实现高性能的空间分析算法，并使用 Web Worker 来实现多线程计算，此外我还希望将当时火热的 ChatGPT 集成到这个系统中，来实现一些有趣的功能（如自动生成地图、自动生成空间分析报告等）。当时，自己并未意识到工作量的巨大，如果我选择做这个项目作为毕业设计，必然会面临极大的压力及挑战，我跟不可能在有限的时间内完成这个项目。最终，我还是选择了一个相对简单的项目（共享单车轨迹分析）来完成毕业设计。所以，现在看到的 2.0 版本其实是不完整的、且并未考虑实际使用场景的代码。当然，2.0 版本的代码也并非完全无用，至少在该版本，我使用 ts 重构了整个项目，虽然并没有充分利用 ts 的类型系统。

现在，我有了一些实际的 WebGIS 项目经验，也大致了解了当前行业内的具体需求。我不在希望追求一个大而全的项目，那实在不是一个人能够完成的。我希望，聚焦某一个具体的应用场景，以自己的经验为基础，并逐步探索新的技术可能性。

## 版本目标
- 核心：针对浏览器中需要维护和可视化大量空间数据，给出一个高性能的解决方案。
- 代码质量： 将若干已有的、自己实现的空间分析算法替换为更为健壮的社区实现。

具体来说，空间数据的核心组织方式是 GeoJSON，但是在内部会使用 topojson 来组织数据。

- TopoJSON消除了冗余，允许相关几何形状有效地存储在同一文件中。例如，加利福尼亚州和内华达州之间的共同边界只表示一次，而不是两个州的重复。这对于行政区划数据来说是非常有用，且可以带来额外的功能例如领域信息等。
- 当然，转化过程可能是昂贵的，尤其是对于大型数据集。目前在探索使用 WebGL 或 WebGPU 来加速转化过程，主要是想办法改写 TopoJSON 的转化算法，使用 GPU 来加速计算。

https://crossfilter.github.io/crossfilter/


## References
1. [TopoJSON](https://github.com/topojson/topojson)
2. https://www.npmjs.com/package/topojson-client
3. https://www.npmjs.com/package/topojson-server
4. https://www.npmjs.com/package/topojson-simplify