var dn=Object.defineProperty;var pn=(e,t,n)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>(pn(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function mn(e,t,n=14){const r=e;let s=Math.ceil(t.length/n),o=[];for(let i=0;i<s;i++)o.push(yn(t,i*n,(i+1)*n));o.forEach(i=>{const l=document.createElement("div");l.className="toolBarRow",gn(i,l),r.appendChild(l)})}function yn(e,t,n){return e.slice(t,n)}function gn(e,t){e.forEach(({name:n,action:r})=>{const s=document.createElement("button");s.textContent=n,s.addEventListener("click",r),t.appendChild(s)})}const K=11102230246251565e-32,U=134217729,wn=(3+8*K)*K;function qt(e,t,n,r,s){let o,i,l,c,a=t[0],h=r[0],u=0,p=0;h>a==h>-a?(o=a,a=t[++u]):(o=h,h=r[++p]);let d=0;if(u<e&&p<n)for(h>a==h>-a?(i=a+o,l=o-(i-a),a=t[++u]):(i=h+o,l=o-(i-h),h=r[++p]),o=i,l!==0&&(s[d++]=l);u<e&&p<n;)h>a==h>-a?(i=o+a,c=i-o,l=o-(i-c)+(a-c),a=t[++u]):(i=o+h,c=i-o,l=o-(i-c)+(h-c),h=r[++p]),o=i,l!==0&&(s[d++]=l);for(;u<e;)i=o+a,c=i-o,l=o-(i-c)+(a-c),a=t[++u],o=i,l!==0&&(s[d++]=l);for(;p<n;)i=o+h,c=i-o,l=o-(i-c)+(h-c),h=r[++p],o=i,l!==0&&(s[d++]=l);return(o!==0||d===0)&&(s[d++]=o),d}function bn(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function wt(e){return new Float64Array(e)}const An=(3+16*K)*K,En=(2+12*K)*K,Sn=(9+64*K)*K*K,it=wt(4),ce=wt(8),ue=wt(12),he=wt(16),q=wt(4);function xn(e,t,n,r,s,o,i){let l,c,a,h,u,p,d,m,y,A,g,E,M,C,B,k,I,_;const w=e-s,x=n-s,S=t-o,R=r-o;C=w*R,p=U*w,d=p-(p-w),m=w-d,p=U*R,y=p-(p-R),A=R-y,B=m*A-(C-d*y-m*y-d*A),k=S*x,p=U*S,d=p-(p-S),m=S-d,p=U*x,y=p-(p-x),A=x-y,I=m*A-(k-d*y-m*y-d*A),g=B-I,u=B-g,it[0]=B-(g+u)+(u-I),E=C+g,u=E-C,M=C-(E-u)+(g-u),g=M-k,u=M-g,it[1]=M-(g+u)+(u-k),_=E+g,u=_-E,it[2]=E-(_-u)+(g-u),it[3]=_;let T=bn(4,it),F=En*i;if(T>=F||-T>=F||(u=e-w,l=e-(w+u)+(u-s),u=n-x,a=n-(x+u)+(u-s),u=t-S,c=t-(S+u)+(u-o),u=r-R,h=r-(R+u)+(u-o),l===0&&c===0&&a===0&&h===0)||(F=Sn*i+wn*Math.abs(T),T+=w*h+R*l-(S*a+x*c),T>=F||-T>=F))return T;C=l*R,p=U*l,d=p-(p-l),m=l-d,p=U*R,y=p-(p-R),A=R-y,B=m*A-(C-d*y-m*y-d*A),k=c*x,p=U*c,d=p-(p-c),m=c-d,p=U*x,y=p-(p-x),A=x-y,I=m*A-(k-d*y-m*y-d*A),g=B-I,u=B-g,q[0]=B-(g+u)+(u-I),E=C+g,u=E-C,M=C-(E-u)+(g-u),g=M-k,u=M-g,q[1]=M-(g+u)+(u-k),_=E+g,u=_-E,q[2]=E-(_-u)+(g-u),q[3]=_;const G=qt(4,it,4,q,ce);C=w*h,p=U*w,d=p-(p-w),m=w-d,p=U*h,y=p-(p-h),A=h-y,B=m*A-(C-d*y-m*y-d*A),k=S*a,p=U*S,d=p-(p-S),m=S-d,p=U*a,y=p-(p-a),A=a-y,I=m*A-(k-d*y-m*y-d*A),g=B-I,u=B-g,q[0]=B-(g+u)+(u-I),E=C+g,u=E-C,M=C-(E-u)+(g-u),g=M-k,u=M-g,q[1]=M-(g+u)+(u-k),_=E+g,u=_-E,q[2]=E-(_-u)+(g-u),q[3]=_;const L=qt(G,ce,4,q,ue);C=l*h,p=U*l,d=p-(p-l),m=l-d,p=U*h,y=p-(p-h),A=h-y,B=m*A-(C-d*y-m*y-d*A),k=c*a,p=U*c,d=p-(p-c),m=c-d,p=U*a,y=p-(p-a),A=a-y,I=m*A-(k-d*y-m*y-d*A),g=B-I,u=B-g,q[0]=B-(g+u)+(u-I),E=C+g,u=E-C,M=C-(E-u)+(g-u),g=M-k,u=M-g,q[1]=M-(g+u)+(u-k),_=E+g,u=_-E,q[2]=E-(_-u)+(g-u),q[3]=_;const D=qt(L,ue,4,q,he);return he[D-1]}function St(e,t,n,r,s,o){const i=(t-o)*(n-s),l=(e-s)*(r-o),c=i-l,a=Math.abs(i+l);return Math.abs(c)>=An*a?c:-xn(e,t,n,r,s,o,a)}function fe(e,t=0){if(t&&!(t>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,t||0);return Math.round(e*n)/n}function Mn(e){return Math.abs(e)<=180?e:e-Le(e)*360}function Le(e){return e<0?-1:e>0?1:0}function Ce(e,t,n){e=Array.isArray(e)?e:e.toXY(),t=Array.isArray(t)?t:t.toXY(),n=Array.isArray(n)?n:n.toXY();let r=e[0],s=e[1],o=t[0],i=t[1],l=n[0],c=n[1],a=(o-r)*(c-s)-(i-s)*(l-r);return a=Le(a),a}function Lt(e,t){let n=Array.isArray(e)?e:e.toXY(),r=Array.isArray(t)?t:t.toXY(),s=Math.atan2(r[1]-n[1],r[0]-n[0]);return s=s*180/Math.PI,s<0&&(s+=360),s}function Ct(e,t){let n=[];for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?n.push(Ct(s,t)):n.push(t[s])}return n}const Be={a:6378137,b:63710088e-1,Name:"Normal Sphere ( r= 6371008.8 )"},j=Be.a,Pn={centimeters:j*100,centimetres:j*100,degrees:360/(2*Math.PI),feet:j*3.28084,inches:j*39.37,kilometers:j/1e3,kilometres:j/1e3,meters:j,metres:j,miles:j/1609.344,millimeters:j*1e3,millimetres:j*1e3,nauticalmiles:j/1852,radians:1,yards:j*1.0936},On={centimeters:1*100,centimetres:1*100,degrees:360/(2*Math.PI)*1/j,feet:1*3.28084,inches:1*39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1*1e3,millimetres:1*1e3,nauticalmiles:1/1852,radians:1/j,yards:1*1.0936},Rn={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ke(e,t="kilometers"){const n=Pn[t];if(!n)throw new Error(t+" units is invalid");return e*n}function yt(e){return e%360*Math.PI/180}function de(e,t){const n=On[t];if(!n)throw new Error(t+" units is invalid");return e*n}function $(e,t="meters",n=6){const r=20037508342789244e-9,s=j,o=Array.isArray(e)?e:e.to2DArray(),i=Mn(o[0]);let l=yt(i),c=yt(o[1]);return l=ke(l,"meters"),c=s*Math.log(Math.tan(Math.PI*.25+.5*c)),l>r&&(l=r),l<-r&&(l=-r),c>r&&(c=r),c<-r&&(c=-r),l=fe(de(l,t),n),c=fe(de(c,t),n),[l,c]}function st(e){var t=180/Math.PI,n=6378137;return[e[0]*t/n,(Math.PI*.5-2*Math.atan(Math.exp(-e[1]/n)))*t]}function Ln(e,t="meters",n=6){let r=[],s=$([e[0],e[1]],t,n),o=$([e[2],e[3]],t,n);return r=[s[0],s[1],o[0],o[1]],r}function _e(e,t="meters",n=6){let r=[],s=st([e[0],e[1]]),o=st([e[2],e[3]]);return r=[s[0],s[1],o[0],o[1]],r}function Cn(e){return{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2,w:e[2]-e[0],h:e[3]-e[1]}}function te(e){let t=e[0],n=e[1],r=e[2],s=e[3];return[[t,n],[t,s],[r,s],[r,n],[t,n]]}function Bn(e,t){let n=t[0],r=t[1],s=t[2],o=t[3],i=e[0],l=e[1];return i>=n&&i<=s&&l>=r&&l<=o}class Te{constructor(t,n,...r){O(this,"type");O(this,"properties");O(this,"MBR");O(this,"coordinates");this.type=t,this.properties=r,this.coordinates=n,this.MBR=this.calculateMBR()}getPropertyArray(){return this.properties}getMBR(){return this.MBR}}class H{constructor(t,n,r=0,...s){O(this,"lon");O(this,"lat");O(this,"asl");O(this,"type","Point");O(this,"properties");this.lon=t,this.lat=n,this.asl=r,this.properties=s}toXY(t="meters"){return $(this,t)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat],properties:{...this.properties}}}to2DArray(){return[this.lon,this.lat]}to3DArray(){return[this.lon,this.lat,this.asl]}toString(){return`Point(${this.lon}, ${this.lat}, ${this.asl})`}getPropertyArray(){return this.properties}static isPoint(t){return t.type==="Point"}}class ee extends Te{constructor(t,...n){if(t[0]instanceof Array){t=t;let r=[];for(let s=0;s<t.length;s++)r.push(new H(t[s][0],t[s][1]));t=r}super("MultiPoint",t,...n)}getCorrinatesPropertyArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].getPropertyArray();t.push(r)}return t}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].to2DArray();t.push(r)}return t}toXYArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toXY();t.push(r)}return t}toGeoJSON(){return{type:"MultiPoint",coordinates:this.toArray(),properties:{...this.properties}}}calculateMBR(){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let o=0;o<this.coordinates.length;o++){let i=this.coordinates[o].to2DArray();t=Math.min(t,i[0]),n=Math.min(n,i[1]),r=Math.max(r,i[0]),s=Math.max(s,i[1])}return[t,n,r,s]}calculateCentroid(t){if(t){let n=0;for(let l=0;l<t.length;l++)n+=t[l];for(let l=0;l<t.length;l++)t[l]/=n;let r=0,s=0;for(let l=0;l<this.coordinates.length;l++){let c=this.coordinates[l].to2DArray();r+=c[0]*t[l],s+=c[1]*t[l]}let o=r,i=s;return new H(o,i)}else{let n=0,r=0;for(let i=0;i<this.coordinates.length;i++){let l=this.coordinates[i].to2DArray();n+=l[0],r+=l[1]}let s=n/this.coordinates.length,o=r/this.coordinates.length;return new H(s,o)}}deletePoint(t){this.coordinates.splice(t,1),this.MBR=this.calculateMBR()}addPoint(t){let n=H.isPoint(t)?t:new H(t[0],t[1]);this.coordinates.push(n),this.MBR=this.calculateMBR()}static isMultiPoint(t){return t.type==="MultiPoint"}}class bt extends ee{constructor(t,...n){super(t,...n),this.type="LineString"}static isLineString(t){return t.type==="LineString"}sortPoints(){let n=this.calculateCentroid().toXY();this.coordinates.sort((r,s)=>{let o=Lt(n,r.toXY()),i=Lt(n,s.toXY());return o<i?-1:o>i?1:0})}}class kn extends Te{constructor(t,...n){super("MultiLineString",t,...n)}calculateMBR(){let t=1/0,n=1/0,r=-1/0,s=-1/0;for(let o=0;o<this.coordinates.length;o++){let i=this.coordinates[o].getMBR();t=Math.min(t,i[0]),n=Math.min(n,i[1]),r=Math.max(r,i[2]),s=Math.max(s,i[3])}return[t,n,r,s]}toArray(){let t=[];for(let n=0;n<this.coordinates.length;n++){let r=this.coordinates[n].toArray();t.push(r)}return t}toGeoJSON(){return{type:"MultiLineString",coordinates:this.toArray(),properties:{...this.properties}}}static isMultiLineString(t){return t.type==="MultiLineString"}}class ne extends kn{constructor(t,...n){super(t,...n),this.type="Polygon"}static isPolygon(t){return t.type==="Polygon"}}class _n{constructor(t,n,r){O(this,"x");O(this,"y");O(this,"r");O(this,"rSquared");this.x=t,this.y=n,this.r=r,this.rSquared=this.r*this.r}contains(t,n=0){let r=t[0],s=t[1];return Math.pow(r-this.x,2)+Math.pow(s-this.y,2)-this.rSquared<=n}intersects(t){let n=Cn(t),r=Math.abs(n.x-this.x),s=Math.abs(n.y-this.y),o=this.r,i=n.w/2,l=n.h/2,c=Math.pow(r-i,2)+Math.pow(s-l,2);return r>o+i||s>o+l?!1:r<=i||s<=l?!0:c<=this.rSquared}}function Tn(e=180,t=-180){return Math.random()*(e-t)+t}function Nn(e=90,t=-90){return Math.random()*(e-t)+t}function Dn(){return Math.random()*1e4}function In(){return Math.random().toString(36).substr(2)}function Fn(){return["mock",In()]}function Un(e=[-180,-90,180,90]){return new H(Tn(e[2],e[0]),Nn(e[3],e[1]),Dn(),...Fn())}function jn(e,t=[-180,-90,180,90]){let n=[];for(let r=0;r<e;r++)n.push(Un(t));return n}const Wn=["Pink.svg","Blue.svg","Yellow.svg","Green.svg"];function at(e,t=Wn){let n=t[e];return new BMapGL.Icon(n,new BMapGL.Size(11,11),{offset:new BMapGL.Size(5,5)})}function tt(e,t,n){if(n){let r=H.isPoint(e)?new BMapGL.Point(e.lon,e.lat):new BMapGL.Point(e[0],e[1]),s=new BMapGL.Marker(r,{icon:n});t.addOverlay(s)}else{let r=H.isPoint(e)?new BMapGL.Point(e.lon,e.lat):new BMapGL.Point(e[0],e[1]),s=new BMapGL.Marker(r);t.addOverlay(s)}}function Ne(e,t,n){let r=H.isPoint(e)?new BMapGL.Point(e.lon,e.lat):new BMapGL.Point(e[0],e[1]),s=new BMapGL.Label(t,{position:r,offset:new BMapGL.Size(5,5)});return s.setStyle({fontSize:"10px",height:"20px",lineHeight:"20px",fontFamily:"微软雅黑"}),n.addOverlay(s),s}function V(e){e.clearOverlays()}function ct(e,t,n){let r=ee.isMultiPoint(e)?e.coordinates:e;for(let s=0;s<r.length;s++){let o=r[s];tt(o,t,n)}}function Tt(e,t,n={strokeColor:"green",strokeWeight:2,strokeOpacity:.5}){let r=new BMapGL.Point(e[0],e[1]),s=new BMapGL.Point(e[2],e[3]),o=new BMapGL.Polygon([r,new BMapGL.Point(s.lng,r.lat),s,new BMapGL.Point(r.lng,s.lat)],n);t.addOverlay(o)}function X(e,t,n={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5},r=!1){let s=bt.isLineString(e)?e.toArray():e,o=[];for(let l=0;l<s.length;l++)o.push(new BMapGL.Point(s[l][0],s[l][1]));r&&o.push(new BMapGL.Point(s[0][0],s[0][1]));let i=new BMapGL.Polyline(o,n);t.addOverlay(i)}function Nt(e,t,n={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}){let r=ne.isPolygon(e)?e.toArray():e,s=[];for(let i=0;i<r.length;i++){let l=[];for(let c=0;c<r[i].length;c++)l.push(new BMapGL.Point(r[i][c][0],r[i][c][1]));s.push(l)}let o=new BMapGL.Polygon(s,n);t.addOverlay(o)}function De(e,t,n={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}){for(let r=0;r<e.length;r++){let s=[];for(let i=0;i<e[r].length;i++)s.push(new BMapGL.Point(e[r][i][0],e[r][i][1]));s.push(new BMapGL.Point(e[r][0][0],e[r][0][1]));let o=new BMapGL.Polyline(s,n);t.addOverlay(o)}}function qn(e,t,n={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5},r=!1){for(let[,s]of e)X(s,t,n,r)}function pe(e,t,n,r,s={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5},o=!1){let i=e[0],l=e[1],c=e[2],a=e[3],h=(c-i)/n;for(let p=0;p<n+1;p++){let d=i+p*h;X([[d,l],[d,a]],r,s)}let u=(a-l)/t;for(let p=0;p<t+1;p++){let d=l+p*u;X([[i,d],[c,d]],r,s)}if(Tt(e,r),o){let p=10;for(let d=0;d<t;d+=p){let m=l+(d+.5)*u;for(let y=0;y<n;y+=p){let g=[i+(y+.5)*h,m];Ne(g,`(${d},${y})`,r)}}}}function pt(e,t,n={strokeColor:"blue",strokeWeight:2,strokeOpacity:.4},r=!1){let s=r?e.boundary:_e(e.boundary),o=s[0],i=s[1],l=s[2],c=s[3];X([[o,i],[l,i],[l,c],[o,c],[o,i]],t,n),e.northWest&&pt(e.northWest,t,n),e.northEast&&pt(e.northEast,t,n),e.southWest&&pt(e.southWest,t,n),e.southEast&&pt(e.southEast,t,n)}function Hn(e,t,n,r={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}){let s=H.isPoint(e)?new BMapGL.Point(e.lon,e.lat):new BMapGL.Point(e[0],e[1]),o=new BMapGL.Circle(s,t,r);n.addOverlay(o)}function vn(e,t,n){let r=st(e);tt(r,t,n)}function Gn(e,t,n){for(let r=0;r<e.length;r++)vn(e[r],t,n)}function zn(e,t,n={strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}){let r=_e(e);Tt(r,t,n)}function Ie(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xn}=Object.prototype,{getPrototypeOf:re}=Object,Dt=(e=>t=>{const n=Xn.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Y=e=>(e=e.toLowerCase(),t=>Dt(t)===e),It=e=>t=>typeof t===e,{isArray:ht}=Array,gt=It("undefined");function Jn(e){return e!==null&&!gt(e)&&e.constructor!==null&&!gt(e.constructor)&&v(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Fe=Y("ArrayBuffer");function $n(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Fe(e.buffer),t}const Vn=It("string"),v=It("function"),Ue=It("number"),Ft=e=>e!==null&&typeof e=="object",Yn=e=>e===!0||e===!1,Mt=e=>{if(Dt(e)!=="object")return!1;const t=re(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kn=Y("Date"),Qn=Y("File"),Zn=Y("Blob"),tr=Y("FileList"),er=e=>Ft(e)&&v(e.pipe),nr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||v(e.append)&&((t=Dt(e))==="formdata"||t==="object"&&v(e.toString)&&e.toString()==="[object FormData]"))},rr=Y("URLSearchParams"),sr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function At(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),ht(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(r=0;r<i;r++)l=o[r],t.call(null,e[l],l,e)}}function je(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const We=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),qe=e=>!gt(e)&&e!==We;function Vt(){const{caseless:e}=qe(this)&&this||{},t={},n=(r,s)=>{const o=e&&je(t,s)||s;Mt(t[o])&&Mt(r)?t[o]=Vt(t[o],r):Mt(r)?t[o]=Vt({},r):ht(r)?t[o]=r.slice():t[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&At(arguments[r],n);return t}const or=(e,t,n,{allOwnKeys:r}={})=>(At(t,(s,o)=>{n&&v(s)?e[o]=Ie(s,n):e[o]=s},{allOwnKeys:r}),e),ir=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),lr=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ar=(e,t,n,r)=>{let s,o,i;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)i=s[o],(!r||r(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=n!==!1&&re(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},cr=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},ur=e=>{if(!e)return null;if(ht(e))return e;let t=e.length;if(!Ue(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},hr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&re(Uint8Array)),fr=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},dr=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},pr=Y("HTMLFormElement"),mr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),me=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),yr=Y("RegExp"),He=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};At(n,(s,o)=>{let i;(i=t(s,o,e))!==!1&&(r[o]=i||s)}),Object.defineProperties(e,r)},gr=e=>{He(e,(t,n)=>{if(v(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(v(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wr=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return ht(e)?r(e):r(String(e).split(t)),n},br=()=>{},Ar=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ht="abcdefghijklmnopqrstuvwxyz",ye="0123456789",ve={DIGIT:ye,ALPHA:Ht,ALPHA_DIGIT:Ht+Ht.toUpperCase()+ye},Er=(e=16,t=ve.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Sr(e){return!!(e&&v(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const xr=e=>{const t=new Array(10),n=(r,s)=>{if(Ft(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const o=ht(r)?[]:{};return At(r,(i,l)=>{const c=n(i,s+1);!gt(c)&&(o[l]=c)}),t[s]=void 0,o}}return r};return n(e,0)},Mr=Y("AsyncFunction"),Pr=e=>e&&(Ft(e)||v(e))&&v(e.then)&&v(e.catch),f={isArray:ht,isArrayBuffer:Fe,isBuffer:Jn,isFormData:nr,isArrayBufferView:$n,isString:Vn,isNumber:Ue,isBoolean:Yn,isObject:Ft,isPlainObject:Mt,isUndefined:gt,isDate:Kn,isFile:Qn,isBlob:Zn,isRegExp:yr,isFunction:v,isStream:er,isURLSearchParams:rr,isTypedArray:hr,isFileList:tr,forEach:At,merge:Vt,extend:or,trim:sr,stripBOM:ir,inherits:lr,toFlatObject:ar,kindOf:Dt,kindOfTest:Y,endsWith:cr,toArray:ur,forEachEntry:fr,matchAll:dr,isHTMLForm:pr,hasOwnProperty:me,hasOwnProp:me,reduceDescriptors:He,freezeMethods:gr,toObjectSet:wr,toCamelCase:mr,noop:br,toFiniteNumber:Ar,findKey:je,global:We,isContextDefined:qe,ALPHABET:ve,generateString:Er,isSpecCompliantForm:Sr,toJSONObject:xr,isAsyncFn:Mr,isThenable:Pr};function P(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}f.inherits(P,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ge=P.prototype,ze={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ze[e]={value:e}});Object.defineProperties(P,ze);Object.defineProperty(Ge,"isAxiosError",{value:!0});P.from=(e,t,n,r,s,o)=>{const i=Object.create(Ge);return f.toFlatObject(e,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),P.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const Or=null;function Yt(e){return f.isPlainObject(e)||f.isArray(e)}function Xe(e){return f.endsWith(e,"[]")?e.slice(0,-2):e}function ge(e,t,n){return e?e.concat(t).map(function(s,o){return s=Xe(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function Rr(e){return f.isArray(e)&&!e.some(Yt)}const Lr=f.toFlatObject(f,{},null,function(t){return/^is[A-Z]/.test(t)});function Ut(e,t,n){if(!f.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=f.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,A){return!f.isUndefined(A[y])});const r=n.metaTokens,s=n.visitor||h,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&f.isSpecCompliantForm(t);if(!f.isFunction(s))throw new TypeError("visitor must be a function");function a(m){if(m===null)return"";if(f.isDate(m))return m.toISOString();if(!c&&f.isBlob(m))throw new P("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(m)||f.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function h(m,y,A){let g=m;if(m&&!A&&typeof m=="object"){if(f.endsWith(y,"{}"))y=r?y:y.slice(0,-2),m=JSON.stringify(m);else if(f.isArray(m)&&Rr(m)||(f.isFileList(m)||f.endsWith(y,"[]"))&&(g=f.toArray(m)))return y=Xe(y),g.forEach(function(M,C){!(f.isUndefined(M)||M===null)&&t.append(i===!0?ge([y],C,o):i===null?y:y+"[]",a(M))}),!1}return Yt(m)?!0:(t.append(ge(A,y,o),a(m)),!1)}const u=[],p=Object.assign(Lr,{defaultVisitor:h,convertValue:a,isVisitable:Yt});function d(m,y){if(!f.isUndefined(m)){if(u.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));u.push(m),f.forEach(m,function(g,E){(!(f.isUndefined(g)||g===null)&&s.call(t,g,f.isString(E)?E.trim():E,y,p))===!0&&d(g,y?y.concat(E):[E])}),u.pop()}}if(!f.isObject(e))throw new TypeError("data must be an object");return d(e),t}function we(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function se(e,t){this._pairs=[],e&&Ut(e,this,t)}const Je=se.prototype;Je.append=function(t,n){this._pairs.push([t,n])};Je.toString=function(t){const n=t?function(r){return t.call(this,r,we)}:we;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Cr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $e(e,t,n){if(!t)return e;const r=n&&n.encode||Cr,s=n&&n.serialize;let o;if(s?o=s(t,n):o=f.isURLSearchParams(t)?t.toString():new se(t,n).toString(r),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Br{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){f.forEach(this.handlers,function(r){r!==null&&t(r)})}}const be=Br,Ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kr=typeof URLSearchParams<"u"?URLSearchParams:se,_r=typeof FormData<"u"?FormData:null,Tr=typeof Blob<"u"?Blob:null,Nr=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Dr=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),z={isBrowser:!0,classes:{URLSearchParams:kr,FormData:_r,Blob:Tr},isStandardBrowserEnv:Nr,isStandardBrowserWebWorkerEnv:Dr,protocols:["http","https","file","blob","url","data"]};function Ir(e,t){return Ut(e,new z.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return z.isNode&&f.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function Fr(e){return f.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ur(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function Ye(e){function t(n,r,s,o){let i=n[o++];const l=Number.isFinite(+i),c=o>=n.length;return i=!i&&f.isArray(s)?s.length:i,c?(f.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!l):((!s[i]||!f.isObject(s[i]))&&(s[i]=[]),t(n,r,s[i],o)&&f.isArray(s[i])&&(s[i]=Ur(s[i])),!l)}if(f.isFormData(e)&&f.isFunction(e.entries)){const n={};return f.forEachEntry(e,(r,s)=>{t(Fr(r),s,n,0)}),n}return null}function jr(e,t,n){if(f.isString(e))try{return(t||JSON.parse)(e),f.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const oe={transitional:Ve,adapter:z.isNode?"http":"xhr",transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=f.isObject(t);if(o&&f.isHTMLForm(t)&&(t=new FormData(t)),f.isFormData(t))return s&&s?JSON.stringify(Ye(t)):t;if(f.isArrayBuffer(t)||f.isBuffer(t)||f.isStream(t)||f.isFile(t)||f.isBlob(t))return t;if(f.isArrayBufferView(t))return t.buffer;if(f.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Ir(t,this.formSerializer).toString();if((l=f.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ut(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),jr(t)):t}],transformResponse:[function(t){const n=this.transitional||oe.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(t&&f.isString(t)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(i)throw l.name==="SyntaxError"?P.from(l,P.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:z.classes.FormData,Blob:z.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};f.forEach(["delete","get","head","post","put","patch"],e=>{oe.headers[e]={}});const ie=oe,Wr=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qr=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||t[n]&&Wr[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Ae=Symbol("internals");function ft(e){return e&&String(e).trim().toLowerCase()}function Pt(e){return e===!1||e==null?e:f.isArray(e)?e.map(Pt):String(e)}function Hr(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const vr=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vt(e,t,n,r,s){if(f.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!f.isString(t)){if(f.isString(r))return t.indexOf(r)!==-1;if(f.isRegExp(r))return r.test(t)}}function Gr(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function zr(e,t){const n=f.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,i){return this[r].call(this,t,s,o,i)},configurable:!0})})}class jt{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(l,c,a){const h=ft(c);if(!h)throw new Error("header name must be a non-empty string");const u=f.findKey(s,h);(!u||s[u]===void 0||a===!0||a===void 0&&s[u]!==!1)&&(s[u||c]=Pt(l))}const i=(l,c)=>f.forEach(l,(a,h)=>o(a,h,c));return f.isPlainObject(t)||t instanceof this.constructor?i(t,n):f.isString(t)&&(t=t.trim())&&!vr(t)?i(qr(t),n):t!=null&&o(n,t,r),this}get(t,n){if(t=ft(t),t){const r=f.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return Hr(s);if(f.isFunction(n))return n.call(this,s,r);if(f.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ft(t),t){const r=f.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||vt(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(i){if(i=ft(i),i){const l=f.findKey(r,i);l&&(!n||vt(r,r[l],l,n))&&(delete r[l],s=!0)}}return f.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||vt(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return f.forEach(this,(s,o)=>{const i=f.findKey(r,o);if(i){n[i]=Pt(s),delete n[o];return}const l=t?Gr(o):String(o).trim();l!==o&&delete n[o],n[l]=Pt(s),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return f.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&f.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Ae]=this[Ae]={accessors:{}}).accessors,s=this.prototype;function o(i){const l=ft(i);r[l]||(zr(s,i),r[l]=!0)}return f.isArray(t)?t.forEach(o):o(t),this}}jt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);f.reduceDescriptors(jt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});f.freezeMethods(jt);const Q=jt;function Gt(e,t){const n=this||ie,r=t||n,s=Q.from(r.headers);let o=r.data;return f.forEach(e,function(l){o=l.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Ke(e){return!!(e&&e.__CANCEL__)}function Et(e,t,n){P.call(this,e??"canceled",P.ERR_CANCELED,t,n),this.name="CanceledError"}f.inherits(Et,P,{__CANCEL__:!0});function Xr(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new P("Request failed with status code "+n.status,[P.ERR_BAD_REQUEST,P.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Jr=z.isStandardBrowserEnv?function(){return{write:function(n,r,s,o,i,l){const c=[];c.push(n+"="+encodeURIComponent(r)),f.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),f.isString(o)&&c.push("path="+o),f.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function $r(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Vr(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Qe(e,t){return e&&!$r(t)?Vr(e,t):t}const Yr=z.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(o){let i=o;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(i){const l=f.isString(i)?s(i):i;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function Kr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Qr(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,i;return t=t!==void 0?t:1e3,function(c){const a=Date.now(),h=r[o];i||(i=a),n[s]=c,r[s]=a;let u=o,p=0;for(;u!==s;)p+=n[u++],u=u%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),a-i<t)return;const d=h&&a-h;return d?Math.round(p*1e3/d):void 0}}function Ee(e,t){let n=0;const r=Qr(50,250);return s=>{const o=s.loaded,i=s.lengthComputable?s.total:void 0,l=o-n,c=r(l),a=o<=i;n=o;const h={loaded:o,total:i,progress:i?o/i:void 0,bytes:l,rate:c||void 0,estimated:c&&i&&a?(i-o)/c:void 0,event:s};h[t?"download":"upload"]=!0,e(h)}}const Zr=typeof XMLHttpRequest<"u",ts=Zr&&function(e){return new Promise(function(n,r){let s=e.data;const o=Q.from(e.headers).normalize(),i=e.responseType;let l;function c(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}f.isFormData(s)&&(z.isStandardBrowserEnv||z.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const d=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(d+":"+m))}const h=Qe(e.baseURL,e.url);a.open(e.method.toUpperCase(),$e(h,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function u(){if(!a)return;const d=Q.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),y={data:!i||i==="text"||i==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:d,config:e,request:a};Xr(function(g){n(g),c()},function(g){r(g),c()},y),a=null}if("onloadend"in a?a.onloadend=u:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(u)},a.onabort=function(){a&&(r(new P("Request aborted",P.ECONNABORTED,e,a)),a=null)},a.onerror=function(){r(new P("Network Error",P.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let m=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||Ve;e.timeoutErrorMessage&&(m=e.timeoutErrorMessage),r(new P(m,y.clarifyTimeoutError?P.ETIMEDOUT:P.ECONNABORTED,e,a)),a=null},z.isStandardBrowserEnv){const d=(e.withCredentials||Yr(h))&&e.xsrfCookieName&&Jr.read(e.xsrfCookieName);d&&o.set(e.xsrfHeaderName,d)}s===void 0&&o.setContentType(null),"setRequestHeader"in a&&f.forEach(o.toJSON(),function(m,y){a.setRequestHeader(y,m)}),f.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),i&&i!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",Ee(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",Ee(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=d=>{a&&(r(!d||d.type?new Et(null,e,a):d),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const p=Kr(h);if(p&&z.protocols.indexOf(p)===-1){r(new P("Unsupported protocol "+p+":",P.ERR_BAD_REQUEST,e));return}a.send(s||null)})},Ot={http:Or,xhr:ts};f.forEach(Ot,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ze={getAdapter:e=>{e=f.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let s=0;s<t&&(n=e[s],!(r=f.isString(n)?Ot[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new P(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(f.hasOwnProp(Ot,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!f.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Ot};function zt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Et(null,e)}function Se(e){return zt(e),e.headers=Q.from(e.headers),e.data=Gt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ze.getAdapter(e.adapter||ie.adapter)(e).then(function(r){return zt(e),r.data=Gt.call(e,e.transformResponse,r),r.headers=Q.from(r.headers),r},function(r){return Ke(r)||(zt(e),r&&r.response&&(r.response.data=Gt.call(e,e.transformResponse,r.response),r.response.headers=Q.from(r.response.headers))),Promise.reject(r)})}const xe=e=>e instanceof Q?e.toJSON():e;function ut(e,t){t=t||{};const n={};function r(a,h,u){return f.isPlainObject(a)&&f.isPlainObject(h)?f.merge.call({caseless:u},a,h):f.isPlainObject(h)?f.merge({},h):f.isArray(h)?h.slice():h}function s(a,h,u){if(f.isUndefined(h)){if(!f.isUndefined(a))return r(void 0,a,u)}else return r(a,h,u)}function o(a,h){if(!f.isUndefined(h))return r(void 0,h)}function i(a,h){if(f.isUndefined(h)){if(!f.isUndefined(a))return r(void 0,a)}else return r(void 0,h)}function l(a,h,u){if(u in t)return r(a,h);if(u in e)return r(void 0,a)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(a,h)=>s(xe(a),xe(h),!0)};return f.forEach(Object.keys(Object.assign({},e,t)),function(h){const u=c[h]||s,p=u(e[h],t[h],h);f.isUndefined(p)&&u!==l||(n[h]=p)}),n}const tn="1.5.0",le={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{le[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Me={};le.transitional=function(t,n,r){function s(o,i){return"[Axios v"+tn+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,l)=>{if(t===!1)throw new P(s(i," has been removed"+(n?" in "+n:"")),P.ERR_DEPRECATED);return n&&!Me[i]&&(Me[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,l):!0}};function es(e,t,n){if(typeof e!="object")throw new P("options must be an object",P.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],i=t[o];if(i){const l=e[o],c=l===void 0||i(l,o,e);if(c!==!0)throw new P("option "+o+" must be "+c,P.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new P("Unknown option "+o,P.ERR_BAD_OPTION)}}const Kt={assertOptions:es,validators:le},Z=Kt.validators;class Bt{constructor(t){this.defaults=t,this.interceptors={request:new be,response:new be}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ut(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Kt.assertOptions(r,{silentJSONParsing:Z.transitional(Z.boolean),forcedJSONParsing:Z.transitional(Z.boolean),clarifyTimeoutError:Z.transitional(Z.boolean)},!1),s!=null&&(f.isFunction(s)?n.paramsSerializer={serialize:s}:Kt.assertOptions(s,{encode:Z.function,serialize:Z.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&f.merge(o.common,o[n.method]);o&&f.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),n.headers=Q.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const a=[];this.interceptors.response.forEach(function(y){a.push(y.fulfilled,y.rejected)});let h,u=0,p;if(!c){const m=[Se.bind(this),void 0];for(m.unshift.apply(m,l),m.push.apply(m,a),p=m.length,h=Promise.resolve(n);u<p;)h=h.then(m[u++],m[u++]);return h}p=l.length;let d=n;for(u=0;u<p;){const m=l[u++],y=l[u++];try{d=m(d)}catch(A){y.call(this,A);break}}try{h=Se.call(this,d)}catch(m){return Promise.reject(m)}for(u=0,p=a.length;u<p;)h=h.then(a[u++],a[u++]);return h}getUri(t){t=ut(this.defaults,t);const n=Qe(t.baseURL,t.url);return $e(n,t.params,t.paramsSerializer)}}f.forEach(["delete","get","head","options"],function(t){Bt.prototype[t]=function(n,r){return this.request(ut(r||{},{method:t,url:n,data:(r||{}).data}))}});f.forEach(["post","put","patch"],function(t){function n(r){return function(o,i,l){return this.request(ut(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Bt.prototype[t]=n(),Bt.prototype[t+"Form"]=n(!0)});const Rt=Bt;class ae{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(l=>{r.subscribe(l),o=l}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o,i,l){r.reason||(r.reason=new Et(o,i,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new ae(function(s){t=s}),cancel:t}}}const ns=ae;function rs(e){return function(n){return e.apply(null,n)}}function ss(e){return f.isObject(e)&&e.isAxiosError===!0}const Qt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qt).forEach(([e,t])=>{Qt[t]=e});const os=Qt;function en(e){const t=new Rt(e),n=Ie(Rt.prototype.request,t);return f.extend(n,Rt.prototype,t,{allOwnKeys:!0}),f.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return en(ut(e,s))},n}const N=en(ie);N.Axios=Rt;N.CanceledError=Et;N.CancelToken=ns;N.isCancel=Ke;N.VERSION=tn;N.toFormData=Ut;N.AxiosError=P;N.Cancel=N.CanceledError;N.all=function(t){return Promise.all(t)};N.spread=rs;N.isAxiosError=ss;N.mergeConfig=ut;N.AxiosHeaders=Q;N.formToJSON=e=>Ye(f.isHTMLForm(e)?new FormData(e):e);N.getAdapter=Ze.getAdapter;N.HttpStatusCode=os;N.default=N;const is=N;function ls(e){if(e.length===2)return new H(e[0],e[1]);if(e.length===3)return new H(e[0],e[1],e[2]);if(e.length>4)return new H(e[0],e[1],e[2],...e.slice(3));throw new Error("Error: the length of array is not correct")}function nn(e){let t=[];for(let n=0;n<e.length;n++){if(e[n]==null)continue;let r=ls(e[n]);t.push(r)}return t}function Xt(e,t){return e[0]*t[1]-t[0]*e[1]}function Zt(e,t,n,r,s=$,o=st,i=!1){s&&(e=s(e),t=s(t),n=s(n),r=s(r));let l=[t[0]-e[0],t[1]-e[1]],c=[r[0]-n[0],r[1]-n[1]],a=Xt(l,c);if(a===0)return console.log("两条线段平行或共线"),null;let h=Xt([n[0]-e[0],n[1]-e[1]],c)/a,u=Xt([n[0]-e[0],n[1]-e[1]],l)/a;return!i&&(h<0||h>1||u<0||u>1)?(console.log("交点不在两条线段上"),null):o?o([e[0]+l[0]*h,e[1]+l[1]*h]):[e[0]+l[0]*h,e[1]+l[1]*h]}function rn(e,t,n=!1){if(n){let r=$(e),s=t[0],o=t[1],i=t[2],l=t[3];return[s,o]=$([s,o]),[i,l]=$([i,l]),r[0]<s||r[0]>i||r[1]<o||r[1]>l}else{let r=t[0],s=t[1],o=t[2],i=t[3];return e[0]<r||e[0]>o||e[1]<s||e[1]>i}}function as(e,t){return!(e[0]>t[2]||e[2]<t[0]||e[1]>t[3]||e[3]<t[1])}function cs(e,t){return sn(e,te(t))}function sn(e,t){let n=e[e.length-1],r,s,o,i=t;for(let l in e){r=e[l];let c=i;i=[],s=c[c.length-1];for(let a in c){if(o=c[a],mt(o,n,r)){if(!mt(s,n,r)){let h=Zt(s,o,n,r,$,st,!0);i.push(h)}i.push(o)}else if(mt(s,n,r)){let h=Zt(s,o,n,r,$,st,!0);i.push(h)}s=o}n=r}return i}function mt(e,t,n){return Ce(t,n,e)>0}const Pe=Math.pow(2,-52),xt=new Uint32Array(512);class et{static from(t,n=on,r=ln){const s=t.length,o=new Float64Array(s*2);for(let i=0;i<s;i++){const l=t[i];o[2*i]=n(l),o[2*i+1]=r(l)}return new et(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:s,_hullHash:o}=this,i=t.length>>1;let l=1/0,c=1/0,a=-1/0,h=-1/0;for(let w=0;w<i;w++){const x=t[2*w],S=t[2*w+1];x<l&&(l=x),S<c&&(c=S),x>a&&(a=x),S>h&&(h=S),this._ids[w]=w}const u=(l+a)/2,p=(c+h)/2;let d,m,y;for(let w=0,x=1/0;w<i;w++){const S=Jt(u,p,t[2*w],t[2*w+1]);S<x&&(d=w,x=S)}const A=t[2*d],g=t[2*d+1];for(let w=0,x=1/0;w<i;w++){if(w===d)continue;const S=Jt(A,g,t[2*w],t[2*w+1]);S<x&&S>0&&(m=w,x=S)}let E=t[2*m],M=t[2*m+1],C=1/0;for(let w=0;w<i;w++){if(w===d||w===m)continue;const x=fs(A,g,E,M,t[2*w],t[2*w+1]);x<C&&(y=w,C=x)}let B=t[2*y],k=t[2*y+1];if(C===1/0){for(let S=0;S<i;S++)this._dists[S]=t[2*S]-t[0]||t[2*S+1]-t[1];lt(this._ids,this._dists,0,i-1);const w=new Uint32Array(i);let x=0;for(let S=0,R=-1/0;S<i;S++){const T=this._ids[S],F=this._dists[T];F>R&&(w[x++]=T,R=F)}this.hull=w.subarray(0,x),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(St(A,g,E,M,B,k)<0){const w=m,x=E,S=M;m=y,E=B,M=k,y=w,B=x,k=S}const I=this.circumcenter(A,g,E,M,B,k);this._cx=I.x,this._cy=I.y;for(let w=0;w<i;w++)this._dists[w]=Jt(t[2*w],t[2*w+1],I.x,I.y);lt(this._ids,this._dists,0,i-1),this._hullStart=d;let _=3;r[d]=n[y]=m,r[m]=n[d]=y,r[y]=n[m]=d,s[d]=0,s[m]=1,s[y]=2,o.fill(-1),o[this._hashKey(A,g)]=d,o[this._hashKey(E,M)]=m,o[this._hashKey(B,k)]=y,this.trianglesLen=0,this._addTriangle(d,m,y,-1,-1,-1);for(let w=0,x,S;w<this._ids.length;w++){const R=this._ids[w],T=t[2*R],F=t[2*R+1];if(w>0&&Math.abs(T-x)<=Pe&&Math.abs(F-S)<=Pe||(x=T,S=F,R===d||R===m||R===y))continue;let G=0;for(let Wt=0,fn=this._hashKey(T,F);Wt<this._hashSize&&(G=o[(fn+Wt)%this._hashSize],!(G!==-1&&G!==r[G]));Wt++);G=n[G];let L=G,D;for(;D=r[L],St(T,F,t[2*L],t[2*L+1],t[2*D],t[2*D+1])>=0;)if(L=D,L===G){L=-1;break}if(L===-1)continue;let nt=this._addTriangle(L,R,r[L],-1,-1,s[L]);s[R]=this._legalize(nt+2),s[L]=nt,_++;let J=r[L];for(;D=r[J],St(T,F,t[2*J],t[2*J+1],t[2*D],t[2*D+1])<0;)nt=this._addTriangle(J,R,D,s[R],-1,s[J]),s[R]=this._legalize(nt+2),r[J]=J,_--,J=D;if(L===G)for(;D=n[L],St(T,F,t[2*D],t[2*D+1],t[2*L],t[2*L+1])<0;)nt=this._addTriangle(D,R,L,-1,s[L],s[D]),this._legalize(nt+2),s[D]=nt,r[L]=L,_--,L=D;this._hullStart=n[R]=L,r[L]=n[J]=R,r[R]=J,o[this._hashKey(T,F)]=R,o[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(_);for(let w=0,x=this._hullStart;w<_;w++)this.hull[w]=x,x=r[x];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(us(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:s}=this;let o=0,i=0;for(;;){const l=r[t],c=t-t%3;if(i=c+(t+2)%3,l===-1){if(o===0)break;t=xt[--o];continue}const a=l-l%3,h=c+(t+1)%3,u=a+(l+2)%3,p=n[i],d=n[t],m=n[h],y=n[u];if(hs(s[2*p],s[2*p+1],s[2*d],s[2*d+1],s[2*m],s[2*m+1],s[2*y],s[2*y+1])){n[t]=y,n[l]=p;const g=r[u];if(g===-1){let M=this._hullStart;do{if(this._hullTri[M]===u){this._hullTri[M]=t;break}M=this._hullPrev[M]}while(M!==this._hullStart)}this._link(t,g),this._link(l,r[i]),this._link(i,u);const E=a+(l+1)%3;o<xt.length&&(xt[o++]=E)}else{if(o===0)break;t=xt[--o]}}return i}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,s,o,i){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=r,this._link(l,s),this._link(l+1,o),this._link(l+2,i),this.trianglesLen+=3,l}getTriangles(){return this.triangles}getHalfedges(){return this.halfedges}getHull(){return this.hull}getPoints(){let t=[];for(let n=0;n<this.coords.length;n+=2)t.push([this.coords[n],this.coords[n+1]]);return t}getTriangleIndices(){let t=[];for(let n=0;n<this.triangles.length;n+=3)t.push([this.triangles[n],this.triangles[n+1],this.triangles[n+2]]);return t}static circumRadius(t,n,r){const s=n[0]-t[0],o=n[1]-t[1],i=r[0]-t[0],l=r[1]-t[1],c=s*s+o*o,a=i*i+l*l,h=.5/(s*l-o*i),u=(l*c-o*a)*h,p=(s*a-i*c)*h;return u*u+p*p}circumcenter(t,n,r,s,o,i){const l=r-t,c=s-n,a=o-t,h=i-n,u=l*l+c*c,p=a*a+h*h,d=.5/(l*h-c*a),m=t+(h*u-c*p)*d,y=n+(l*p-a*u)*d;return{x:m,y}}}function us(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Jt(e,t,n,r){const s=e-n,o=t-r;return s*s+o*o}function hs(e,t,n,r,s,o,i,l){const c=e-i,a=t-l,h=n-i,u=r-l,p=s-i,d=o-l,m=c*c+a*a,y=h*h+u*u,A=p*p+d*d;return c*(u*A-y*d)-a*(h*A-y*p)+m*(h*d-u*p)<0}function fs(e,t,n,r,s,o){const i=n-e,l=r-t,c=s-e,a=o-t,h=i*i+l*l,u=c*c+a*a,p=.5/(i*a-l*c),d=(a*h-l*u)*p,m=(i*u-c*h)*p;return d*d+m*m}function lt(e,t,n,r){if(r-n<=20)for(let s=n+1;s<=r;s++){const o=e[s],i=t[o];let l=s-1;for(;l>=n&&t[e[l]]>i;)e[l+1]=e[l--];e[l+1]=o}else{const s=n+r>>1;let o=n+1,i=r;dt(e,s,o),t[e[n]]>t[e[r]]&&dt(e,n,r),t[e[o]]>t[e[r]]&&dt(e,o,r),t[e[n]]>t[e[o]]&&dt(e,n,o);const l=e[o],c=t[l];for(;;){do o++;while(t[e[o]]<c);do i--;while(t[e[i]]>c);if(i<o)break;dt(e,o,i)}e[n+1]=e[i],e[i]=l,r-o+1>=i-n?(lt(e,t,o,r),lt(e,t,n,i-1)):(lt(e,t,n,i-1),lt(e,t,o,r))}}function dt(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function on(e){return e[0]}function ln(e){return e[1]}function ds(e){return[3*e,3*e+1,3*e+2]}function ps(e,t){return ds(t).map(n=>e.triangles[n])}function ms(e){return Math.floor(e/3)}function ys(e,t,n){const r=e[0]*e[0]+e[1]*e[1],s=t[0]*t[0]+t[1]*t[1],o=n[0]*n[0]+n[1]*n[1],i=2*(e[0]*(t[1]-n[1])+t[0]*(n[1]-e[1])+n[0]*(e[1]-t[1]));return[1/i*(r*(t[1]-n[1])+s*(n[1]-e[1])+o*(e[1]-t[1])),1/i*(r*(n[0]-t[0])+s*(e[0]-n[0])+o*(t[0]-e[0]))]}function an(e,t,n,r=st){const s=ps(t,n).map(i=>e[i]);let o=ys(s[0],s[1],s[2]);return r&&(o=r(o)),o}function cn(e){return e%3===2?e-2:e+1}function gs(e,t){const n=[];let r=t;do{n.push(r);const s=cn(r);r=e.halfedges[s]}while(r!==-1&&r!==t);return n}function $t(e,t,n){const r=new Set;for(let s=0;s<t.triangles.length;s++){const o=t.triangles[cn(s)];if(!r.has(o)){r.add(o);const c=gs(t,s).map(ms).map(a=>an(e,t,a));n(o,c)}}}class ws{constructor(t,n=on,r=ln){O(this,"delaunay");O(this,"points");t instanceof et?(this.delaunay=t,this.points=t.getPoints()):(this.points=t,this.delaunay=et.from(t,n,r))}getVoronoi(){const{points:t,delaunay:n}=this,r=new Map;return $t(t,n,(s,o)=>r.set(s,o)),r}cutVoronoiByMBR(t){const{points:n,delaunay:r}=this,s=new Map;return $t(n,r,(o,i)=>{this.isInsideMBR(i,t)||(i=cs(i,t)),s.set(o,i)}),s}robustVoronoi(t){const{points:n,delaunay:r}=this,s=new Map;return $t(n,r,(o,i)=>{this.isInsideMBR(i,t)&&s.set(o,i)}),s}isInsideMBR(t,n){const[r,s,o,i]=n;for(let l=0;l<t.length;l++){const[c,a]=t[l];if(c<r||c>o||a<s||a>i)return!1}return!0}}function un(e){const t=e.map((o,i)=>[...o.toXY(),i]);let n=t[0];for(let o=1;o<t.length;o++)t[o][1]<n[1]&&(n=t[o]);t.sort((o,i)=>{let l=Lt([n[0],n[1]],[o[0],o[1]]),c=Lt([n[0],n[1]],[i[0],i[1]]);if(l<c)return-1;if(l>c)return 1;{let a=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2),h=Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2);return a<h?-1:1}});let r=[];r.push(t[0]),r.push(t[1]);for(let o=2;o<t.length;o++){for(;r.length>1&&Ce([r[r.length-2][0],r[r.length-2][1]],[r[r.length-1][0],r[r.length-1][1]],[t[o][0],t[o][1]])<=0;)r.pop();r.push(t[o])}let s=[];for(let o=0;o<r.length;o++){let i=r[o][2];s.push(e[i])}return s}function bs(e,t){let n=e.map(i=>i.toXY());return et.from(n).getTriangleIndices().filter(i=>{let l=[n[i[0]],n[i[1]],n[i[2]]];return et.circumRadius(l[0],l[1],l[2])*t<1})}const Oe=Be.a;function As(e,t,n="kilometers"){Array.isArray(e)&&(e=[...e]),Array.isArray(t)&&(t=[...t]);const r=Array.isArray(e)?e:e.to2DArray(),s=Array.isArray(t)?t:t.to2DArray();r.map((h,u)=>{r[u]=yt(h)}),s.map((h,u)=>{s[u]=yt(h)});const o=s[1]-r[1],i=s[0]-r[0],l=r[1],c=s[1],a=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(l)*Math.cos(c)));return ke(a,n)}function Es(e,t="kilometers"){let n=bt.isLineString(e)?e.toArray():e;if(n.length<3)return 0;H.isPoint(n[0])&&(n=n,n.map((i,l)=>{n[l]=i.to2DArray()})),n=n;let r=0,s=n.length,o=[];for(let i=0;i<s;i++){o.push([]);for(let l=0;l<2;l++){let c=yt(n[i][l]);o[i].push(c)}}for(let i=0;i<s;i++){let l=(i+1)%s,c=(i+2)%s;r+=(o[i][0]-o[c][0])*Math.sin(o[l][1])}return r=r*Oe*Oe/2,r=r*Rn[t],Math.abs(r)}class rt{constructor(t,n,r=10){O(this,"capacity");O(this,"boundary");O(this,"points");O(this,"northWest");O(this,"northEast");O(this,"southWest");O(this,"southEast");O(this,"isDivided");O(this,"depth");O(this,"maxDepth",10);this.capacity=n,this.boundary=t,this.points=[],this.isDivided=!1,this.northWest=null,this.northEast=null,this.southWest=null,this.southEast=null,this.depth=0,this.maxDepth=r}insert(t){return rn(t,this.boundary)?!1:this.points.length<this.capacity&&this.depth<this.maxDepth?(this.points.push(t),!0):(this.isDivided||this.subdivide(),this.northEast.insert(t),this.northWest.insert(t),this.southEast.insert(t),this.southWest.insert(t),!0)}get pointsList(){return this.points.length===0?null:this.points}subdivide(){let t=this.boundary[0],n=this.boundary[1],r=this.boundary[2]-t,s=this.boundary[3]-n,o=new rt([t,n+s/2,t+r/2,n+s],this.capacity),i=new rt([t+r/2,n+s/2,t+r,n+s],this.capacity),l=new rt([t,n,t+r/2,n+s/2],this.capacity),c=new rt([t+r/2,n,t+r,n+s/2],this.capacity);this.northWest=o,this.northEast=i,this.southWest=l,this.southEast=c,this.isDivided=!0,this.depth++}queryRange(t){let n=[];if(!as(this.boundary,t))return n;for(let r=0;r<this.points.length;r++)Bn(this.points[r],t)&&n.push(this.points[r]);return this.northWest===null||(n.push(...this.northWest.queryRange(t)),n.push(...this.northEast.queryRange(t)),n.push(...this.southWest.queryRange(t)),n.push(...this.southEast.queryRange(t))),n}queryCircle(t,n=[]){let r=[];if(t.intersects(this.boundary))n.push(this.boundary);else return r;for(let s=0;s<this.points.length;s++)t.contains(this.points[s],45e8)&&r.push(this.points[s]);return this.northWest===null||(r.push(...this.northWest.queryCircle(t,n)),r.push(...this.northEast.queryCircle(t,n)),r.push(...this.southWest.queryCircle(t,n)),r.push(...this.southEast.queryCircle(t,n))),r}}class Re{constructor(t,n){O(this,"MBR");O(this,"data");O(this,"shape");O(this,"rows");O(this,"cols");O(this,"bands");this.MBR=t,this.data=n,this.shape=[n.length,n[0].length,n[0][0].length],[this.bands,this.rows,this.cols]=this.shape}getShape(){return[this.data.length,this.data[0].length,this.data[0][0].length]}getSubGrid(t,n=[0]){let r=t[0],s=t[1],o=t[2],i=t[3],l=[];for(let c of n){let a=[];for(let h=r;h<=o;h++){let u=[];for(let p=s;p<=i;p++)u.push(this.data[c][h][p]);a.push(u)}l.push(a)}return l}ConvertToGridMBR(t){let n=t[0],r=t[1],s=t[2],o=t[3],i=this.getGridCoord([n,r]),l=this.getGridCoord([s,o]);if(i===null||l===null)return null;{let c=i[0],a=i[1],h=l[0],u=l[1];return[c,a,h,u]}}getGridCoord(t){if(rn(t,this.MBR))return null;{let n=t[0],r=t[1],s=this.MBR[0],o=this.MBR[1],i=this.MBR[2],l=this.MBR[3],c=Math.floor((r-o)/(l-o)*this.rows),a=Math.floor((n-s)/(i-s)*this.cols);return[c,a]}}getCoordByGridCoord(t){let n=t[0],r=t[1],s=this.MBR[0],o=this.MBR[1],i=this.MBR[2],l=this.MBR[3],c=(r+.5)/this.cols*(i-s)+s,a=(n+.5)/this.rows*(l-o)+o;return[c,a]}getBandStatistics(t){let n=this.data[t],r=n[0][0],s=n[0][0],o=0;for(let l=0;l<this.rows;l++)for(let c=0;c<this.cols;c++){let a=n[l][c];a>r&&(r=a),a<s&&(s=a),o+=a}let i=o/(this.rows*this.cols);return{max:r,min:s,mean:i}}}function Ss(e,t){return(e-t.min)/(t.max-t.min)}function xs(e,t,n=Ss){let r=n(t,e),s=Math.floor(r*255);return`rgb(${s},${s},${s})`}function Ms(e,t,n,r,s=xs){let o=n.w/t[0].length,i=n.h/t.length,l=e.getContext("2d");if(l===null)throw new Error("无法获取canvas绘图上下文");for(let c=0;c<t.length;c++)for(let a=0;a<t[0].length;a++){let h=t[c][a],u=s(r,h);l.fillStyle=u,l.fillRect(n.x+a*o,n.y+c*i,o,i)}l.fillStyle="red",l.fillRect(n.x+n.w/2-2,n.y+n.h/2-2,4,4)}const ot=[-109.07111505279033,36.990057191562045,-102.06399125241506,40.981780653665425],kt=document.querySelector("canvas"),hn=kt.getContext("2d");hn.fillStyle="white";hn.fillRect(0,0,kt.width,kt.height);let b=new BMapGL.Map("allmap");b.centerAndZoom(new BMapGL.Point(-105.7220660521329,39.0119712026557),8);b.enableScrollWheelZoom(!0);mn(document.querySelector("#toolBar"),[{name:"绘制多点及其重心",action:()=>Ps()},{name:"绘制三角网",action:()=>Os()},{name:"绘制凸包",action:()=>Rs()},{name:"计算面积",action:()=>Ls()},{name:"绘制Voronoi",action:()=>Cs()},{name:"多边形求交",action:()=>Bs()},{name:"线段求交",action:()=>ks()},{name:"点线关系",action:()=>_s()},{name:"栅格",action:()=>Ts()},{name:"四叉树",action:()=>Ns()},{name:"Alpha Complex",action:()=>Ds()},{name:"clear",action:()=>V(b)}]);let _t=jn(30,ot),W=new ee(_t);function Ps(){V(b);let e=at(0);console.log(W.calculateCentroid()),tt(W.calculateCentroid(),b),ct(W,b,e)}function Os(){V(b);let e=et.from(W.toXYArray()),t=Ct(e.getTriangleIndices(),W.toArray()),n=an(W.toXYArray(),e,0);tt(n,b),De(t,b,{strokeColor:"blue"});let r=Ct(e.getHull(),W.toArray());Nt([r],b,{fillColor:"gray"}),ct(W,b),console.log(e.getHull())}function Rs(){V(b);let e=un(_t),t=new bt(e),n=new ne([t]),r=n.getMBR();Nt(n,b),Tt(r,b)}function Ls(){let e=new bt(te(ot).map(n=>new H(n[0],n[1]))),t=Es(e);alert("科罗拉多州面积（计算）："+t+`平方公里
科罗拉多州面积（真实）：268,627平方公里`)}function Cs(){V(b);let e=et.from(W.toXYArray()),n=new ws(e).cutVoronoiByMBR(ot);qn(n,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0)}function Bs(){V(b);let e=[[-108.43658107534337,40.29976780112503],[-108.43658107534337,38.55075512778069],[-105.67716914258902,38.55075512778069],[-105.67716914258902,40.29976780112503]],t=[[-107.34797321677699,39.68665076371036],[-107.34797321677699,37.315553928222414],[-103.90893321662871,37.315553928222414],[-103.90893321662871,39.68665076371036]];X(e,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0),X(t,b,{strokeColor:"red",strokeWeight:2,strokeOpacity:.5},!0);let n=sn(e,t);Nt([n],b,{fillColor:"red"}),ct(nn(n),b)}function ks(){V(b);let e=[[-108.742669882491,40.72721830758718],[-102.29819316274084,37.2873641721976]],t=[[-107.97399126074589,37.59766864452851],[-102.641058204481,40.664014824200905]],n=[[-102.3965685720985,41.613436668810465],[-101.58822187178613,37.428342894987836]];X(e,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0),X(t,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0),X(n,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0);let r=Zt(e[0],e[1],t[0],t[1]);tt(r,b)}function _s(){V(b);let e=[[-105.84580648407761,40.23546027049062],[-105.98171384883719,37.38228706395721]],t=at(0),n=[-107.11904390129598,39.05128102775606],r=at(1),s=[-104.51534491327676,38.97346949562407],o=mt(n,e[0],e[1]),i=mt(s,e[0],e[1]);X(e,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0),tt(n,b,t),tt(s,b,r),alert("outPoi: "+o+`
inPoi: `+i)}function Ts(){is.get("dem.csv").then(t=>{let n=[-107.19241981061282,37.96392802178495,-104.23896455039352,39.75362886925538],r=e(t.data),s=new Re(ot,[r]),o=[-105.723781221762,38.87054575208597],i=s.ConvertToGridMBR(n),l=s.getSubGrid(i),c=new Re(n,l);console.log(c),pe(c.MBR,c.rows,c.cols,b,{strokeColor:"red",strokeWeight:2,strokeOpacity:.5}),X(te(ot),b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5},!0),tt(o,b),Ne(o,`${s.getGridCoord(o)}`,b),pe(s.MBR,s.rows,s.cols,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5}),Ms(kt,r,{x:0,y:0,w:512,h:512},s.getBandStatistics(0))});function e(t){let n=t.split(`
`),r=[];for(let s of n){let o=s.split(","),i=[];for(let l of o){let c=parseInt(l);isNaN(c)&&(c=0),i.push(c)}r.push(i)}return r.pop(),r}}function Ns(){V(b);let e=[-107.68090845026995,37.315553928222414,-106.90893321662871,38.664014824200905],t=Ln(ot),n=As([e[0],e[1]],[e[2],e[3]],"meters"),r=$(W.calculateCentroid(),"meters",6),s=new _n(r[0],r[1],Math.round(n)/2),o=ot,i=2,l=new rt(o,i),c=new rt(t,i);W.toArray().forEach(d=>l.insert(d)),W.toXYArray().forEach(d=>{c.insert(d)}),pt(c,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.1},!0);let a=[],h=c.queryCircle(s,a),u=l.queryRange(e);Gn(h,b);for(let d=0;d<a.length;d++)zn(a[d],b,{strokeColor:"blue",strokeOpacity:.5});Hn(W.calculateCentroid(),Math.round(n)/2,b,{strokeColor:"red",strokeOpacity:.5,fillColor:"red",fillOpacity:.2});let p=at(0);ct(W,b,p),ct(nn(u),b,at(1)),Tt(e,b,{strokeColor:"green",strokeWeight:2,strokeOpacity:.5,fillColor:"green",fillOpacity:.2})}function Ds(){V(b);let e=1/15e9,t=bs(_t,e);console.log(t);let n=Ct(t,W.toArray());De(n,b,{strokeColor:"blue"});let r=at(0);ct(W,b,r);let s=un(_t),o=new bt(s),i=new ne([o]);Nt(i,b,{fillColor:"red",fillOpacity:.1,strokeColor:"red",strokeOpacity:.5})}
